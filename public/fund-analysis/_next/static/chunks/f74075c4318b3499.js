(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31354,e=>{"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,r)};function r(e,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,i=Object.getOwnPropertySymbols(e);s<i.length;s++)0>t.indexOf(i[s])&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(r[i[s]]=e[i[s]]);return r}function n(e,t,r,i){var s,n=arguments.length,a=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(n<3?s(a):n>3?s(t,r,a):s(t,r))||a);return n>3&&a&&Object.defineProperty(t,r,a),a}function a(e,t){return function(r,i){t(r,i,e)}}function o(e,t,r,i,s,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=i.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?i.static?e:e.prototype:null,h=t||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),d=!1,p=r.length-1;p>=0;p--){var f={};for(var m in i)f[m]="access"===m?{}:i[m];for(var m in i.access)f.access[m]=i.access[m];f.addInitializer=function(e){if(d)throw TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var g=(0,r[p])("accessor"===l?{get:h.get,set:h.set}:h[u],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(o=a(g.get))&&(h.get=o),(o=a(g.set))&&(h.set=o),(o=a(g.init))&&s.unshift(o)}else(o=a(g))&&("field"===l?s.unshift(o):h[u]=o)}c&&Object.defineProperty(c,i.name,h),d=!0}function l(e,t,r){for(var i=arguments.length>2,s=0;s<t.length;s++)r=i?t[s].call(e,r):t[s].call(e);return i?r:void 0}function u(e){return"symbol"==typeof e?e:"".concat(e)}function c(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function d(e,t,r,i){return new(r||(r=Promise))(function(s,n){function a(e){try{l(i.next(e))}catch(e){n(e)}}function o(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?s(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((i=i.apply(e,t||[])).next())})}function p(e,t){var r,i,s,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=o(0),a.throw=o(1),a.return=o(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(o){return function(l){var u=[o,l];if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=2&u[0]?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(!(s=(s=n.trys).length>0&&s[s.length-1])&&(6===u[0]||2===u[0])){n=0;continue}if(3===u[0]&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(6===u[0]&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(e){u=[6,e],i=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var f=Object.create?function(e,t,r,i){void 0===i&&(i=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,s)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function m(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||f(t,e,r)}function g(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,s,n=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(e){s={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function w(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),s=0,t=0;t<r;t++)for(var n=arguments[t],a=0,o=n.length;a<o;a++,s++)i[s]=n[a];return i}function b(e,t,r){if(r||2==arguments.length)for(var i,s=0,n=t.length;s<n;s++)!i&&s in t||(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function j(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,s=r.apply(e,t||[]),n=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(e,t){s[e]&&(i[e]=function(t){return new Promise(function(r,i){n.push([e,t,r,i])>1||o(e,t)})},t&&(i[e]=t(i[e])))}function o(e,t){try{var r;(r=s[e](t)).value instanceof x?Promise.resolve(r.value.v).then(l,u):c(n[0][2],r)}catch(e){c(n[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),n.shift(),n.length&&o(n[0][0],n[0][1])}}function S(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,s){t[i]=e[i]?function(t){return(r=!r)?{value:x(e[i](t)),done:!1}:s?s(t):t}:s}}function k(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=g(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,s){var n,a,o;n=i,a=s,o=(t=e[r](t)).done,Promise.resolve(t.value).then(function(e){n({value:e,done:o})},a)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var E=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},T=function(e){return(T=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=T(e),i=0;i<r.length;i++)"default"!==r[i]&&f(t,e,r[i]);return E(t,e),t}function C(e){return e&&e.__esModule?e:{default:e}}function O(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function N(e,t,r,i,s){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?s.call(e,r):s?s.value=r:t.set(e,r),r}function P(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function I(e,t,r){if(null!=t){var i,s;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(s=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");s&&(i=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var R="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function $(e){function t(t){e.error=e.hasError?new R(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,i=0;return function s(){for(;r=e.stack.pop();)try{if(!r.async&&1===i)return i=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var n=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(n).then(s,function(e){return t(e),s()})}else i|=1}catch(e){t(e)}if(1===i)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function B(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,s,n){return r?t?".jsx":".js":!i||s&&n?i+s+"."+n.toLowerCase()+"js":e}):e}let M={__extends:r,__assign:i,__rest:s,__decorate:n,__param:a,__esDecorate:o,__runInitializers:l,__propKey:u,__setFunctionName:c,__metadata:h,__awaiter:d,__generator:p,__createBinding:f,__exportStar:m,__values:g,__read:y,__spread:v,__spreadArrays:w,__spreadArray:b,__await:x,__asyncGenerator:j,__asyncDelegator:S,__asyncValues:k,__makeTemplateObject:_,__importStar:A,__importDefault:C,__classPrivateFieldGet:O,__classPrivateFieldSet:N,__classPrivateFieldIn:P,__addDisposableResource:I,__disposeResources:$,__rewriteRelativeImportExtension:B};e.s(["__addDisposableResource",()=>I,"__assign",()=>i,"__asyncDelegator",()=>S,"__asyncGenerator",()=>j,"__asyncValues",()=>k,"__await",()=>x,"__awaiter",()=>d,"__classPrivateFieldGet",()=>O,"__classPrivateFieldIn",()=>P,"__classPrivateFieldSet",()=>N,"__createBinding",()=>f,"__decorate",()=>n,"__disposeResources",()=>$,"__esDecorate",()=>o,"__exportStar",()=>m,"__extends",()=>r,"__generator",()=>p,"__importDefault",()=>C,"__importStar",()=>A,"__makeTemplateObject",()=>_,"__metadata",()=>h,"__param",()=>a,"__propKey",()=>u,"__read",()=>y,"__rest",()=>s,"__rewriteRelativeImportExtension",()=>B,"__runInitializers",()=>l,"__setFunctionName",()=>c,"__spread",()=>v,"__spreadArray",()=>b,"__spreadArrays",()=>w,"__values",()=>g,"default",0,M])},55144,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}},88154,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31354),s=i.__importDefault(e.r(90790)),n=i.__importDefault(e.r(55144));r.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!=(t=e.shouldThrowOnError)&&t,this.signal=e.signal,this.isMaybeSingle=null!=(r=e.isMaybeSingle)&&r,e.fetch?this.fetch=e.fetch:"u"<typeof fetch?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,i,s;let a=null,o=null,l=null,u=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){let r=await e.text();""===r||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null==(t=this.headers.get("Accept"))?void 0:t.includes("application/vnd.pgrst.plan+text"))?r:JSON.parse(r))}let s=null==(r=this.headers.get("Prefer"))?void 0:r.match(/count=(exact|planned|estimated)/),n=null==(i=e.headers.get("content-range"))?void 0:i.split("/");s&&n&&n.length>1&&(l=parseInt(n[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(a={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,u=406,c="Not Acceptable"):o=1===o.length?o[0]:null)}else{let t=await e.text();try{a=JSON.parse(t),Array.isArray(a)&&404===e.status&&(o=[],a=null,u=200,c="OK")}catch(r){404===e.status&&""===t?(u=204,c="No Content"):a={message:t}}if(a&&this.isMaybeSingle&&(null==(s=null==a?void 0:a.details)?void 0:s.includes("0 rows"))&&(a=null,u=200,c="OK"),a&&this.shouldThrowOnError)throw new n.default(a)}return{error:a,data:o,count:l,status:u,statusText:c}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,i;return{error:{message:`${null!=(t=null==e?void 0:e.name)?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!=(r=null==e?void 0:e.stack)?r:""}`,hint:"",code:`${null!=(i=null==e?void 0:e.code)?i:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},66922,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31354).__importDefault(e.r(88154));class s extends i.default{select(e){let t=!1,r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let n=s?`${s}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let s=void 0===i?"offset":`${i}.offset`,n=void 0===i?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:n="text"}={}){var a;let o=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!=(a=this.headers.get("Accept"))?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}r.default=s},74188,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31354).__importDefault(e.r(66922)),s=RegExp("[,()]");class n extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(e=>"string"==typeof e&&s.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";"plain"===i?s="pl":"phrase"===i?s="ph":"websearch"===i&&(s="w");let n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}r.default=n},36989,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31354).__importDefault(e.r(74188));r.default=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=i}select(e,t){let{head:r=!1,count:s}=null!=t?t:{},n=!1,a=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!n?"":('"'===e&&(n=!n),e)).join("");return this.url.searchParams.set("select",a),s&&this.headers.append("Prefer",`count=${s}`),new i.default({method:r?"HEAD":"GET",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:r=!0}={}){var s;if(t&&this.headers.append("Prefer",`count=${t}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(s=this.fetch)?s:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:n=!0}={}){var a;if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer",`count=${s}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){let t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){let e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(a=this.fetch)?a:fetch})}update(e,{count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!=(r=this.fetch)?r:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!=(t=this.fetch)?t:fetch})}}},96098,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});let i=e.r(31354),s=i.__importDefault(e.r(36989)),n=i.__importDefault(e.r(74188));class a{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new s.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){var a;let o,l,u=new URL(`${this.url}/rpc/${e}`);r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{u.searchParams.append(e,t)})):(o="POST",l=t);let c=new Headers(this.headers);return s&&c.set("Prefer",`count=${s}`),new n.default({method:o,url:u,headers:c,schema:this.schemaName,body:l,fetch:null!=(a=this.fetch)?a:fetch})}}r.default=a},65635,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.PostgrestError=r.PostgrestBuilder=r.PostgrestTransformBuilder=r.PostgrestFilterBuilder=r.PostgrestQueryBuilder=r.PostgrestClient=void 0;let i=e.r(31354),s=i.__importDefault(e.r(96098));r.PostgrestClient=s.default;let n=i.__importDefault(e.r(36989));r.PostgrestQueryBuilder=n.default;let a=i.__importDefault(e.r(74188));r.PostgrestFilterBuilder=a.default;let o=i.__importDefault(e.r(66922));r.PostgrestTransformBuilder=o.default;let l=i.__importDefault(e.r(88154));r.PostgrestBuilder=l.default;let u=i.__importDefault(e.r(55144));r.PostgrestError=u.default,r.default={PostgrestClient:s.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:u.default}},12699,(e,t,r)=>{var i={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],i=t[1];return(r+i)*3/4-i},t.toByteArray=function(e){var t,r,n=l(e),a=n[0],o=n[1],u=new s((a+o)*3/4-o),c=0,h=o>0?a-4:a;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===o&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===o&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,i=e.length,s=i%3,n=[],a=0,o=i-s;a<o;a+=16383)n.push(function(e,t,i){for(var s,n=[],a=t;a<i;a+=3)s=(e[a]<<16&0xff0000)+(e[a+1]<<8&65280)+(255&e[a+2]),n.push(r[s>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return n.join("")}(e,a,a+16383>o?o:a+16383));return 1===s?n.push(r[(t=e[i-1])>>2]+r[t<<4&63]+"=="):2===s&&n.push(r[(t=(e[i-2]<<8)+e[i-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),n.join("")};for(var r=[],i=[],s="u">typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,o=n.length;a<o;++a)r[a]=n[a],i[n.charCodeAt(a)]=a;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var i=r===t?0:4-r%4;return[r,i]}i[45]=62,i[95]=63},72:function(e,t,r){"use strict";var i=r(675),s=r(783),n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function a(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var i=e,s=t;if(("string"!=typeof s||""===s)&&(s="utf8"),!o.isEncoding(s))throw TypeError("Unknown encoding: "+s);var n=0|p(i,s),l=a(n),u=l.write(i,s);return u!==n&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(C(e,ArrayBuffer)||e&&C(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(C(e,SharedArrayBuffer)||e&&C(e.buffer,SharedArrayBuffer)))return function(e,t,r){var i;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),o.prototype),i}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return o.from(c,t,r);var f=function(e){if(o.isBuffer(e)){var t=0|d(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(f)return f;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),a(e<0?0:0|d(e))}function h(e){for(var t=e.length<0?0:0|d(e.length),r=a(t),i=0;i<t;i+=1)r[i]=255&e[i];return r}t.Buffer=o,t.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!o.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,r){return(u(e),e<=0)?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)},o.allocUnsafe=function(e){return c(e)},o.allocUnsafeSlow=function(e){return c(e)};function d(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function p(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||C(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return _(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(s)return i?-1:_(e).length;t=(""+t).toLowerCase(),s=!0}}function f(e,t,r){var s,n,a,o=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var s="",n=t;n<r;++n)s+=O[e[n]];return s}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(127&e[s]);return i}(this,t,r);case"latin1":case"binary":return function(e,t,r){var i="";r=Math.min(e.length,r);for(var s=t;s<r;++s)i+=String.fromCharCode(e[s]);return i}(this,t,r);case"base64":return s=this,n=t,a=r,0===n&&a===s.length?i.fromByteArray(s):i.fromByteArray(s.slice(n,a));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var i=e.slice(t,r),s="",n=0;n<i.length;n+=2)s+=String.fromCharCode(i[n]+256*i[n+1]);return s}(this,t,r);default:if(o)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function g(e,t,r,i,s){var n;if(0===e.length)return -1;if("string"==typeof r?(i=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(n=r*=1)!=n&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(s)return -1;else r=e.length-1;else if(r<0)if(!s)return -1;else r=0;if("string"==typeof t&&(t=o.from(t,i)),o.isBuffer(t))return 0===t.length?-1:y(e,t,r,i,s);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(s)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,i,s)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,i,s){var n,a=1,o=e.length,l=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return -1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(s){var c=-1;for(n=r;n<o;n++)if(u(e,n)===u(t,-1===c?0:n-c)){if(-1===c&&(c=n),n-c+1===l)return c*a}else -1!==c&&(n-=n-c),c=-1}else for(r+l>o&&(r=o-l),n=r;n>=0;n--){for(var h=!0,d=0;d<l;d++)if(u(e,n+d)!==u(t,d)){h=!1;break}if(h)return n}return -1}o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(C(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),C(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,s=0,n=Math.min(r,i);s<n;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return r<i?-1:+(i<r)},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,i=o.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var n=e[r];if(C(n,Uint8Array)&&(n=o.from(n)),!o.isBuffer(n))throw TypeError('"list" argument must be an Array of Buffers');n.copy(i,s),s+=n.length}return i},o.byteLength=p,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):f.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,r,i,s){if(C(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),t<0||r>e.length||i<0||s>this.length)throw RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,s>>>=0,this===e)return 0;for(var n=s-i,a=r-t,l=Math.min(n,a),u=this.slice(i,s),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){n=u[h],a=c[h];break}return n<a?-1:+(a<n)},o.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var i=[],s=t;s<r;){var n,a,o,l,u=e[s],c=null,h=u>239?4:u>223?3:u>191?2:1;if(s+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(n=e[s+1]))==128&&(l=(31&u)<<6|63&n)>127&&(c=l);break;case 3:n=e[s+1],a=e[s+2],(192&n)==128&&(192&a)==128&&(l=(15&u)<<12|(63&n)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:n=e[s+1],a=e[s+2],o=e[s+3],(192&n)==128&&(192&a)==128&&(192&o)==128&&(l=(15&u)<<18|(63&n)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),s+=h}var d=i,p=d.length;if(p<=4096)return String.fromCharCode.apply(String,d);for(var f="",m=0;m<p;)f+=String.fromCharCode.apply(String,d.slice(m,m+=4096));return f}function w(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function b(e,t,r,i,s,n){if(!o.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<n)throw RangeError('"value" argument is out of bounds');if(r+i>e.length)throw RangeError("Index out of range")}function x(e,t,r,i,s,n){if(r+i>e.length||r<0)throw RangeError("Index out of range")}function j(e,t,r,i,n){return t*=1,r>>>=0,n||x(e,t,r,4,34028234663852886e22,-34028234663852886e22),s.write(e,t,r,i,23,4),r+4}function S(e,t,r,i,n){return t*=1,r>>>=0,n||x(e,t,r,8,17976931348623157e292,-17976931348623157e292),s.write(e,t,r,i,52,8),r+8}o.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var s,n,a,o,l,u,c,h,d=this.length-t;if((void 0===r||r>d)&&(r=d),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var p=!1;;)switch(i){case"hex":return function(e,t,r,i){r=Number(r)||0;var s=e.length-r;i?(i=Number(i))>s&&(i=s):i=s;var n=t.length;i>n/2&&(i=n/2);for(var a=0;a<i;++a){var o,l=parseInt(t.substr(2*a,2),16);if((o=l)!=o)break;e[r+a]=l}return a}(this,e,t,r);case"utf8":case"utf-8":return s=t,n=r,A(_(e,this.length-s),this,s,n);case"ascii":return a=t,o=r,A(E(e),this,a,o);case"latin1":case"binary":return function(e,t,r,i){return A(E(t),e,r,i)}(this,e,t,r);case"base64":return l=t,u=r,A(T(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=r,A(function(e,t){for(var r,i,s=[],n=0;n<e.length&&!((t-=2)<0);++n)i=(r=e.charCodeAt(n))>>8,s.push(r%256),s.push(i);return s}(e,this.length-c),this,c,h);default:if(p)throw TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),p=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},o.prototype.readUInt8=function(e,t){return e>>>=0,t||w(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||w(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=this[e],s=1,n=0;++n<t&&(s*=256);)i+=this[e+n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||w(e,t,this.length);for(var i=t,s=1,n=this[e+--i];i>0&&(s*=256);)n+=this[e+--i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},o.prototype.readInt8=function(e,t){return(e>>>=0,t||w(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||w(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||w(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||w(e,4,this.length),s.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||w(e,4,this.length),s.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||w(e,8,this.length),s.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||w(e,8,this.length),s.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;b(this,e,t,r,s,0)}var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,i){if(e*=1,t>>>=0,r>>>=0,!i){var s=Math.pow(2,8*r)-1;b(this,e,t,r,s,0)}var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);b(this,e,t,r,s-1,-s)}var n=0,a=1,o=0;for(this[t]=255&e;++n<r&&(a*=256);)e<0&&0===o&&0!==this[t+n-1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeIntBE=function(e,t,r,i){if(e*=1,t>>>=0,!i){var s=Math.pow(2,8*r-1);b(this,e,t,r,s-1,-s)}var n=r-1,a=1,o=0;for(this[t+n]=255&e;--n>=0&&(a*=256);)e<0&&0===o&&0!==this[t+n+1]&&(o=1),this[t+n]=(e/a|0)-o&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||b(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,i){if(!o.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(i<0)throw RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&r<t&&t<i)for(var n=s-1;n>=0;--n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},o.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw TypeError("Unknown encoding: "+i);if(1===e.length){var s,n=e.charCodeAt(0);("utf8"===i&&n<128||"latin1"===i)&&(e=n)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=o.isBuffer(e)?e:o.from(e,i),l=a.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%l]}return this};var k=/[^+/0-9A-Za-z-_]/g;function _(e,t){t=t||1/0;for(var r,i=e.length,s=null,n=[],a=0;a<i;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!s){if(r>56319||a+1===i){(t-=3)>-1&&n.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&n.push(239,191,189),s=r;continue}r=(s-55296<<10|r-56320)+65536}else s&&(t-=3)>-1&&n.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;n.push(r)}else if(r<2048){if((t-=2)<0)break;n.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;n.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;n.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return n}function E(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function T(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(k,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,r,i){for(var s=0;s<i&&!(s+r>=t.length)&&!(s>=e.length);++s)t[s+r]=e[s];return s}function C(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var O=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var i=16*r,s=0;s<16;++s)t[i+s]=e[r]+e[s];return t}()},783:function(e,t){t.read=function(e,t,r,i,s){var n,a,o=8*s-i-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?s-1:0,d=r?-1:1,p=e[t+h];for(h+=d,n=p&(1<<-c)-1,p>>=-c,c+=o;c>0;n=256*n+e[t+h],h+=d,c-=8);for(a=n&(1<<-c)-1,n>>=-c,c+=i;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===n)n=1-u;else{if(n===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),n-=u}return(p?-1:1)*a*Math.pow(2,n-i)},t.write=function(e,t,r,i,s,n){var a,o,l,u=8*n-s-1,c=(1<<u)-1,h=c>>1,d=5960464477539062e-23*(23===s),p=i?0:n-1,f=i?1:-1,m=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(o=+!!isNaN(t),a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),a+h>=1?t+=d/l:t+=d*Math.pow(2,1-h),t*l>=2&&(a++,l/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(t*l-1)*Math.pow(2,s),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,s),a=0));s>=8;e[r+p]=255&o,p+=f,o/=256,s-=8);for(a=a<<s|o,u+=s;u>0;e[r+p]=255&a,p+=f,a/=256,u-=8);e[r+p-f]|=128*m}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var r=s[e]={exports:{}},a=!0;try{i[e](r,r.exports,n),a=!1}finally{a&&delete s[e]}return r.exports}n.ab="/ROOT/libs/real-time-fund/node_modules/next/dist/compiled/buffer/",t.exports=n(72)},60392,e=>{"use strict";let t,r;var i,s,n,a,o,l,u,c,h,d,p,f,m,g,y,v,w,b,x,j,S,k,_,E,T,A=e.i(98136),C=e.i(60419);let O=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],N=new Set(O),P=(e,t,r)=>r>t?t:r<e?e:r,I={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},R={...I,transform:e=>P(0,1,e)},$={...I,default:1},B=e=>Math.round(1e5*e)/1e5,M=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,D=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,L=(e,t)=>r=>!!("string"==typeof r&&D.test(r)&&r.startsWith(e)||t&&null!=r&&Object.prototype.hasOwnProperty.call(r,t)),z=(e,t,r)=>i=>{if("string"!=typeof i)return i;let[s,n,a,o]=i.match(M);return{[e]:parseFloat(s),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},U={...I,transform:e=>Math.round(P(0,255,e))},V={test:L("rgb","red"),parse:z("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:i=1})=>"rgba("+U.transform(e)+", "+U.transform(t)+", "+U.transform(r)+", "+B(R.transform(i))+")"},F={test:L("#"),parse:function(e){let t="",r="",i="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),i=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),i=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,i+=i,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(i,16),alpha:s?parseInt(s,16)/255:1}},transform:V.transform},W=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),q=W("deg"),H=W("%"),K=W("px"),J=W("vh"),G=W("vw"),Y={...H,parse:e=>H.parse(e)/100,transform:e=>H.transform(100*e)},X={test:L("hsl","hue"),parse:z("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:i=1})=>"hsla("+Math.round(e)+", "+H.transform(B(t))+", "+H.transform(B(r))+", "+B(R.transform(i))+")"},Q={test:e=>V.test(e)||F.test(e)||X.test(e),parse:e=>V.test(e)?V.parse(e):X.test(e)?X.parse(e):F.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?V.transform(e):X.transform(e),getAnimatableNone:e=>{let t=Q.parse(e);return t.alpha=0,Q.transform(t)}},Z=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,ee="number",et="color",er=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ei(e){let t=e.toString(),r=[],i={color:[],number:[],var:[]},s=[],n=0,a=t.replace(er,e=>(Q.test(e)?(i.color.push(n),s.push(et),r.push(Q.parse(e))):e.startsWith("var(")?(i.var.push(n),s.push("var"),r.push(e)):(i.number.push(n),s.push(ee),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:i,types:s}}function es(e){return ei(e).values}function en(e){let{split:t,types:r}=ei(e),i=t.length;return e=>{let s="";for(let n=0;n<i;n++)if(s+=t[n],void 0!==e[n]){let t=r[n];t===ee?s+=B(e[n]):t===et?s+=Q.transform(e[n]):s+=e[n]}return s}}let ea=e=>"number"==typeof e?0:Q.test(e)?Q.getAnimatableNone(e):e,eo={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(M)?.length||0)+(e.match(Z)?.length||0)>0},parse:es,createTransformer:en,getAnimatableNone:function(e){let t=es(e);return en(e)(t.map(ea))}},el=new Set(["brightness","contrast","saturate","opacity"]);function eu(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[i]=r.match(M)||[];if(!i)return e;let s=r.replace(i,""),n=+!!el.has(t);return i!==r&&(n*=100),t+"("+n+s+")"}let ec=/\b([a-z-]*)\(.*?\)/gu,eh={...eo,getAnimatableNone:e=>{let t=e.match(ec);return t?t.map(eu).join(" "):e}},ed={...I,transform:Math.round},ep={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,inset:K,insetBlock:K,insetBlockStart:K,insetBlockEnd:K,insetInline:K,insetInlineStart:K,insetInlineEnd:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,paddingBlock:K,paddingBlockStart:K,paddingBlockEnd:K,paddingInline:K,paddingInlineStart:K,paddingInlineEnd:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,marginBlock:K,marginBlockStart:K,marginBlockEnd:K,marginInline:K,marginInlineStart:K,marginInlineEnd:K,fontSize:K,backgroundPositionX:K,backgroundPositionY:K,rotate:q,rotateX:q,rotateY:q,rotateZ:q,scale:$,scaleX:$,scaleY:$,scaleZ:$,skew:q,skewX:q,skewY:q,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:R,originX:Y,originY:Y,originZ:K,zIndex:ed,fillOpacity:R,strokeOpacity:R,numOctaves:ed},ef={...ep,color:Q,backgroundColor:Q,outlineColor:Q,fill:Q,stroke:Q,borderColor:Q,borderTopColor:Q,borderRightColor:Q,borderBottomColor:Q,borderLeftColor:Q,filter:eh,WebkitFilter:eh},em=e=>ef[e],eg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ey=()=>({x:eg(),y:eg()}),ev=()=>({min:0,max:0}),ew=()=>({x:ev(),y:ev()}),eb=e=>!!(e&&e.getVelocity),ex=new Set(["width","height","top","left","right","bottom",...O]),ej=e=>t=>t.test(e),eS=[I,K,H,q,G,J,{test:e=>"auto"===e,parse:e=>e}],ek=e=>eS.find(ej(e));var e_=e.i(69442);let eE=()=>{},eT=()=>{};e_.default;let eA=e=>t=>"string"==typeof t&&t.startsWith(e),eC=eA("--"),eO=eA("var(--"),eN=e=>!!eO(e)&&eP.test(e.split("/*")[0].trim()),eP=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function eI(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let eR=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,e$=e=>180*e/Math.PI,eB=e=>eD(e$(Math.atan2(e[1],e[0]))),eM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:eB,rotateZ:eB,skewX:e=>e$(Math.atan(e[1])),skewY:e=>e$(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},eD=e=>((e%=360)<0&&(e+=360),e),eL=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ez=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),eU={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:eL,scaleY:ez,scale:e=>(eL(e)+ez(e))/2,rotateX:e=>eD(e$(Math.atan2(e[6],e[5]))),rotateY:e=>eD(e$(Math.atan2(-e[2],e[0]))),rotateZ:eB,rotate:eB,skewX:e=>e$(Math.atan(e[4])),skewY:e=>e$(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function eV(e){return+!!e.includes("scale")}function eF(e,t){let r,i;if(!e||"none"===e)return eV(t);let s=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(s)r=eU,i=s;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=eM,i=t}if(!i)return eV(t);let n=r[t],a=i[1].split(",").map(eW);return"function"==typeof n?n(a):a[n]}function eW(e){return parseFloat(e.trim())}let eq=e=>e===I||e===K,eH=new Set(["x","y","z"]),eK=O.filter(e=>!eH.has(e)),eJ={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>eF(t,"x"),y:(e,{transform:t})=>eF(t,"y")};eJ.translateX=eJ.x,eJ.translateY=eJ.y;let eG=e=>e,eY={},eX=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function eQ(e,t){let r=!1,i=!0,s={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=eX.reduce((e,r)=>(e[r]=function(e,t){let r=new Set,i=new Set,s=!1,n=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(t){a.has(t)&&(c.schedule(t),e()),l++,t(o)}let c={schedule:(e,t=!1,n=!1)=>{let o=n&&s?r:i;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{i.delete(e),a.delete(e)},process:e=>{if(o=e,s){n=!0;return}s=!0,[r,i]=[i,r],r.forEach(u),t,l=0,r.clear(),s=!1,n&&(n=!1,c.process(e))}};return c}(n,t?r:void 0),e),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:c,update:h,preRender:d,render:p,postRender:f}=a,m=()=>{let n=eY.useManualTiming?s.timestamp:performance.now();r=!1,eY.useManualTiming||(s.delta=i?1e3/60:Math.max(Math.min(n-s.timestamp,40),1)),s.timestamp=n,s.isProcessing=!0,o.process(s),l.process(s),u.process(s),c.process(s),h.process(s),d.process(s),p.process(s),f.process(s),s.isProcessing=!1,r&&t&&(i=!1,e(m))};return{schedule:eX.reduce((t,n)=>{let o=a[n];return t[n]=(t,n=!1,a=!1)=>(!r&&(r=!0,i=!0,s.isProcessing||e(m)),o.schedule(t,n,a)),t},{}),cancel:e=>{for(let t=0;t<eX.length;t++)a[eX[t]].cancel(e)},state:s,steps:a}}let{schedule:eZ,cancel:e0,state:e1,steps:e2}=eQ("u">typeof requestAnimationFrame?requestAnimationFrame:eG,!0),e5=new Set,e3=!1,e4=!1,e6=!1;function e8(){if(e4){let e=Array.from(e5).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{let t,i=(t=[],eK.forEach(r=>{let i=e.getValue(r);void 0!==i&&(t.push([r,i.get()]),i.set(+!!r.startsWith("scale")))}),t);i.length&&(r.set(e,i),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}e4=!1,e3=!1,e5.forEach(e=>e.complete(e6)),e5.clear()}function e7(){e5.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(e4=!0)})}class e9{constructor(e,t,r,i,s,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=i,this.element=s,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(e5.add(this),e3||(e3=!0,eZ.read(e7),eZ.resolveKeyframes(e8))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:r,motionValue:i}=this;if(null===e[0]){let s=i?.get(),n=e[e.length-1];if(void 0!==s)e[0]=s;else if(r&&t){let i=r.readValue(t,n);null!=i&&(e[0]=i)}void 0===e[0]&&(e[0]=n),i&&void 0===s&&i.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),e5.delete(this)}cancel(){"scheduled"===this.state&&(e5.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function te(e,t){let r=em(e);return r!==eh&&(r=eo),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let tt=new Set(["auto","none","0"]);class tr extends e9{constructor(e,t,r,i,s){super(e,t,r,i,s,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let r=0;r<e.length;r++){let i=e[r];if("string"==typeof i&&eN(i=i.trim())){let s=function e(t,r,i=1){eT(i<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[s,n]=function(e){let t=eR.exec(e);if(!t)return[,];let[,r,i,s]=t;return[`--${r??i}`,s]}(t);if(!s)return;let a=window.getComputedStyle(r).getPropertyValue(s);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return eN(n)?e(n,r,i+1):n}(i,t.current);void 0!==s&&(e[r]=s),r===e.length-1&&(this.finalKeyframe=i)}}if(this.resolveNoneKeyframes(),!ex.has(r)||2!==e.length)return;let[i,s]=e,n=ek(i),a=ek(s);if(eI(i)!==eI(s)&&eJ[r]){this.needsMeasurement=!0;return}if(n!==a)if(eq(n)&&eq(a))for(let t=0;t<e.length;t++){let r=e[t];"string"==typeof r&&(e[t]=parseFloat(r))}else eJ[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,r=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&r.push(t);r.length&&function(e,t,r){let i,s=0;for(;s<e.length&&!i;){let t=e[s];"string"==typeof t&&!tt.has(t)&&ei(t).values.length&&(i=e[s]),s++}if(i&&r)for(let s of t)e[s]=te(r,i)}(e,r,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=eJ[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let i=t[t.length-1];void 0!==i&&e.getValue(r,i).jump(i,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;let i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);let s=r.length-1,n=r[s];r[s]=eJ[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==n&&void 0===this.finalKeyframe&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}function ti(e,t){-1===e.indexOf(t)&&e.push(t)}function ts(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class tn{constructor(){this.subscriptions=[]}add(e){return ti(this.subscriptions,e),()=>ts(this.subscriptions,e)}notify(e,t,r){let i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,r);else for(let s=0;s<i;s++){let i=this.subscriptions[s];i&&i(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:ta}=eQ(queueMicrotask,!1);function to(){t=void 0}let tl={now:()=>(void 0===t&&tl.set(e1.isProcessing||eY.useManualTiming?e1.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(to)}},tu={current:void 0};class tc{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=tl.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=tl.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new tn);let r=this.events[e].add(t);return"change"===e?()=>{r(),eZ.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return tu.current&&tu.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=tl.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let r=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),r?1e3/r*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function th(e,t){return new tc(e,t)}let td=[...eS,Q,eo],tp={current:null},tf={current:!1},tm="u">typeof window,tg=new WeakMap;function ty(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function tv(e){return"string"==typeof e||Array.isArray(e)}let tw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tb=["initial",...tw];function tx(e){return ty(e.animate)||tb.some(t=>tv(e[t]))}function tj(e){return!!(tx(e)||e.variants)}function tS(e){let t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function tk(e,t,r,i){if("function"==typeof t){let[s,n]=tS(i);t=t(void 0!==r?r:e.custom,s,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[s,n]=tS(i);t=t(void 0!==r?r:e.custom,s,n)}return t}let t_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tE={};class tT{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=e9,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=tl.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,eZ.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=tx(t),this.isVariantNode=tj(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...c}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in c){const t=c[e];void 0!==o[e]&&eb(t)&&t.set(o[e])}}mount(e){this.current=e,tg.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(tf.current||function(){if(tf.current=!0,tm)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>tp.current=e.matches;e.addEventListener("change",t),t()}else tp.current=!1}(),this.shouldReduceMotion=tp.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),e0(this.notifyUpdate),e0(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let r;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let i=N.has(e);i&&this.onBindTransform&&this.onBindTransform();let s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&eZ.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(r=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),r&&r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in tE){let t=tE[e];if(!t)continue;let{isEnabled:r,Feature:i}=t;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ew()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<t_.length;t++){let r=t_[t];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);let i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,r){for(let i in t){let s=t[i],n=r[i];if(eb(s))e.addValue(i,s);else if(eb(n))e.addValue(i,th(s,{owner:e}));else if(n!==s)if(e.hasValue(i)){let t=e.getValue(i);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{let t=e.getStaticValue(i);e.addValue(i,th(void 0!==t?t:s,{owner:e}))}}for(let i in r)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=th(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=r){let i,s;if("string"==typeof r&&(i=r,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i)||(s=r,/^0[^.\s]+$/u.test(s))))r=parseFloat(r);else{let i;i=r,!td.find(ej(i))&&eo.test(t)&&(r=te(e,t))}this.setBaseTarget(e,eb(r)?r.get():r)}return eb(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:r}=this.props;if("string"==typeof r||"object"==typeof r){let i=tk(this.props,r,this.presenceContext?.custom);i&&(t=i[e])}if(r&&void 0!==t)return t;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||eb(i)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new tn),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){ta.render(this.render)}}class tA extends tT{constructor(){super(...arguments),this.KeyframeResolver=tr}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let r=e.style;return r?r[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;eb(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function tC(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let tO=(e,t)=>t&&"number"==typeof e?t.transform(e):e,tN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},tP=O.length;function tI(e,t,r){let{style:i,vars:s,transformOrigin:n}=e,a=!1,o=!1;for(let e in t){let r=t[e];if(N.has(e)){a=!0;continue}if(eC(e)){s[e]=r;continue}{let t=tO(r,ep[e]);e.startsWith("origin")?(o=!0,n[e]=t):i[e]=t}}if(!t.transform&&(a||r?i.transform=function(e,t,r){let i="",s=!0;for(let n=0;n<tP;n++){let a=O[n],o=e[a];if(void 0===o)continue;let l=!0;if("number"==typeof o)l=o===+!!a.startsWith("scale");else{let e=parseFloat(o);l=a.startsWith("scale")?1===e:0===e}if(!l||r){let e=tO(o,ep[a]);if(!l){s=!1;let t=tN[a]||a;i+=`${t}(${e}) `}r&&(t[a]=e)}}return i=i.trim(),r?i=r(t,s?"":i):s&&(i="none"),i}(t,e.transform,r):i.transform&&(i.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:r=0}=n;i.transformOrigin=`${e} ${t} ${r}`}}let tR={offset:"stroke-dashoffset",array:"stroke-dasharray"},t$={offset:"strokeDashoffset",array:"strokeDasharray"},tB=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function tM(e,{attrX:t,attrY:r,attrScale:i,pathLength:s,pathSpacing:n=1,pathOffset:a=0,...o},l,u,c){if(tI(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:d}=e;for(let e of(h.transform&&(d.transform=h.transform,delete h.transform),(d.transform||h.transformOrigin)&&(d.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),d.transform&&(d.transformBox=c?.transformBox??"fill-box",delete h.transformBox),tB))void 0!==h[e]&&(d[e]=h[e],delete h[e]);void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==i&&(h.scale=i),void 0!==s&&function(e,t,r=1,i=0,s=!0){e.pathLength=1;let n=s?tR:t$;e[n.offset]=`${-i}`,e[n.array]=`${t} ${r}`}(h,s,n,a,!1)}let tD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),tL=e=>"string"==typeof e&&"svg"===e.toLowerCase();function tz(e,{style:t,vars:r},i,s){let n,a=e.style;for(n in t)a[n]=t[n];for(n in s?.applyProjectionStyles(a,i),r)a.setProperty(n,r[n])}function tU(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let tV={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!K.test(e))return e;else e=parseFloat(e);let r=tU(e,t.target.x),i=tU(e,t.target.y);return`${r}% ${i}%`}},tF=(e,t,r)=>e+(t-e)*r,tW={borderRadius:{...tV,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:tV,borderTopRightRadius:tV,borderBottomLeftRadius:tV,borderBottomRightRadius:tV,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let i=eo.parse(e);if(i.length>5)return e;let s=eo.createTransformer(e),n=+("number"!=typeof i[0]),a=r.x.scale*t.x,o=r.y.scale*t.y;i[0+n]/=a,i[1+n]/=o;let l=tF(a,o,.5);return"number"==typeof i[2+n]&&(i[2+n]/=l),"number"==typeof i[3+n]&&(i[3+n]/=l),s(i)}}};function tq(e,{layout:t,layoutId:r}){return N.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!tW[e]||"opacity"===e)}function tH(e,t,r){let i=e.style,s=t?.style,n={};if(!i)return n;for(let t in i)(eb(i[t])||s&&eb(s[t])||tq(t,e)||r?.getValue(t)?.liveStyle!==void 0)&&(n[t]=i[t]);return n}function tK(e,t,r){let i=tH(e,t,r);for(let r in e)(eb(e[r])||eb(t[r]))&&(i[-1!==O.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]);return i}class tJ extends tA{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ew}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(N.has(t)){let e=em(t);return e&&e.default||0}return t=tD.has(t)?t:tC(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return tK(e,t,r)}build(e,t,r){tM(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,i){for(let r in tz(e,t,void 0,i),t.attrs)e.setAttribute(tD.has(r)?r:tC(r),t.attrs[r])}mount(e){this.isSVGTag=tL(e.tagName),super.mount(e)}}function tG({top:e,left:t,right:r,bottom:i}){return{x:{min:t,max:r},y:{min:e,max:i}}}function tY(e){return void 0===e||1===e}function tX({scale:e,scaleX:t,scaleY:r}){return!tY(e)||!tY(t)||!tY(r)}function tQ(e){return tX(e)||tZ(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function tZ(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function t0(e,t,r,i,s){return void 0!==s&&(e=i+s*(e-i)),i+r*(e-i)+t}function t1(e,t=0,r=1,i,s){e.min=t0(e.min,t,r,i,s),e.max=t0(e.max,t,r,i,s)}function t2(e,{x:t,y:r}){t1(e.x,t.translate,t.scale,t.originPoint),t1(e.y,r.translate,r.scale,r.originPoint)}function t5(e,t){e.min=e.min+t,e.max=e.max+t}function t3(e,t,r,i,s=.5){let n=tF(e.min,e.max,s);t1(e,t,r,n,i)}function t4(e,t){t3(e.x,t.x,t.scaleX,t.scale,t.originX),t3(e.y,t.y,t.scaleY,t.scale,t.originY)}function t6(e,t){return tG(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}class t8 extends tA{constructor(){super(...arguments),this.type="html",this.renderInstance=tz}readValueFromInstance(e,t){if(N.has(t))return this.projection?.isProjecting?eV(t):((e,t)=>{let{transform:r="none"}=getComputedStyle(e);return eF(r,t)})(e,t);{let r=window.getComputedStyle(e),i=(eC(t)?r.getPropertyValue(t):r[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return t6(e,t)}build(e,t,r){tI(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return tH(e,t,r)}}let t7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function t9(e){if("string"!=typeof e||e.includes("-"));else if(t7.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let re=(0,C.createContext)({}),rt=(0,C.createContext)({strict:!1}),rr=(0,C.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ri=(0,C.createContext)({});function rs(e){return Array.isArray(e)?e.join(" "):e}let rn=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ra(e,t,r){for(let i in t)eb(t[i])||tq(i,r)||(e[i]=t[i])}let ro=()=>({...rn(),attrs:{}}),rl=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ru(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rl.has(e)}let rc=e=>!ru(e);try{i=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof i&&(rc=e=>e.startsWith("on")?!ru(e):i(e))}catch{}function rh(e){return eb(e)?e.get():e}let rd=(0,C.createContext)(null);function rp(e){let t=(0,C.useRef)(null);return null===t.current&&(t.current=e()),t.current}let rf=e=>(t,r)=>{let i=(0,C.useContext)(ri),s=(0,C.useContext)(rd),n=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},r,i,s){return{latestValues:function(e,t,r,i){let s={},n=i(e,{});for(let e in n)s[e]=rh(n[e]);let{initial:a,animate:o}=e,l=tx(e),u=tj(e);t&&u&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let c=!!r&&!1===r.initial,h=(c=c||!1===a)?o:a;if(h&&"boolean"!=typeof h&&!ty(h)){let t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){let i=tk(e,t[r]);if(i){let{transitionEnd:e,transition:t,...r}=i;for(let e in r){let t=r[e];if(Array.isArray(t)){let e=c?t.length-1:0;t=t[e]}null!==t&&(s[e]=t)}for(let t in e)s[t]=e[t]}}}return s}(r,i,s,e),renderState:t()}})(e,t,i,s);return r?n():rp(n)},rm=rf({scrapeMotionValuesFromProps:tH,createRenderState:rn}),rg=rf({scrapeMotionValuesFromProps:tK,createRenderState:ro}),ry="u">typeof window,rv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rw=!1;function rb(){return!function(){if(rw)return;let e={};for(let t in rv)e[t]={isEnabled:e=>rv[t].some(t=>!!e[t])};tE=e,rw=!0}(),tE}let rx=Symbol.for("motionComponentSymbol"),rj="data-"+tC("framerAppearId"),rS=(0,C.createContext)({});function rk(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let r_=ry?C.useLayoutEffect:C.useEffect;function rE(e,{forwardMotionProps:t=!1,type:r}={},i,s){i&&function(e){let t=rb();for(let r in e)t[r]={...t[r],...e[r]};tE=t}(i);let n=r?"svg"===r:t9(e),a=n?rg:rm;function o(r,i){var o;let l,u,c,h={...(0,C.useContext)(rr),...r,layoutId:function({layoutId:e}){let t=(0,C.useContext)(re).id;return t&&void 0!==e?t+"-"+e:e}(r)},{isStatic:d}=h,p=function(e){let{initial:t,animate:r}=function(e,t){if(tx(e)){let{initial:t,animate:r}=e;return{initial:!1===t||tv(t)?t:void 0,animate:tv(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,C.useContext)(ri));return(0,C.useMemo)(()=>({initial:t,animate:r}),[rs(t),rs(r)])}(r),f=a(r,d);if(!d&&ry){(0,C.useContext)(rt).strict;let t=function(e){let{drag:t,layout:r}=rb();if(!t&&!r)return{};let i={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(h);l=t.MeasureLayout,p.visualElement=function(e,t,r,i,s,n){let{visualElement:a}=(0,C.useContext)(ri),o=(0,C.useContext)(rt),l=(0,C.useContext)(rd),u=(0,C.useContext)(rr).reducedMotion,c=(0,C.useRef)(null),h=(0,C.useRef)(!1);i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:t,parent:a,props:r,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:u,isSVG:n}),h.current&&c.current&&(c.current.manuallyAnimateOnMount=!0));let d=c.current,p=(0,C.useContext)(rS);d&&!d.projection&&s&&("html"===d.type||"svg"===d.type)&&function(e,t,r,i){let{layoutId:s,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:s,layout:n,alwaysMeasureLayout:!!a||o&&rk(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:i,crossfade:c,layoutScroll:l,layoutRoot:u})}(c.current,r,s,p);let f=(0,C.useRef)(!1);(0,C.useInsertionEffect)(()=>{d&&f.current&&d.update(r,l)});let m=r[rj],g=(0,C.useRef)(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return r_(()=>{h.current=!0,d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),(0,C.useEffect)(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),g.current=!1),d.enteringChildren=void 0)}),d}(e,f,h,s,t.ProjectionNode,n)}return(0,A.jsxs)(ri.Provider,{value:p,children:[l&&p.visualElement?(0,A.jsx)(l,{visualElement:p.visualElement,...h}):null,function(e,t,r,{latestValues:i},s,n=!1,a){let o=(a??t9(e)?function(e,t,r,i){let s=(0,C.useMemo)(()=>{let r=ro();return tM(r,t,tL(i),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let t={};ra(t,e.style,e),s.style={...t,...s.style}}return s}:function(e,t){let r,i,s={},n=(r=e.style||{},ra(i={},r,e),Object.assign(i,function({transformTemplate:e},t){return(0,C.useMemo)(()=>{let r=rn();return tI(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),i);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=n,s})(t,i,s,e),l=function(e,t,r){let i={};for(let s in e)("values"!==s||"object"!=typeof e.values)&&(rc(s)||!0===r&&ru(s)||!t&&!ru(s)||e.draggable&&s.startsWith("onDrag"))&&(i[s]=e[s]);return i}(t,"string"==typeof e,n),u=e!==C.Fragment?{...l,...o,ref:r}:{},{children:c}=t,h=(0,C.useMemo)(()=>eb(c)?c.get():c,[c]);return(0,C.createElement)(e,{...u,children:h})}(e,r,(o=p.visualElement,u=(0,C.useRef)(i),(0,C.useInsertionEffect)(()=>{u.current=i}),c=(0,C.useRef)(null),(0,C.useCallback)(e=>{e&&f.onMount?.(e),o&&(e?o.mount(e):o.unmount());let t=u.current;if("function"==typeof t)if(e){let r=t(e);"function"==typeof r&&(c.current=r)}else c.current?(c.current(),c.current=null):t(e);else t&&(t.current=e)},[o])),f,d,t,n)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,C.forwardRef)(o);return l[rx]=e,l}class rT{constructor(e){this.isMounted=!1,this.node=e}update(){}}function rA(e,t,r){let i=e.getProps();return tk(i,t,void 0!==r?r:i.custom,e)}function rC(e,t){return e?.[t]??e?.default??e}let rO=e=>Array.isArray(e);function rN(e,t){let r=e.getValue("willChange");if(eb(r)&&r.add)return r.add(t);if(!r&&eY.WillChange){let r=new eY.WillChange("auto");e.addValue("willChange",r),r.add(t)}}let rP=e=>1e3*e,rI=(e,t)=>r=>t(e(r)),rR=(...e)=>e.reduce(rI),r$={layout:0,mainThread:0,waapi:0};function rB(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function rM(e,t){return r=>r>0?t:e}let rD=(e,t,r)=>{let i=e*e,s=r*(t*t-i)+i;return s<0?0:Math.sqrt(s)},rL=[F,V,X];function rz(e){let t=rL.find(t=>t.test(e));if(eE(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let r=t.parse(e);return t===X&&(r=function({hue:e,saturation:t,lightness:r,alpha:i}){e/=360,r/=100;let s=0,n=0,a=0;if(t/=100){let i=r<.5?r*(1+t):r+t-r*t,o=2*r-i;s=rB(o,i,e+1/3),n=rB(o,i,e),a=rB(o,i,e-1/3)}else s=n=a=r;return{red:Math.round(255*s),green:Math.round(255*n),blue:Math.round(255*a),alpha:i}}(r)),r}let rU=(e,t)=>{let r=rz(e),i=rz(t);if(!r||!i)return rM(e,t);let s={...r};return e=>(s.red=rD(r.red,i.red,e),s.green=rD(r.green,i.green,e),s.blue=rD(r.blue,i.blue,e),s.alpha=tF(r.alpha,i.alpha,e),V.transform(s))},rV=new Set(["none","hidden"]);function rF(e,t){return r=>tF(e,t,r)}function rW(e){return"number"==typeof e?rF:"string"==typeof e?eN(e)?rM:Q.test(e)?rU:rK:Array.isArray(e)?rq:"object"==typeof e?Q.test(e)?rU:rH:rM}function rq(e,t){let r=[...e],i=r.length,s=e.map((e,r)=>rW(e)(e,t[r]));return e=>{for(let t=0;t<i;t++)r[t]=s[t](e);return r}}function rH(e,t){let r={...e,...t},i={};for(let s in r)void 0!==e[s]&&void 0!==t[s]&&(i[s]=rW(e[s])(e[s],t[s]));return e=>{for(let t in i)r[t]=i[t](e);return r}}let rK=(e,t)=>{let r=eo.createTransformer(t),i=ei(e),s=ei(t);if(!(i.indexes.var.length===s.indexes.var.length&&i.indexes.color.length===s.indexes.color.length&&i.indexes.number.length>=s.indexes.number.length))return eE(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),rM(e,t);if(rV.has(e)&&!s.values.length||rV.has(t)&&!i.values.length)return rV.has(e)?r=>r<=0?e:t:r=>r>=1?t:e;return rR(rq(function(e,t){let r=[],i={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){let n=t.types[s],a=e.indexes[n][i[n]],o=e.values[a]??0;r[s]=o,i[n]++}return r}(i,s),s.values),r)};function rJ(e,t,r){return"number"==typeof e&&"number"==typeof t&&"number"==typeof r?tF(e,t,r):rW(e)(e,t)}let rG=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>eZ.update(t,e),stop:()=>e0(t),now:()=>e1.isProcessing?e1.timestamp:tl.now()}},rY=(e,t,r=10)=>{let i="",s=Math.max(Math.round(t/r),2);for(let t=0;t<s;t++)i+=Math.round(1e4*e(t/(s-1)))/1e4+", ";return`linear(${i.substring(0,i.length-2)})`};function rX(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}function rQ(e,t,r){var i,s;let n=Math.max(t-5,0);return i=r-e(n),(s=t-n)?1e3/s*i:0}let rZ=.01,r0=2,r1=.005,r2=.5;function r5(e,t){return e*Math.sqrt(1-t*t)}let r3=["duration","bounce"],r4=["stiffness","damping","mass"];function r6(e,t){return t.some(t=>void 0!==e[t])}function r8(e=.3,t=.3){let r,i="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:s,restDelta:n}=i,a=i.keyframes[0],o=i.keyframes[i.keyframes.length-1],l={done:!1,value:a},{stiffness:u,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!r6(e,r4)&&r6(e,r3))if(e.visualDuration){let r=2*Math.PI/(1.2*e.visualDuration),i=r*r,s=2*P(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:1,stiffness:i,damping:s}}else{let r=function({duration:e=800,bounce:t=.3,velocity:r=0,mass:i=1}){let s,n;eE(e<=rP(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=P(.05,1,a),e=P(.01,10,e/1e3),a<1?(s=t=>{let i=t*a,s=i*e;return .001-(i-r)/r5(t,a)*Math.exp(-s)},n=t=>{let i=t*a*e,n=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-i),l=r5(Math.pow(t,2),a);return(i*r+r-n)*o*(-s(t)+.001>0?-1:1)/l}):(s=t=>-.001+Math.exp(-t*e)*((t-r)*e+1),n=t=>e*e*(r-t)*Math.exp(-t*e));let o=function(e,t,r){let i=r;for(let r=1;r<12;r++)i-=e(i)/t(i);return i}(s,n,5/e);if(e=rP(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*i;return{stiffness:t,damping:2*a*Math.sqrt(i*t),duration:e}}}(e);(t={...t,...r,mass:1}).isResolvedFromDuration=!0}return t}({...i,velocity:-((i.velocity||0)/1e3)}),m=p||0,g=c/(2*Math.sqrt(u*h)),y=o-a,v=Math.sqrt(u/h)/1e3,w=5>Math.abs(y);if(s||(s=w?rZ:r0),n||(n=w?r1:r2),g<1){let e=r5(v,g);r=t=>o-Math.exp(-g*v*t)*((m+g*v*y)/e*Math.sin(e*t)+y*Math.cos(e*t))}else if(1===g)r=e=>o-Math.exp(-v*e)*(y+(m+v*y)*e);else{let e=v*Math.sqrt(g*g-1);r=t=>{let r=Math.exp(-g*v*t),i=Math.min(e*t,300);return o-r*((m+g*v*y)*Math.sinh(i)+e*y*Math.cosh(i))/e}}let b={calculatedDuration:f&&d||null,next:e=>{let t=r(e);if(f)l.done=e>=d;else{let i=0===e?m:0;g<1&&(i=0===e?rP(m):rQ(r,e,t));let a=Math.abs(o-t)<=n;l.done=Math.abs(i)<=s&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(rX(b),2e4),t=rY(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function r7({keyframes:e,velocity:t=0,power:r=.8,timeConstant:i=325,bounceDamping:s=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){let h,d,p=e[0],f={done:!1,value:p},m=r*t,g=p+m,y=void 0===a?g:a(g);y!==g&&(m=y-p);let v=e=>-m*Math.exp(-e/i),w=e=>y+v(e),b=e=>{let t=v(e),r=w(e);f.done=Math.abs(t)<=u,f.value=f.done?y:r},x=e=>{let t;if(t=f.value,void 0!==o&&t<o||void 0!==l&&t>l){var r;h=e,d=r8({keyframes:[f.value,(r=f.value,void 0===o?l:void 0===l||Math.abs(o-r)<Math.abs(l-r)?o:l)],velocity:rQ(w,e,f.value),damping:s,stiffness:n,restDelta:u,restSpeed:c})}};return x(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==h||(t=!0,b(e),x(e)),void 0!==h&&e>=h)?d.next(e-h):(t||b(e),f)}}}r8.applyToOptions=e=>{let t=function(e,t=100,r){let i=r({...e,keyframes:[0,t]}),s=Math.min(rX(i),2e4);return{type:"keyframes",ease:e=>i.next(s*e).value/t,duration:s/1e3}}(e,100,r8);return e.ease=t.ease,e.duration=rP(t.duration),e.type="keyframes",e};let r9=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function ie(e,t,r,i){return e===t&&r===i?eG:s=>0===s||1===s?s:r9(function(e,t,r,i,s){let n,a,o=0;do(n=r9(a=t+(r-t)/2,i,s)-e)>0?r=a:t=a;while(Math.abs(n)>1e-7&&++o<12)return a}(s,0,1,e,r),t,i)}let it=ie(.42,0,1,1),ir=ie(0,0,.58,1),ii=ie(.42,0,.58,1),is=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ia=e=>t=>1-e(1-t),io=ie(.33,1.53,.69,.99),il=ia(io),iu=is(il),ic=e=>(e*=2)<1?.5*il(e):.5*(2-Math.pow(2,-10*(e-1))),ih=e=>1-Math.sin(Math.acos(e)),id=ia(ih),ip=is(ih),im=e=>Array.isArray(e)&&"number"==typeof e[0],ig={linear:eG,easeIn:it,easeInOut:ii,easeOut:ir,circIn:ih,circInOut:ip,circOut:id,backIn:il,backInOut:iu,backOut:io,anticipate:ic},iy=e=>{if(im(e)){eT(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,r,i,s]=e;return ie(t,r,i,s)}return"string"==typeof e?(eT(void 0!==ig[e],`Invalid easing type '${e}'`,"invalid-easing-type"),ig[e]):e},iv=(e,t,r)=>{let i=t-e;return 0===i?1:(r-e)/i};function iw(e,t,{clamp:r=!0,ease:i,mixer:s}={}){let n=e.length;if(eT(n===t.length,"Both input and output ranges must be the same length","range-length"),1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,r){let i=[],s=r||eY.mix||rJ,n=e.length-1;for(let r=0;r<n;r++){let n=s(e[r],e[r+1]);t&&(n=rR(Array.isArray(t)?t[r]||eG:t,n)),i.push(n)}return i}(t,i,s),l=o.length,u=r=>{if(a&&r<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(r<e[i+1]);i++);let s=iv(e[i],e[i+1],r);return o[i](s)};return r?t=>u(P(e[0],e[n-1],t)):u}function ib({duration:e=300,keyframes:t,times:r,ease:i="easeInOut"}){var s;let n,a=Array.isArray(i)&&"number"!=typeof i[0]?i.map(iy):iy(i),o={done:!1,value:t[0]},l=iw((s=r&&r.length===t.length?r:(!function(e,t){let r=e[e.length-1];for(let i=1;i<=t;i++){let s=iv(0,t,i);e.push(tF(r,1,s))}}(n=[0],t.length-1),n),s.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||ii).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let ix=e=>null!==e;function ij(e,{repeat:t,repeatType:r="loop"},i,s=1){let n=e.filter(ix),a=s<0||t&&"loop"!==r&&t%2==1?0:n.length-1;return a&&void 0!==i?i:n[a]}let iS={decay:r7,inertia:r7,tween:ib,keyframes:ib,spring:r8};function ik(e){"string"==typeof e.type&&(e.type=iS[e.type])}class i_{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let iE=e=>e/100;class iT extends i_{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==tl.now()&&this.tick(tl.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},r$.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;ik(e);let{type:t=ib,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:n=0}=e,{keyframes:a}=e,o=t||ib;o!==ib&&"number"!=typeof a[0]&&(this.mixKeyframes=rR(iE,rJ(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===s&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-n})),null===l.calculatedDuration&&(l.calculatedDuration=rX(l));let{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:n,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);let{delay:l=0,keyframes:u,repeat:c,repeatType:h,repeatDelay:d,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?g<0:g>i;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=i);let v=this.currentTime,w=r;if(c){let e=Math.min(this.currentTime,i)/a,t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,(t=Math.min(t,c+1))%2&&("reverse"===h?(r=1-r,d&&(r-=d/a)):"mirror"===h&&(w=n)),v=P(0,1,r)*a}let b=y?{done:!1,value:u[0]}:w.next(v);s&&(b.value=s(b.value));let{done:x}=b;y||null===o||(x=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);let j=null===this.holdTime&&("finished"===this.state||"running"===this.state&&x);return j&&p!==r7&&(b.value=ij(u,this.options,m,this.speed)),f&&f(b.value),j&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=rP(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tl.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=rG,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tl.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,r$.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function iA(e){let t;return()=>(void 0===t&&(t=e()),t)}let iC=iA(()=>void 0!==window.ScrollTimeline),iO={},iN=(r=iA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>iO.linearEasing??r()),iP=([e,t,r,i])=>`cubic-bezier(${e}, ${t}, ${r}, ${i})`,iI={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:iP([0,.65,.55,1]),circOut:iP([.55,0,1,.45]),backIn:iP([.31,.01,.66,-.59]),backOut:iP([.33,1.53,.69,.99])};function iR(e){return"function"==typeof e&&"applyToOptions"in e}class i$ extends i_{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:r,keyframes:i,pseudoElement:s,allowFlatten:n=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!s,this.allowFlatten=n,this.options=e,eT("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return iR(e)&&iN()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,r,{delay:i=0,duration:s=300,repeat:n=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u){let c={[t]:r};l&&(c.offset=l);let h=function e(t,r){if(t)return"function"==typeof t?iN()?rY(t,r):"ease-out":im(t)?iP(t):Array.isArray(t)?t.map(t=>e(t,r)||iI.easeOut):iI[t]}(o,s);Array.isArray(h)&&(c.easing=h);let d={delay:i,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"};u&&(d.pseudoElement=u);let p=e.animate(c,d);return p}(t,r,i,l,s),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){let e=ij(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):r.startsWith("--")?t.style.setProperty(r,e):t.style[r]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=rP(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&iC())?(this.animation.timeline=e,eG):t(this)}}let iB={anticipate:ic,backInOut:iu,circInOut:ip};class iM extends i${constructor(e){!function(e){"string"==typeof e.ease&&e.ease in iB&&(e.ease=iB[e.ease])}(e),ik(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:r,onComplete:i,element:s,...n}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new iT({...n,autoplay:!1}),o=Math.max(10,tl.now()-this.startTime),l=P(0,10,o-10);t.setWithVelocity(a.sample(Math.max(0,o-l)).value,a.sample(o).value,l),a.stop()}}let iD=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(eo.test(e)||"0"===e)&&!e.startsWith("url("));function iL(e){e.duration=0,e.type="keyframes"}let iz=new Set(["opacity","clipPath","filter","transform"]),iU=iA(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class iV extends i_{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:n="loop",keyframes:a,name:o,motionValue:l,element:u,...c}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tl.now();const h={autoplay:e,delay:t,type:r,repeat:i,repeatDelay:s,repeatType:n,name:o,motionValue:l,element:u,...c},d=u?.KeyframeResolver||e9;this.keyframeResolver=new d(a,(e,t,r)=>this.onKeyframesResolved(e,t,h,!r),o,l,u),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,i){this.keyframeResolver=void 0;let{name:s,type:n,velocity:a,delay:o,isHandoff:l,onUpdate:u}=r;this.resolvedAt=tl.now(),!function(e,t,r,i){let s=e[0];if(null===s)return!1;if("display"===t||"visibility"===t)return!0;let n=e[e.length-1],a=iD(s,t),o=iD(n,t);return eE(a===o,`You are trying to animate ${t} from "${s}" to "${n}". "${a?n:s}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||iR(r))&&i)}(e,s,n,a)&&((eY.instantAnimations||!o)&&u?.(ij(e,r,t)),e[0]=e[e.length-1],iL(r),r.repeat=0);let c={startTime:i?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},h=!l&&function(e){let{motionValue:t,name:r,repeatDelay:i,repeatType:s,damping:n,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return iU()&&r&&iz.has(r)&&("transform"!==r||!l)&&!o&&!i&&"mirror"!==s&&0!==n&&"inertia"!==a}(c),d=c.motionValue?.owner?.current,p=h?new iM({...c,element:d}):new iT(c);p.finished.then(()=>{this.notifyFinished()}).catch(eG),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),e6=!0,e7(),e8(),e6=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let iF={type:"spring",stiffness:500,damping:25,restSpeed:10},iW={type:"keyframes",duration:.8},iq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iH=e=>null!==e,iK=(e,t,r,i={},s,n)=>a=>{let o=rC(i,e)||{},l=o.delay||i.delay||0,{elapsed:u=0}=i;u-=rP(l);let c={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:s};!function({when:e,delay:t,delayChildren:r,staggerChildren:i,staggerDirection:s,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}(o)&&Object.assign(c,((e,{keyframes:t})=>t.length>2?iW:N.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:iF:iq)(e,c)),c.duration&&(c.duration=rP(c.duration)),c.repeatDelay&&(c.repeatDelay=rP(c.repeatDelay)),void 0!==c.from&&(c.keyframes[0]=c.from);let h=!1;if(!1!==c.type&&(0!==c.duration||c.repeatDelay)||(iL(c),0===c.delay&&(h=!0)),(eY.instantAnimations||eY.skipAnimations)&&(h=!0,iL(c),c.delay=0),c.allowFlatten=!o.type&&!o.ease,h&&!n&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:r="loop"},i){let s=e.filter(iH),n=t&&"loop"!==r&&t%2==1?0:s.length-1;return s[n]}(c.keyframes,o);if(void 0!==e)return void eZ.update(()=>{c.onUpdate(e),c.onComplete()})}return o.isSync?new iT(c):new iV(c)};function iJ(e,t,{delay:r=0,transitionOverride:i,type:s}={}){let{transition:n=e.getDefaultTransition(),transitionEnd:a,...o}=t,l=n?.reduceMotion;i&&(n=i);let u=[],c=s&&e.animationState&&e.animationState.getState()[s];for(let t in o){let i=e.getValue(t,e.latestValues[t]??null),s=o[t];if(void 0===s||c&&function({protectedKeys:e,needsAnimating:t},r){let i=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,i}(c,t))continue;let a={delay:r,...rC(n||{},t)},h=i.get();if(void 0!==h&&!i.isAnimating&&!Array.isArray(s)&&s===h&&!a.velocity)continue;let d=!1;if(window.MotionHandoffAnimation){let r=e.props[rj];if(r){let e=window.MotionHandoffAnimation(r,t,eZ);null!==e&&(a.startTime=e,d=!0)}}rN(e,t);let p=l??e.shouldReduceMotion;i.start(iK(t,i,s,p&&ex.has(t)?{type:!1}:a,e,d));let f=i.animation;f&&u.push(f)}return a&&Promise.all(u).then(()=>{eZ.update(()=>{a&&function(e,t){let{transitionEnd:r={},transition:i={},...s}=rA(e,t)||{};for(let t in s={...s,...r}){var n;let r=rO(n=s[t])?n[n.length-1]||0:n;e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,th(r))}}(e,a)})}),u}function iG(e,t,r,i=0,s=1){let n=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*i;return"function"==typeof r?r(n,a):1===s?n*i:o-n*i}function iY(e,t,r={}){let i=rA(e,t,"exit"===r.type?e.presenceContext?.custom:void 0),{transition:s=e.getDefaultTransition()||{}}=i||{};r.transitionOverride&&(s=r.transitionOverride);let n=i?()=>Promise.all(iJ(e,i,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(i=0)=>{let{delayChildren:n=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t,r=0,i=0,s=0,n=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(iY(l,t,{...a,delay:r+("function"==typeof i?0:i)+iG(e.variantChildren,l,i,s,n)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,i,n,a,o,r)}:()=>Promise.resolve(),{when:o}=s;if(!o)return Promise.all([n(),a(r.delay)]);{let[e,t]="beforeChildren"===o?[n,a]:[a,n];return e().then(()=>t())}}let iX=tb.length;function iQ(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}let iZ=[...tw].reverse(),i0=tw.length;function i1(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i2(){return{animate:i1(!0),whileInView:i1(),whileHover:i1(),whileTap:i1(),whileDrag:i1(),whileFocus:i1(),exit:i1()}}let i5=0;function i3(e){return[e("x"),e("y")]}let i4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function i6(e){return i4.has(e.tagName)||!0===e.isContentEditable}function i8(e,t,r,i={passive:!0}){return e.addEventListener(t,r,i),()=>e.removeEventListener(t,r)}let i7={x:!1,y:!1};function i9(e){return e.max-e.min}function se(e,t,r,i=.5){e.origin=i,e.originPoint=tF(t.min,t.max,e.origin),e.scale=i9(r)/i9(t),e.translate=tF(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function st(e,t,r,i){se(e.x,t.x,r.x,i?i.originX:void 0),se(e.y,t.y,r.y,i?i.originY:void 0)}function sr(e,t,r){e.min=r.min+t.min,e.max=e.min+i9(t)}function si(e,t,r){e.min=t.min-r.min,e.max=e.min+i9(t)}function ss(e,t,r){si(e.x,t.x,r.x),si(e.y,t.y,r.y)}let sn=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function sa(e){return{point:{x:e.pageX,y:e.pageY}}}function so(e,t,r,i){return i8(e,t,e=>sn(e)&&r(e,sa(e)),i)}let sl=({current:e})=>e?e.ownerDocument.defaultView:null,su=(e,t)=>Math.abs(e-t),sc=new Set(["auto","scroll"]);class sh{constructor(e,t,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:n=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let r=sf(this.lastMoveEventInfo,this.history),i=null!==this.startEvent,s=(e=r.offset,t={x:0,y:0},Math.sqrt(su(e.x,t.x)**2+su(e.y,t.y)**2)>=this.distanceThreshold);if(!i&&!s)return;let{point:n}=r,{timestamp:a}=e1;this.history.push({...n,timestamp:a});let{onStart:o,onMove:l}=this.handlers;i||(o&&o(this.lastMoveEvent,r),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,r)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=sd(t,this.transformPagePoint),eZ.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:r,onSessionEnd:i,resumeAnimation:s}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&s&&s(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let n=sf("pointercancel"===e.type?this.lastMoveEventInfo:sd(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),i&&i(e,n)},!sn(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=n,this.contextWindow=i||window;const o=sd(sa(e),this.transformPagePoint),{point:l}=o,{timestamp:u}=e1;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=t;c&&c(e,sf(o,this.history)),this.removeListeners=rR(so(this.contextWindow,"pointermove",this.handlePointerMove),so(this.contextWindow,"pointerup",this.handlePointerUp),so(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(sc.has(e.overflowX)||sc.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let r=e===window,i=r?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},s={x:i.x-t.x,y:i.y-t.y};(0!==s.x||0!==s.y)&&(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=s.x,this.lastMoveEventInfo.point.y+=s.y):this.history.length>0&&(this.history[0].x-=s.x,this.history[0].y-=s.y),this.scrollPositions.set(e,i),eZ.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),e0(this.updatePoint)}}function sd(e,t){return t?{point:t(e.point)}:e}function sp(e,t){return{x:e.x-t.x,y:e.y-t.y}}function sf({point:e},t){return{point:e,delta:sp(e,sm(t)),offset:sp(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,i=null,s=sm(e);for(;r>=0&&(i=e[r],!(s.timestamp-i.timestamp>rP(.1)));)r--;if(!i)return{x:0,y:0};let n=(s.timestamp-i.timestamp)/1e3;if(0===n)return{x:0,y:0};let a={x:(s.x-i.x)/n,y:(s.y-i.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function sm(e){return e[e.length-1]}function sg(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function sy(e,t){let r=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,i]=[i,r]),{min:r,max:i}}function sv(e,t,r){return{min:sw(e,t),max:sw(e,r)}}function sw(e,t){return"number"==typeof e?e:e[t]||0}let sb=new WeakMap;class sx{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ew(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){let{presenceContext:i}=this.visualElement;if(i&&!1===i.isPresent)return;let s=e=>{t?(this.stopAnimation(),this.snapToCursor(sa(e).point)):this.pauseAnimation()},n=(e,t)=>{this.stopAnimation();let{drag:r,dragPropagation:i,onDragStart:s}=this.getProps();if(r&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(i7[e])return null;else return i7[e]=!0,()=>{i7[e]=!1};return i7.x||i7.y?null:(i7.x=i7.y=!0,()=>{i7.x=i7.y=!1})}(r),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),i3(e=>{let t=this.getAxisMotionValue(e).get()||0;if(H.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let i=r.layout.layoutBox[e];i&&(t=i9(i)*(parseFloat(t)/100))}}this.originPoint[e]=t}),s&&eZ.postRender(()=>s(e,t)),rN(this.visualElement,"transform");let{animationState:n}=this.visualElement;n&&n.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:r,dragDirectionLock:i,onDirectionLock:s,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;let{offset:a}=t;if(i&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&s&&s(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>i3(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:u}=this.getProps();this.panSession=new sh(e,{onSessionStart:s,onStart:n,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:r,contextWindow:sl(this.visualElement),element:this.visualElement.current})}stop(e,t){let r=e||this.latestPointerEvent,i=t||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;let{velocity:n}=i;this.startAnimation(n);let{onDragEnd:a}=this.getProps();a&&eZ.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,r){let{drag:i}=this.getProps();if(!r||!sj(e,i,this.currentDirection))return;let s=this.getAxisMotionValue(e),n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},i){return void 0!==t&&e<t?e=i?tF(t,e,i.min):Math.max(e,t):void 0!==r&&e>r&&(e=i?tF(r,e,i.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),s.set(n)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&rk(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:i,right:s}){return{x:sg(e.x,r,s),y:sg(e.y,t,i)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:sv(e,"left","right"),y:sv(e,"top","bottom")}}(t),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&i3(e=>{var t,i;let s;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=r.layoutBox[e],i=this.constraints[e],s={},void 0!==i.min&&(s.min=i.min-t.min),void 0!==i.max&&(s.max=i.max-t.min),s))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!rk(t))return!1;let i=t.current;eT(null!==i,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:s}=this.visualElement;if(!s||!s.layout)return!1;let n=function(e,t,r){let i=t6(e,r),{scroll:s}=t;return s&&(t5(i.x,s.offset.x),t5(i.y,s.offset.y)),i}(i,s.root,this.visualElement.getTransformPagePoint()),a=(e=s.layout.layoutBox,{x:sy(e.x,n.x),y:sy(e.y,n.y)});if(r){let e=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=tG(e))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(i3(a=>{if(!sj(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});let u={type:"inertia",velocity:r?e[a]:0,bounceStiffness:i?200:1e6,bounceDamping:i?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...s,...l};return this.startAxisValueAnimation(a,u)})).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return rN(this.visualElement,e),r.start(iK(e,r,0,t,this.visualElement,!1))}stopAnimation(){i3(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){i3(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps();return r[t]||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){i3(t=>{let{drag:r}=this.getProps();if(!sj(t,r,this.currentDirection))return;let{projection:i}=this.visualElement,s=this.getAxisMotionValue(t);if(i&&i.layout){let{min:r,max:n}=i.layout.layoutBox[t],a=s.get()||0;s.set(e[t]-tF(r,n,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rk(t)||!r||!this.constraints)return;this.stopAnimation();let i={x:0,y:0};i3(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var r,s;let n,a,o,l=t.get();i[e]=(r={min:l,max:l},s=this.constraints[e],n=.5,a=i9(r),(o=i9(s))>a?n=iv(s.min,s.max-a,r.min):a>o&&(n=iv(r.min,r.max-o,s.min)),P(0,1,n))}});let{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),i3(t=>{if(!sj(t,e,null))return;let r=this.getAxisMotionValue(t),{min:s,max:n}=this.constraints[t];r.set(tF(s,n,i[t]))})}addListeners(){if(!this.visualElement.current)return;sb.set(this.visualElement,this);let e=this.visualElement.current,t=so(e,"pointerdown",t=>{let{drag:r,dragListener:i=!0}=this.getProps(),s=t.target,n=s!==e&&i6(s);r&&i&&!n&&this.start(t)}),r=()=>{let{dragConstraints:e}=this.getProps();rk(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),eZ.read(r);let n=i8(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(i3(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{n(),t(),s(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:n=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:n,dragMomentum:a}}}function sj(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let sS=e=>(t,r)=>{e&&eZ.postRender(()=>e(t,r))},sk={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var s_=C;function sE(e=!0){let t=(0,C.useContext)(rd);if(null===t)return[!0,null];let{isPresent:r,onExitComplete:i,register:s}=t,n=(0,C.useId)();(0,C.useEffect)(()=>{if(e)return s(n)},[e]);let a=(0,C.useCallback)(()=>e&&i&&i(n),[n,i,e]);return!r&&i?[!1,a]:[!0]}let sT=!1;class sA extends s_.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(t.group&&t.group.add(s),r&&r.register&&i&&r.register(s),sT&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),sk.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:i,isPresent:s}=this.props,{projection:n}=r;return n&&(n.isPresent=s,e.layoutDependency!==t&&n.setOptions({...n.options,layoutDependency:t}),sT=!0,i||e.layoutDependency!==t||void 0===t||e.isPresent!==s?n.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?n.promote():n.relegate()||eZ.postRender(()=>{let e=n.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ta.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:i}=e;sT=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function sC(e){let[t,r]=sE(),i=(0,s_.useContext)(re);return(0,A.jsx)(sA,{...e,layoutGroup:i,switchLayoutGroup:(0,s_.useContext)(rS),isPresent:t,safeToRemove:r})}function sO(e){return"object"==typeof e&&null!==e}function sN(e){return sO(e)&&"ownerSVGElement"in e}let sP=["TopLeft","TopRight","BottomLeft","BottomRight"],sI=sP.length,sR=e=>"string"==typeof e?parseFloat(e):e,s$=e=>"number"==typeof e||K.test(e);function sB(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let sM=sL(0,.5,id),sD=sL(.5,.95,eG);function sL(e,t,r){return i=>i<e?0:i>t?1:r(iv(e,t,i))}function sz(e,t){e.min=t.min,e.max=t.max}function sU(e,t){sz(e.x,t.x),sz(e.y,t.y)}function sV(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function sF(e,t,r,i,s){return e-=t,e=i+1/r*(e-i),void 0!==s&&(e=i+1/s*(e-i)),e}function sW(e,t,[r,i,s],n,a){!function(e,t=0,r=1,i=.5,s,n=e,a=e){if(H.test(t)&&(t=parseFloat(t),t=tF(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=tF(n.min,n.max,i);e===n&&(o-=t),e.min=sF(e.min,t,r,o,s),e.max=sF(e.max,t,r,o,s)}(e,t[r],t[i],t[s],t.scale,n,a)}let sq=["x","scaleX","originX"],sH=["y","scaleY","originY"];function sK(e,t,r,i){sW(e.x,t,sq,r?r.x:void 0,i?i.x:void 0),sW(e.y,t,sH,r?r.y:void 0,i?i.y:void 0)}function sJ(e){return 0===e.translate&&1===e.scale}function sG(e){return sJ(e.x)&&sJ(e.y)}function sY(e,t){return e.min===t.min&&e.max===t.max}function sX(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function sQ(e,t){return sX(e.x,t.x)&&sX(e.y,t.y)}function sZ(e){return i9(e.x)/i9(e.y)}function s0(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class s1{constructor(){this.members=[]}add(e){ti(this.members,e),e.scheduleRender()}remove(e){if(ts(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let e=r;e>=0;e--){let r=this.members[e];if(!1!==r.isPresent){t=r;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender();let i=r.options.layoutDependency,s=e.options.layoutDependency;(void 0===i||void 0===s||i!==s)&&(e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let s2=(e,t)=>e.depth-t.depth;class s5{constructor(){this.children=[],this.isDirty=!1}add(e){ti(this.children,e),this.isDirty=!0}remove(e){ts(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(s2),this.isDirty=!1,this.children.forEach(e)}}let s3=["","X","Y","Z"],s4=0;function s6(e,t,r,i){let{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),i&&(i[e]=0))}function s8({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:i,resetTransform:s}){return class{constructor(e={},r=t?.()){this.id=s4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ne),this.nodes.forEach(no),this.nodes.forEach(nl),this.nodes.forEach(nt)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new s5)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new tn),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=sN(t)&&!(sN(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:r,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||r)&&(this.isLayoutDirty=!0),e){let r,i=0,s=()=>this.root.updateBlockedByResize=!1;eZ.read(()=>{i=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==i){let t,n;i=e,this.root.updateBlockedByResize=!0,r&&r(),t=tl.now(),n=({timestamp:e})=>{let r=e-t;r>=250&&(e0(n),s(r-250))},eZ.setup(n,!0),r=()=>e0(n),sk.hasAnimatedSinceResize&&(sk.hasAnimatedSinceResize=!1,this.nodes.forEach(na))}})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&s&&(r||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:i})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let n=this.options.transition||s.getDefaultTransition()||nf,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),l=!this.targetLayout||!sQ(this.targetLayout,i),u=!t&&r;if(this.options.layoutRoot||this.resumeFrom||u||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...rC(n,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,u)}else t||na(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=i})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),e0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nu),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:r}=t.options;if(!r)return;let i=r.props[rj];if(window.MotionHasOptimisedAnimation(i,"transform")){let{layout:e,layoutId:r}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",eZ,!(e||r))}let{parent:s}=t;s&&!s.hasCheckedOptimisedAppear&&e(s)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;let i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ni);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(ns);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(nn),this.nodes.forEach(s7),this.nodes.forEach(s9)):this.nodes.forEach(ns),this.clearAllSnapshots();let e=tl.now();e1.delta=P(0,1e3/60,e-e1.timestamp),e1.timestamp=e,e1.isProcessing=!0,e2.update.process(e1),e2.preRender.process(e1),e2.render.process(e1),e1.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ta.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nr),this.sharedNodes.forEach(nc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,eZ.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){eZ.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||i9(this.snapshot.measuredBox.x)||i9(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ew(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=i(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!s)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!sG(this.projectionDelta),r=this.getTransformTemplate(),i=r?r(this.latestValues,""):void 0,n=i!==this.prevTransformTemplateValue;e&&this.instance&&(t||tQ(this.latestValues)||n)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),i=this.removeElementScroll(r);return e&&(i=this.removeTransform(i)),ny((t=i).x),ny(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:i,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return ew();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nw))){let{scroll:e}=this.root;e&&(t5(t.x,e.offset.x),t5(t.y,e.offset.y))}return t}removeElementScroll(e){let t=ew();if(sU(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){let i=this.path[r],{scroll:s,options:n}=i;i!==this.root&&s&&n.layoutScroll&&(s.wasRoot&&sU(t,e),t5(t.x,s.offset.x),t5(t.y,s.offset.y))}return t}applyTransform(e,t=!1){let r=ew();sU(r,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&t4(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),tQ(i.latestValues)&&t4(r,i.latestValues)}return tQ(this.latestValues)&&t4(r,this.latestValues),r}removeTransform(e){let t=ew();sU(t,e);for(let e=0;e<this.path.length;e++){let r=this.path[e];if(!r.instance||!tQ(r.latestValues))continue;tX(r.latestValues)&&r.updateSnapshot();let i=ew();sU(i,r.measurePageBox()),sK(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}return tQ(this.latestValues)&&sK(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==e1.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let r=!!this.resumingFrom||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:i,layoutId:s}=this.options;if(!this.layout||!(i||s))return;this.resolvedRelativeTargetAt=e1.timestamp;let n=this.getClosestProjectingParent();if(n&&this.linkedParentVersion!==n.layoutVersion&&!n.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(n&&n.layout?this.createRelativeTarget(n,this.layout.layoutBox,n.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=ew(),this.targetWithTransforms=ew()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,sr(a.x,o.x,l.x),sr(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):sU(this.target,this.layout.layoutBox),t2(this.target,this.targetDelta)):sU(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,n&&!!n.resumingFrom==!!this.resumingFrom&&!n.options.layoutScroll&&n.target&&1!==this.animationProgress?this.createRelativeTarget(n,this.target,n.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||tX(this.parent.latestValues)||tZ(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,r){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ew(),this.relativeTargetOrigin=ew(),ss(this.relativeTargetOrigin,t,r),sU(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===e1.timestamp&&(r=!1),r)return;let{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||s))return;sU(this.layoutCorrected,this.layout.layoutBox);let n=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,i=!1){let s,n,a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){n=(s=r[o]).projectionDelta;let{visualElement:a}=s.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&t4(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),n&&(t.x*=n.x.scale,t.y*=n.y.scale,t2(e,n)),i&&tQ(s.latestValues)&&t4(e,s.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=ew());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(sV(this.prevProjectionDelta.x,this.projectionDelta.x),sV(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),st(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===n&&this.treeScale.y===a&&s0(this.projectionDelta.x,this.prevProjectionDelta.x)&&s0(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ey(),this.projectionDelta=ey(),this.projectionDeltaWithTransform=ey()}setAnimationOrigin(e,t=!1){let r,i=this.snapshot,s=i?i.latestValues:{},n={...this.latestValues},a=ey();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=ew(),l=(i?i.source:void 0)!==(this.layout?this.layout.source:void 0),u=this.getStack(),c=!u||u.members.length<=1,h=!!(l&&!c&&!0===this.options.crossfade&&!this.path.some(np));this.animationProgress=0,this.mixTargetDelta=t=>{let i=t/1e3;if(nh(a.x,e.x,i),nh(a.y,e.y,i),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var u,d,p,f,m,g;ss(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=i,nd(p.x,f.x,m.x,g),nd(p.y,f.y,m.y,g),r&&(u=this.relativeTarget,d=r,sY(u.x,d.x)&&sY(u.y,d.y))&&(this.isProjectionDirty=!1),r||(r=ew()),sU(r,this.relativeTarget)}l&&(this.animationValues=n,function(e,t,r,i,s,n){s?(e.opacity=tF(0,r.opacity??1,sM(i)),e.opacityExit=tF(t.opacity??1,0,sD(i))):n&&(e.opacity=tF(t.opacity??1,r.opacity??1,i));for(let s=0;s<sI;s++){let n=`border${sP[s]}Radius`,a=sB(t,n),o=sB(r,n);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||s$(a)===s$(o)?(e[n]=Math.max(tF(sR(a),sR(o),i),0),(H.test(o)||H.test(a))&&(e[n]+="%")):e[n]=o)}(t.rotate||r.rotate)&&(e.rotate=tF(t.rotate||0,r.rotate||0,i))}(n,s,this.latestValues,i,h,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=i},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(e0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eZ.update(()=>{var t,r,i;let s;sk.hasAnimatedSinceResize=!0,r$.layout++,this.motionValue||(this.motionValue=th(0)),this.currentAnimation=(t=this.motionValue,r=[0,1e3],i={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{r$.layout--},onComplete:()=>{r$.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(s=eb(t)?t:th(t)).start(iK("",s,r,i)),s.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:i,latestValues:s}=e;if(t&&r&&i){if(this!==e&&this.layout&&i&&nv(this.options.animationType,this.layout.layoutBox,i.layoutBox)){r=this.target||ew();let t=i9(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;let i=i9(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+i}sU(t,r),t4(t,s),st(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new s1),this.sharedNodes.get(e).add(t);let r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let i=this.getStack();i&&i.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;let i={};r.z&&s6("z",e,i,this.animationValues);for(let t=0;t<s3.length;t++)s6(`rotate${s3[t]}`,e,i,this.animationValues),s6(`skew${s3[t]}`,e,i,this.animationValues);for(let t in e.render(),i)e.setStaticValue(t,i[t]),this.animationValues&&(this.animationValues[t]=i[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let r=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=rh(t?.pointerEvents)||"",e.transform=r?r(this.latestValues,""):"none";return}let i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=rh(t?.pointerEvents)||""),this.hasProjected&&!tQ(this.latestValues)&&(e.transform=r?r({},""):"none",this.hasProjected=!1);return}e.visibility="";let s=i.animationValues||i.latestValues;this.applyTransformsToTarget();let n=function(e,t,r){let i="",s=e.x.translate/t.x,n=e.y.translate/t.y,a=r?.z||0;if((s||n||a)&&(i=`translate3d(${s}px, ${n}px, ${a}px) `),(1!==t.x||1!==t.y)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),r){let{transformPerspective:e,rotate:t,rotateX:s,rotateY:n,skewX:a,skewY:o}=r;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),s&&(i+=`rotateX(${s}deg) `),n&&(i+=`rotateY(${n}deg) `),a&&(i+=`skewX(${a}deg) `),o&&(i+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(i+=`scale(${o}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s);r&&(n=r(s,n)),e.transform=n;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,i.animationValues?e.opacity=i===this?s.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:e.opacity=i===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0,tW){if(void 0===s[t])continue;let{correct:r,applyTo:a,isCSSVariable:o}=tW[t],l="none"===n?s[t]:r(s[t],i);if(a){let t=a.length;for(let r=0;r<t;r++)e[a[r]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=i===this?rh(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(ni),this.root.sharedNodes.clear()}}}function s7(e){e.updateLayout()}function s9(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:r,measuredBox:i}=e.layout,{animationType:s}=e.options,n=t.source!==e.layout.source;"size"===s?i3(e=>{let i=n?t.measuredBox[e]:t.layoutBox[e],s=i9(i);i.min=r[e].min,i.max=i.min+s}):nv(s,t.layoutBox,r)&&i3(i=>{let s=n?t.measuredBox[i]:t.layoutBox[i],a=i9(r[i]);s.max=s.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});let a=ey();st(a,r,t.layoutBox);let o=ey();n?st(o,e.applyTransform(i,!0),t.measuredBox):st(o,r,t.layoutBox);let l=!sG(a),u=!1;if(!e.resumeFrom){let i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){let{snapshot:s,layout:n}=i;if(s&&n){let a=ew();ss(a,t.layoutBox,s.layoutBox);let o=ew();ss(o,r,n.layoutBox),sQ(a,o)||(u=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ne(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function nt(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nr(e){e.clearSnapshot()}function ni(e){e.clearMeasurements()}function ns(e){e.isLayoutDirty=!1}function nn(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function na(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function no(e){e.resolveTargetDelta()}function nl(e){e.calcProjection()}function nu(e){e.resetSkewAndRotation()}function nc(e){e.removeLeadSnapshot()}function nh(e,t,r){e.translate=tF(t.translate,0,r),e.scale=tF(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function nd(e,t,r,i){e.min=tF(t.min,r.min,i),e.max=tF(t.max,r.max,i)}function np(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let nf={duration:.45,ease:[.4,0,.1,1]},nm=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ng=nm("applewebkit/")&&!nm("chrome/")?Math.round:eG;function ny(e){e.min=ng(e.min),e.max=ng(e.max)}function nv(e,t,r){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(sZ(t)-sZ(r)))}function nw(e){return e!==e.root&&e.scroll?.wasRoot}let nb=s8({attachResizeListener:(e,t)=>i8(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),nx={current:void 0},nj=s8({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!nx.current){let e=new nb({});e.mount(window),e.setOptions({layoutScroll:!0}),nx.current=e}return nx.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function nS(e,t){let r=function(e,t,r){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,r=(void 0)??t.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e).filter(e=>null!=e)}(e),i=new AbortController;return[r,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function nk(e){return!("touch"===e.pointerType||i7.x||i7.y)}function n_(e,t,r){let{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===r);let s=i["onHover"+r];s&&eZ.postRender(()=>s(t,sa(t)))}function nE(e){return sO(e)&&"offsetHeight"in e}let nT=(e,t)=>!!t&&(e===t||nT(e,t.parentElement)),nA=new WeakSet;function nC(e){return t=>{"Enter"===t.key&&e(t)}}function nO(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function nN(e){return sn(e)&&!(i7.x||i7.y)}function nP(e,t,r){let{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===r);let s=i["onTap"+("End"===r?"":r)];s&&eZ.postRender(()=>s(t,sa(t)))}let nI=new WeakMap,nR=new WeakMap,n$=e=>{let t=nI.get(e.target);t&&t(e)},nB=e=>{e.forEach(n$)},nM={some:0,all:1},nD=function(e,t){if("u"<typeof Proxy)return rE;let r=new Map,i=(r,i)=>rE(r,i,e,t);return new Proxy((e,t)=>i(e,t),{get:(s,n)=>"create"===n?i:(r.has(n)||r.set(n,rE(n,void 0,e,t)),r.get(n))})}({animation:{Feature:class extends rT{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let i;if(e.notify("AnimationStart",t),Array.isArray(t))i=Promise.all(t.map(t=>iY(e,t,r)));else if("string"==typeof t)i=iY(e,t,r);else{let s="function"==typeof t?rA(e,t,r.custom):t;i=Promise.all(iJ(e,s,r))}return i.then(()=>{e.notify("AnimationComplete",t)})})(e,t,r))),r=i2(),i=!0,s=t=>(r,i)=>{let s=rA(e,i,"exit"===t?e.presenceContext?.custom:void 0);if(s){let{transition:e,transitionEnd:t,...i}=s;r={...r,...i,...t}}return r};function n(n){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let r=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(r.initial=t.props.initial),r}let r={};for(let e=0;e<iX;e++){let i=tb[e],s=t.props[i];(tv(s)||!1===s)&&(r[i]=s)}return r}(e.parent)||{},l=[],u=new Set,c={},h=1/0;for(let t=0;t<i0;t++){var d,p;let f=iZ[t],m=r[f],g=void 0!==a[f]?a[f]:o[f],y=tv(g),v=f===n?m.isActive:null;!1===v&&(h=t);let w=g===o[f]&&g!==a[f]&&y;if(w&&i&&e.manuallyAnimateOnMount&&(w=!1),m.protectedKeys={...c},!m.isActive&&null===v||!g&&!m.prevProp||ty(g)||"boolean"==typeof g)continue;let b=(d=m.prevProp,"string"==typeof(p=g)?p!==d:!!Array.isArray(p)&&!iQ(p,d)),x=b||f===n&&m.isActive&&!w&&y||t>h&&y,j=!1,S=Array.isArray(g)?g:[g],k=S.reduce(s(f),{});!1===v&&(k={});let{prevResolvedValues:_={}}=m,E={..._,...k},T=t=>{x=!0,u.has(t)&&(j=!0,u.delete(t)),m.needsAnimating[t]=!0;let r=e.getValue(t);r&&(r.liveStyle=!1)};for(let e in E){let t=k[e],r=_[e];if(!c.hasOwnProperty(e))(rO(t)&&rO(r)?iQ(t,r):t===r)?void 0!==t&&u.has(e)?T(e):m.protectedKeys[e]=!0:null!=t?T(e):u.add(e)}m.prevProp=g,m.prevResolvedValues=k,m.isActive&&(c={...c,...k}),i&&e.blockInitialAnimation&&(x=!1);let A=w&&b,C=!A||j;x&&C&&l.push(...S.map(t=>{let r={type:f};if("string"==typeof t&&i&&!A&&e.manuallyAnimateOnMount&&e.parent){let{parent:i}=e,s=rA(i,t);if(i.enteringChildren&&s){let{delayChildren:t}=s.transition||{};r.delay=iG(i.enteringChildren,e,t)}}return{animation:t,options:r}}))}if(u.size){let t={};if("boolean"!=typeof a.initial){let r=rA(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}u.forEach(r=>{let i=e.getBaseTarget(r),s=e.getValue(r);s&&(s.liveStyle=!0),t[r]=i??null}),l.push({animation:t})}let f=!!l.length;return i&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(f=!1),i=!1,f?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,i){if(r[t].isActive===i)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,i)),r[t].isActive=i;let s=n(t);for(let e in r)r[e].protectedKeys={};return s},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=i2()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();ty(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends rT{constructor(){super(...arguments),this.id=i5++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;let i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends rT{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:r={}}=this.node.getProps(),{root:i,margin:s,amount:n="some",once:a}=r,o={root:i?i.current:void 0,rootMargin:s,threshold:"number"==typeof n?n:nM[n]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:i}=this.node.getProps(),s=t?r:i;s&&s(e)};return e=this.node.current,t=function({root:e,...t}){let r=e||document;nR.has(r)||nR.set(r,{});let i=nR.get(r),s=JSON.stringify(t);return i[s]||(i[s]=new IntersectionObserver(nB,{root:e,...t})),i[s]}(o),nI.set(e,l),t.observe(e),()=>{nI.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends rT{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nS(e,r),a=e=>{let i=e.currentTarget;if(!nN(e))return;nA.add(i);let n=t(i,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),nA.has(i)&&nA.delete(i),nN(e)&&"function"==typeof n&&n(e,{success:t})},o=e=>{a(e,i===window||i===document||r.useGlobalTarget||nT(i,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,s),window.addEventListener("pointercancel",l,s)};return i.forEach(e=>{(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,s),nE(e)&&(e.addEventListener("focus",e=>((e,t)=>{let r=e.currentTarget;if(!r)return;let i=nC(()=>{if(nA.has(r))return;nO(r,"down");let e=nC(()=>{nO(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>nO(r,"cancel"),t)});r.addEventListener("keydown",i,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",i),t)})(e,s)),i6(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),n}(e,(e,t)=>(nP(this.node,t,"Start"),(e,{success:t})=>nP(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends rT{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rR(i8(this.node.current,"focus",()=>this.onFocus()),i8(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends rT{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){let[i,s,n]=nS(e,r),a=e=>{if(!nk(e))return;let{target:r}=e,i=t(r,e);if("function"!=typeof i||!r)return;let n=e=>{nk(e)&&(i(e),r.removeEventListener("pointerleave",n))};r.addEventListener("pointerleave",n,s)};return i.forEach(e=>{e.addEventListener("pointerenter",a,s)}),n}(e,(e,t)=>(n_(this.node,t,"Start"),e=>n_(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends rT{constructor(){super(...arguments),this.removePointerDownListener=eG}onPointerDown(e){this.session=new sh(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sl(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:sS(e),onStart:sS(t),onMove:r,onEnd:(e,t)=>{delete this.session,i&&eZ.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=so(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends rT{constructor(e){super(e),this.removeGroupControls=eG,this.removeListeners=eG,this.controls=new sx(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||eG}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},ProjectionNode:nj,MeasureLayout:sC},layout:{ProjectionNode:nj,MeasureLayout:sC}},(e,t)=>t.isSVG??t9(e)?new tJ(t):new t8(t,{allowProjection:e!==C.Fragment}));var nL=C;function nz(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class nU extends nL.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=t.offsetParent,r=nE(e)&&e.offsetWidth||0,i=nE(e)&&e.offsetHeight||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left,s.bottom=i-s.height-s.top}return null}componentDidUpdate(){}render(){return this.props.children}}function nV({children:e,isPresent:t,anchorX:r,anchorY:i,root:s}){let n=(0,nL.useId)(),a=(0,nL.useRef)(null),o=(0,nL.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:l}=(0,nL.useContext)(rr),u=function(...e){return C.useCallback(function(...e){return t=>{let r=!1,i=e.map(e=>{let i=nz(e,t);return r||"function"!=typeof i||(r=!0),i});if(r)return()=>{for(let t=0;t<i.length;t++){let r=i[t];"function"==typeof r?r():nz(e[t],null)}}}}(...e),e)}(a,e.props?.ref??e?.ref);return(0,nL.useInsertionEffect)(()=>{let{width:e,height:u,top:c,left:h,right:d,bottom:p}=o.current;if(t||!a.current||!e||!u)return;let f="left"===r?`left: ${h}`:`right: ${d}`,m="bottom"===i?`bottom: ${p}`:`top: ${c}`;a.current.dataset.motionPopId=n;let g=document.createElement("style");l&&(g.nonce=l);let y=s??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${u}px !important;
            ${f}px !important;
            ${m}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),(0,A.jsx)(nU,{isPresent:t,childRef:a,sizeRef:o,children:nL.cloneElement(e,{ref:u})})}let nF=({children:e,initial:t,isPresent:r,onExitComplete:i,custom:s,presenceAffectsLayout:n,mode:a,anchorX:o,anchorY:l,root:u})=>{let c=rp(nW),h=(0,C.useId)(),d=!0,p=(0,C.useMemo)(()=>(d=!1,{id:h,initial:t,isPresent:r,custom:s,onExitComplete:e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;i&&i()},register:e=>(c.set(e,!1),()=>c.delete(e))}),[r,c,i]);return n&&d&&(p={...p}),(0,C.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),C.useEffect(()=>{r||c.size||!i||i()},[r]),"popLayout"===a&&(e=(0,A.jsx)(nV,{isPresent:r,anchorX:o,anchorY:l,root:u,children:e})),(0,A.jsx)(rd.Provider,{value:p,children:e})};function nW(){return new Map}let nq=e=>e.key||"";function nH(e){let t=[];return C.Children.forEach(e,e=>{(0,C.isValidElement)(e)&&t.push(e)}),t}let nK=({children:e,custom:t,initial:r=!0,onExitComplete:i,presenceAffectsLayout:s=!0,mode:n="sync",propagate:a=!1,anchorX:o="left",anchorY:l="top",root:u})=>{let[c,h]=sE(a),d=(0,C.useMemo)(()=>nH(e),[e]),p=a&&!c?[]:d.map(nq),f=(0,C.useRef)(!0),m=(0,C.useRef)(d),g=rp(()=>new Map),y=(0,C.useRef)(new Set),[v,w]=(0,C.useState)(d),[b,x]=(0,C.useState)(d);r_(()=>{f.current=!1,m.current=d;for(let e=0;e<b.length;e++){let t=nq(b[e]);p.includes(t)?(g.delete(t),y.current.delete(t)):!0!==g.get(t)&&g.set(t,!1)}},[b,p.length,p.join("-")]);let j=[];if(d!==v){let e=[...d];for(let t=0;t<b.length;t++){let r=b[t],i=nq(r);p.includes(i)||(e.splice(t,0,r),j.push(r))}return"wait"===n&&j.length&&(e=j),x(nH(e)),w(d),null}let{forceRender:S}=(0,C.useContext)(re);return(0,A.jsx)(A.Fragment,{children:b.map(e=>{let v=nq(e),w=(!a||!!c)&&(d===b||p.includes(v));return(0,A.jsx)(nF,{isPresent:w,initial:(!f.current||!!r)&&void 0,custom:t,presenceAffectsLayout:s,mode:n,root:u,onExitComplete:w?void 0:()=>{if(y.current.has(v)||(y.current.add(v),!g.has(v)))return;g.set(v,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(S?.(),x(m.current),a&&h?.(),i&&i())},anchorX:o,anchorY:l,children:e},v)})})};e.s([],70969),e.i(70969);let nJ=(0,C.createContext)(null),nG=(0,C.forwardRef)(function({children:e,as:t="ul",axis:r="y",onReorder:i,values:s,...n},a){let o=rp(()=>nD[t]),l=[],u=(0,C.useRef)(!1),c=(0,C.useRef)(null);eT(!!s,"Reorder.Group must be provided a values prop","reorder-values"),(0,C.useEffect)(()=>{u.current=!1});let h={overflowAnchor:"none",...n.style};return(0,A.jsx)(o,{...n,style:h,ref:e=>{c.current=e,"function"==typeof a?a(e):a&&(a.current=e)},ignoreStrict:!0,children:(0,A.jsx)(nJ.Provider,{value:{axis:r,groupRef:c,registerItem:(e,t)=>{let i=l.findIndex(t=>e===t.value);-1!==i?l[i].layout=t[r]:l.push({value:e,layout:t[r]}),l.sort(nX)},updateOrder:(e,t,r)=>{if(u.current)return;let n=function(e,t,r,i){if(!i)return e;let s=e.findIndex(e=>e.value===t);if(-1===s)return e;let n=i>0?1:-1,a=e[s+n];if(!a)return e;let o=e[s],l=a.layout,u=tF(l.min,l.max,.5);return 1===n&&o.layout.max+r>u||-1===n&&o.layout.min+r<u?function([...e],t,r){let i=t<0?e.length+t:t;if(i>=0&&i<e.length){let i=r<0?e.length+r:r,[s]=e.splice(t,1);e.splice(i,0,s)}return e}(e,s,s+n):e}(l,e,t,r);l!==n&&(u.current=!0,i(n.map(nY).filter(e=>-1!==s.indexOf(e))))}},children:e})})});function nY(e){return e.value}function nX(e,t){return e.layout.min-t.layout.min}function nQ(e){let t=rp(()=>th(e)),{isStatic:r}=(0,C.useContext)(rr);if(r){let[,r]=(0,C.useState)(e);(0,C.useEffect)(()=>t.on("change",r),[])}return t}function nZ(e,t){let r=nQ(t()),i=()=>r.set(t());return i(),r_(()=>{let t=()=>eZ.preRender(i,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),e0(i)}}),r}function n0(e,t){let r=rp(()=>[]);return nZ(e,()=>{r.length=0;let i=e.length;for(let t=0;t<i;t++)r[t]=e[t].get();return t(r)})}let n1=new Set(["auto","scroll"]),n2=new WeakMap,n5=new WeakMap,n3=null;function n4(e,t){let r=e?.parentElement;for(;r;){if(function(e,t){let r=getComputedStyle(e),i="x"===t?r.overflowX:r.overflowY;return n1.has(i)}(r,t))return r;r=r.parentElement}return null}function n6(e,t=0){return eb(e)?e:nQ(t)}let n8=(0,C.forwardRef)(function({children:e,style:t={},value:r,as:i="li",onDrag:s,onDragEnd:n,layout:a=!0,...o},l){let u=rp(()=>nD[i]),c=(0,C.useContext)(nJ),h={x:n6(t.x),y:n6(t.y)},d=function e(t,r,i,s){if("function"==typeof t){let e;return tu.current=[],t(),e=nZ(tu.current,t),tu.current=void 0,e}if(void 0!==i&&!Array.isArray(i)&&"function"!=typeof r){var n=t,a=r,o=i,l=s;let u=rp(()=>Object.keys(o)),c=rp(()=>({}));for(let t of u)c[t]=e(n,a,o[t],l);return c}let u="function"==typeof r?r:function(...e){let t=!Array.isArray(e[0]),r=t?0:-1,i=e[0+r],s=iw(e[1+r],e[2+r],e[3+r]);return t?s(i):s}(r,i,s);return Array.isArray(t)?n0(t,u):n0([t],([e])=>u(e))}([h.x,h.y],([e,t])=>e||t?1:"unset");eT(!!c,"Reorder.Item must be a child of Reorder.Group","reorder-item-child");let{axis:p,registerItem:f,updateOrder:m,groupRef:g}=c;return(0,A.jsx)(u,{drag:p,...o,dragSnapToOrigin:!0,style:{...t,x:h.x,y:h.y,zIndex:d},layout:a,onDrag:(e,t)=>{let{velocity:i,point:n}=t;m(r,h[p].get(),i[p]),function(e,t,r,i){if(!e)return;n3=e;let s=n4(e,r);if(!s)return;let{amount:n,edge:a}=function(e,t,r){let i=t.getBoundingClientRect(),s="x"===r?i.left:i.top,n="x"===r?i.right:i.bottom,a=e-s,o=n-e;if(a<50){let e=1-a/50;return{amount:-25*e*e,edge:"start"}}if(o<50){let e=1-o/50;return{amount:25*e*e,edge:"end"}}return{amount:0,edge:null}}(t-("x"===r?window.scrollX:window.scrollY),s,r);if(null===a){n5.delete(s),n2.delete(s);return}if(n5.get(s)!==a){if(!("start"===a&&i<0||"end"===a&&i>0))return;n5.set(s,a);let e="x"===r?s.scrollWidth-s.clientWidth:s.scrollHeight-s.clientHeight;n2.set(s,e)}if(n>0){let e=n2.get(s);if(("x"===r?s.scrollLeft:s.scrollTop)>=e)return}"x"===r?s.scrollLeft+=n:s.scrollTop+=n}(g.current,n[p],p,i[p]),s&&s(e,t)},onDragEnd:(e,t)=>{if(n3){let e=n4(n3,"y");e&&(n5.delete(e),n2.delete(e));let t=n4(n3,"x");t&&t!==e&&(n5.delete(t),n2.delete(t)),n3=null}n&&n(e,t)},onLayoutMeasure:e=>{f(r,e)},ref:l,ignoreStrict:!0,children:e})});e.s(["Group",()=>nG,"Item",()=>n8],90727);var n7=e.i(90727),n7=n7;function n9(e){return e.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ae(e){var t,r,i,s,n,a,o;let l=null==(t=e.meta)?void 0:t.title,u=null==(r=e.meta)?void 0:r.creator,c=null==(i=e.meta)?void 0:i.source,h=null==(n=null==(s=e.meta)?void 0:s.license)?void 0:n.url,d=at(e);return l||u||c||h||d?'<metadata xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"><rdf:RDF><rdf:Description>'+(l?`<dc:title>${n9(l)}</dc:title>`:"")+(u?`<dc:creator>${n9(u)}</dc:creator>`:"")+(c?`<dc:source xsi:type="dcterms:URI">${n9(null!=(o=null==(a=e.meta)?void 0:a.source)?o:"")}</dc:source>`:"")+(h?`<dcterms:license xsi:type="dcterms:URI">${n9(h)}</dcterms:license>`:"")+(d?`<dc:rights>${n9(d)}</dc:rights>`:"")+"</rdf:Description></rdf:RDF></metadata>":""}function at(e){var t,r,i,s,n,a,o,l,u,c,h,d,p,f,m;let g=(null==(t=e.meta)?void 0:t.title)?`${null==(r=e.meta)?void 0:r.title}`:"Design",y=`${null!=(s=null==(i=e.meta)?void 0:i.creator)?s:"Unknown"}`;(null==(n=e.meta)?void 0:n.source)&&(g+=` (${e.meta.source})`);let v="";return(null==(o=null==(a=e.meta)?void 0:a.license)?void 0:o.name)!=="MIT"&&(null==(l=e.meta)?void 0:l.creator)!=="DiceBear"&&(null==(u=e.meta)?void 0:u.title)&&(v+="Remix of "),v+=`${g} by ${y}`,(null==(h=null==(c=e.meta)?void 0:c.license)?void 0:h.name)&&(v+=`, licensed under ${null==(p=null==(d=e.meta)?void 0:d.license)?void 0:p.name}`,(null==(m=null==(f=e.meta)?void 0:f.license)?void 0:m.url)&&(v+=` (${e.meta.license.url})`)),v}function ar(e){return e^=e<<13,e^=e>>17,e^=e<<5}function ai(e=""){let t=function(e){let t=0;for(let r=0;r<e.length;r++)t=ar(t=(t<<5)-t+e.charCodeAt(r)|0);return t}(e=e.toString())||1,r=()=>t=ar(t),i=(e,t)=>Math.floor((r()- -0x80000000)/0xffffffff*(t+1-e)+e);return{seed:e,next:r,bool:(e=50)=>i(1,100)<=e,integer:(e,t)=>i(e,t),pick(e,t){var s;return 0===e.length?(r(),t):null!=(s=e[i(0,e.length-1)])?s:t},shuffle(e){let t=ai(r().toString()),i=[...e];for(let e=i.length-1;e>0;e--){let r=t.integer(0,e);[i[e],i[r]]=[i[r],i[e]]}return i},string(e,t="abcdefghijklmnopqrstuvwxyz1234567890"){let i=ai(r().toString()),s="";for(let r=0;r<e;r++)s+=t[i.integer(0,t.length-1)];return s}}}function as(e){let t=e.attributes.viewBox.split(" "),r=parseInt(t[0]),i=parseInt(t[1]);return{x:r,y:i,width:parseInt(t[2]),height:parseInt(t[3])}}e.s(["xml",()=>n9],67585),e.s(["text",()=>at,"xml",()=>ae],64005),e.i(64005),e.i(67585);let an={type:"object",$schema:"http://json-schema.org/draft-07/schema#",properties:{seed:{type:"string"},flip:{type:"boolean",default:!1},rotate:{type:"integer",minimum:0,maximum:360,default:0},scale:{type:"integer",minimum:0,maximum:200,default:100},radius:{type:"integer",minimum:0,maximum:50,default:0},size:{type:"integer",minimum:1},backgroundColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"}},backgroundType:{type:"array",items:{type:"string",enum:["solid","gradientLinear"]},default:["solid"]},backgroundRotation:{type:"array",items:{type:"integer",minimum:-360,maximum:360},default:[0,360]},translateX:{type:"integer",minimum:-100,maximum:100,default:0},translateY:{type:"integer",minimum:-100,maximum:100,default:0},clip:{type:"boolean",default:!0},randomizeIds:{type:"boolean",default:!1}}};function aa(e){var t;let r={},i=null!=(t=e.properties)?t:{};return Object.keys(i).forEach(e=>{let t=i[e];"object"==typeof t&&void 0!==t.default&&(Array.isArray(t.default)?r[e]=[...t.default]:"object"==typeof t.default?r[e]={...t.default}:r[e]=t.default)}),r}function ao(e){return"transparent"===e?e:`#${e}`}e.s([],45014),e.i(45014),e.s(["shape1",0,{g:(e,t)=>'<path d="M101.6 51.1a20 20 0 0 0-14.7-14.5q-3.9-1-8.5-1.1-10 0-17 4.8A30 30 0 0 0 50.9 54q-3.6 9-3.6 21.6 0 12.8 3.5 21.8 3.4 9 10.3 14a29 29 0 0 0 17.2 4.8q9 0 15-2.6 6-2.7 9-7.5t3-11.4l6.8.7H78.7v-28h64.5v20q0 20-8.4 34.1a56 56 0 0 1-23.2 21.6Q97 150.6 78 150.6q-21.3 0-37.3-9t-25-25.8-9-39.7a87 87 0 0 1 5.4-32 67 67 0 0 1 38-38Q63 1 77.6 1q12.9 0 24 3.7 11.1 3.6 19.7 10.4a50 50 0 0 1 20.2 36z" fill="white"/>',r:(e,t)=>'<path d="M17.6 148.6V3h62.8q16.2 0 28.3 6 12 5.8 18.9 16.9a50 50 0 0 1 6.7 26.5q0 15.7-7 26.4A43 43 0 0 1 108 95q-12.5 5.5-29 5.5H41.3V69.9H71q7 0 11.8-1.7a15 15 0 0 0 7.6-5.6 17 17 0 0 0 2.7-10q0-6.3-2.7-10.2a15 15 0 0 0-7.6-5.8q-4.9-2-11.8-2H57v114zm85.2-66.8 36.4 66.8h-43L60.9 81.8z" fill="white"/>',a:(e,t)=>'<path d="M42.6 148.6H0L48 3h54l48 145.5h-42.7L75.5 43.2h-1.1zm-8-57.4h80.1v29.5h-80z" fill="white"/>',d:(e,t)=>'<path d="M67 148.6H11V3h55.4q22.5 0 38.8 8.7a60 60 0 0 1 25.3 25q9 16.4 9 39 0 22.8-9 39.1a61 61 0 0 1-25 25 81 81 0 0 1-38.5 8.7M50.5 115h15a44 44 0 0 0 18.5-3.4q7.6-3.6 11.6-12t4-23.8q0-15-4-23.7a24 24 0 0 0-12-12 47 47 0 0 0-19.2-3.5H50.5z" fill="white"/>',i:(e,t)=>'<path d="M94.8 3.1v145.5H55.3V3z" fill="white"/>',e:(e,t)=>'<path d="M22.2 148.6V3H127v32H61.7v25h59.9v31.8h-60v25h65.1v31.9z" fill="white"/>',n:(e,t)=>'<path d="M138 3.1v145.5h-33L52.5 72h-1v76.5H12.2V3h33.5l51.7 76.1h1.2v-76z" fill="white"/>',t:(e,t)=>'<path d="M11.7 35V3h126.5v32H94.4v113.7h-39V34.9z" fill="white"/>'},"shape2",0,{g:(e,t)=>'<path d="M101.6 51.2a20 20 0 0 0-14.7-14.5q-3.9-1-8.5-1-10 0-17 4.7A30 30 0 0 0 50.9 54q-3.6 9-3.6 21.6 0 12.8 3.5 21.8 3.4 9 10.3 14a29 29 0 0 0 17.2 4.8q9 0 15-2.6 6-2.7 9-7.5t3-11.4l6.8.7H78.7v-28h64.5v20q0 20-8.4 34.1a56 56 0 0 1-23.2 21.6Q97 150.7 78 150.7q-21.3 0-37.3-9t-25-25.8q-9-16.5-9-39.7a87 87 0 0 1 5.4-32 67 67 0 0 1 38-38q12.9-5 27.6-5 12.9 0 24 3.7 11.1 3.6 19.7 10.4a50 50 0 0 1 20.2 36z" fill="white"/>',r:(e,t)=>'<path d="M17.6 148.7V3.2h62.8q16.2 0 28.3 6 12 5.8 18.9 16.9a50 50 0 0 1 6.7 26.6q0 15.6-7 26.3A43 43 0 0 1 108 95.2q-12.5 5.5-29 5.5H41.3V70H71q7 0 11.8-1.7a15 15 0 0 0 7.6-5.6 17 17 0 0 0 2.7-10q0-6.3-2.7-10.2a15 15 0 0 0-7.6-5.8q-4.9-2-11.8-2H57v114zm85.2-66.8 36.4 66.8h-43L60.9 81.9z" fill="white"/>',a:(e,t)=>'<path d="M42.6 148.7H0L48 3.2h54l48 145.5h-42.7L75.5 43.3h-1.1zm-8-57.4h80.1v29.5h-80z" fill="white"/>',d:(e,t)=>'<path d="M67 148.7H11V3.2h55.4q22.5 0 38.8 8.8a60 60 0 0 1 25.3 25q9 16.2 9 39 0 22.6-9 39a61 61 0 0 1-25 25 81 81 0 0 1-38.5 8.7m-16.5-33.5h15a44 44 0 0 0 18.5-3.5q7.6-3.5 11.6-12t4-23.8q0-15-4-23.7a24 24 0 0 0-12-12 47 47 0 0 0-19.2-3.5H50.5z" fill="white"/>',i:(e,t)=>'<path d="M94.8 3.2v145.5H55.3V3.2z" fill="white"/>',e:(e,t)=>'<path d="M22.2 148.7V3.2H127V35H61.7v25h59.9v32h-60v25h65.1v31.8z" fill="white"/>',n:(e,t)=>'<path d="M138 3.2v145.5h-33L52.5 72.3h-1v76.4H12.2V3.2h33.5l51.7 76.2h1.2V3.2z" fill="white"/>',t:(e,t)=>'<path d="M11.7 35V3.2h126.5V35H94.4v113.7h-39V35z" fill="white"/>'}],32889);var al=e.i(32889);function au({prng:e,group:t,width:r,height:i,values:s=[],rotation:n,offsetX:a,offsetY:o}){let l=e.pick(s),u=e.integer(Math.min(...n),Math.max(...n)),c=e.integer(Math.min(...a),Math.max(...a)),h=e.integer(Math.min(...o),Math.max(...o));return l&&al[t][l]?{name:l,value(e,s){var n,a,o;let u=al[t][l](e,s);return(this.rotation||this.offsetX||this.offsetY)&&(u=`<g transform="translate(${null!=(n=this.offsetX)?n:0}, ${null!=(a=this.offsetY)?a:0}) rotate(${null!=(o=this.rotation)?o:0} ${r/2} ${i/2})">${u}</g>`),u},rotation:u,offsetX:c,offsetY:h}:void 0}let ac={title:"Glass",creator:"DiceBear",source:"https://www.dicebear.com",homepage:"https://www.dicebear.com",license:{name:"CC0 1.0",url:"https://creativecommons.org/publicdomain/zero/1.0/"}},ah=({prng:e,options:t})=>{var r,i,s,n;let a=function({prng:e,options:t}){var r,i,s,n,a,o;return{shape2:au({prng:e,group:"shape2",values:t.shape2,width:150,height:150,rotation:(null==(r=t.shape2Rotation)?void 0:r.length)?t.shape2Rotation:[0],offsetX:(null==(i=t.shape2OffsetX)?void 0:i.length)?t.shape2OffsetX:[0],offsetY:(null==(s=t.shape2OffsetY)?void 0:s.length)?t.shape2OffsetY:[0]}),shape1:au({prng:e,group:"shape1",values:t.shape1,width:150,height:150,rotation:(null==(n=t.shape1Rotation)?void 0:n.length)?t.shape1Rotation:[0],offsetX:(null==(a=t.shape1OffsetX)?void 0:a.length)?t.shape1OffsetX:[0],offsetY:(null==(o=t.shape1OffsetY)?void 0:o.length)?t.shape1OffsetY:[0]})}}({prng:e,options:t}),o=function({prng:e,options:t}){return{}}({prng:e,options:t});return{attributes:{viewBox:"0 0 100 100",fill:"none","shape-rendering":"auto"},body:`<g style="mix-blend-mode:screen" opacity="0.6" filter="url(#dicebearGlass-a)"><g transform="translate(-25 -25)">${null!=(i=null==(r=a.shape2)?void 0:r.value(a,o))?i:""}</g></g><g style="mix-blend-mode:screen" opacity="0.6" filter="url(#dicebearGlass-b)"><g transform="translate(-25 -25)">${null!=(n=null==(s=a.shape1)?void 0:s.value(a,o))?n:""}</g></g><defs><filter id="dicebearGlass-a" x="-57" y="-57" width="214" height="214" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="16" result="effect1_foregroundBlur_25_7"/></filter><filter id="dicebearGlass-b" x="-57" y="-57" width="214" height="214" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feBlend in="SourceGraphic" in2="BackgroundImageFix" result="shape"/><feGaussianBlur stdDeviation="16" result="effect1_foregroundBlur_25_7"/></filter></defs>`,extra:()=>({...Object.entries(a).reduce((e,[t,r])=>(e[t]=null==r?void 0:r.name,e),{}),...Object.entries(o).reduce((e,[t,r])=>(e[`${t}Color`]=r,e),{})})}};e.s(["create",0,ah,"meta",0,ac],67930),e.i(67930),e.s(["create",0,ah,"meta",0,ac,"schema",0,{$schema:"http://json-schema.org/draft-07/schema#",properties:{backgroundColor:{type:"array",items:{type:"string",pattern:"^(transparent|[a-fA-F0-9]{6})$"},default:["eb4747","eb6247","eb7e47","eb9947","ebb447","ebd047","ebeb47","d0eb47","b4eb47","99eb47","7eeb47","62eb47","47eb47","47eb62","47eb7e","47eb99","47ebb4","47ebd0","47ebeb","47d0eb","47b4eb","4799eb","477eeb","4762eb","4747eb","6247eb","7e47eb","9947eb","b447eb","d047eb","eb47eb","eb47d0","eb4799","eb477e","eb4762"]},shape1:{type:"array",items:{type:"string",enum:["g","r","a","d","i","e","n","t"]},default:["g","r","a","d","i","e","n","t"]},shape1OffsetX:{type:"array",items:{type:"integer",minimum:-80,maximum:80},maxItems:2,default:[-80,80]},shape1OffsetY:{type:"array",items:{type:"integer",minimum:-80,maximum:80},maxItems:2,default:[-80,80]},shape1Rotation:{type:"array",items:{type:"integer",minimum:-180,maximum:180},maxItems:2,default:[-180,180]},shape2:{type:"array",items:{type:"string",enum:["g","r","a","d","i","e","n","t"]},default:["g","r","a","d","i","e","n","t"]},shape2OffsetX:{type:"array",items:{type:"integer",minimum:-80,maximum:80},maxItems:2,default:[-80,80]},shape2OffsetY:{type:"array",items:{type:"integer",minimum:-80,maximum:80},maxItems:2,default:[-80,80]},shape2Rotation:{type:"array",items:{type:"integer",minimum:-160,maximum:160},maxItems:2,default:[-160,160]}}}],1016);var ad=e.i(1016),ad=ad;let ap="hasClosedAnnouncement_v5";function af(){let[e,t]=(0,C.useState)(!1);return(0,C.useEffect)(()=>{localStorage.getItem(ap)||t(!0)},[]),(0,A.jsx)(nK,{children:e&&(0,A.jsx)(nD.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",padding:"20px"},children:(0,A.jsxs)(nD.div,{initial:{scale:.95,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:10},className:"glass",style:{width:"100%",maxWidth:"400px",padding:"24px",position:"relative",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,A.jsxs)("div",{className:"title",style:{display:"flex",alignItems:"center",gap:"12px",fontWeight:700,fontSize:"18px",color:"var(--accent)"},children:[(0,A.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,A.jsx)("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}),(0,A.jsx)("line",{x1:"12",y1:"9",x2:"12",y2:"13"}),(0,A.jsx)("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),(0,A.jsx)("span",{children:""})]}),(0,A.jsxs)("div",{style:{color:"var(--text)",lineHeight:"1.6",fontSize:"15px"},children:["",(0,A.jsx)("p",{children:"1. "}),(0,A.jsx)("p",{children:"2. "}),(0,A.jsx)("p",{children:"3. PC "}),(0,A.jsx)("p",{children:"4. "}),"",(0,A.jsx)("p",{children:"1. "}),(0,A.jsx)("p",{children:"2. "}),"UI"]}),(0,A.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"8px"},children:(0,A.jsx)("button",{className:"button",onClick:()=>{localStorage.setItem(ap,"true"),t(!1)},style:{width:"100%",justifyContent:"center",display:"flex",alignItems:"center"},children:""})})]})})})}let am={src:e.i(66314).default,width:400,height:398,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwByTBg26LBOCqDB46c49qAP/9k="},ag={src:e.i(94965).default,width:400,height:403,blurWidth:8,blurHeight:8,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/wAARCAAIAAgDAREAAhEBAxEB/9sAQwAKBwcIBwYKCAgICwoKCw4YEA4NDQ4dFRYRGCMfJSQiHyIhJis3LyYpNCkhIjBBMTQ5Oz4+PiUuRElDPEg3PT47/9sAQwEKCwsODQ4cEBAcOygiKDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwCbbC0GTIyNuysYBZcfyNAH/9k="},ay={src:e.i(32643).default,width:200,height:200,blurWidth:0,blurHeight:0};var av=e.i(31354);class aw extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class ab extends aw{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ax extends aw{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class aj extends aw{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}(s=m||(m={})).Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2";class aS{constructor(t,{headers:r={},customFetch:i,region:s=m.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=(t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(62387).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)})(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return(0,av.__awaiter)(this,arguments,void 0,function*(e,t={}){var r;try{let i,{headers:s,method:n,body:a,signal:o}=t,l={},{region:u}=t;u||(u=this.region);let c=new URL(`${this.url}/${e}`);u&&"any"!==u&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u)),a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?"u">typeof Blob&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",i=a):"string"==typeof a?(l["Content-Type"]="text/plain",i=a):"u">typeof FormData&&a instanceof FormData?i=a:(l["Content-Type"]="application/json",i=JSON.stringify(a)):i=a;let h=yield this.fetch(c.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:i,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new ab(e)}),d=h.headers.get("x-relay-error");if(d&&"true"===d)throw new ax(h);if(!h.ok)throw new aj(h);let p=(null!=(r=h.headers.get("Content-Type"))?r:"text/plain").split(";")[0].trim();return{data:"application/json"===p?yield h.json():"application/octet-stream"===p||"application/pdf"===p?yield h.blob():"text/event-stream"===p?h:"multipart/form-data"===p?yield h.formData():yield h.text(),error:null,response:h}}catch(e){if(e instanceof Error&&"AbortError"===e.name)return{data:null,error:new ab(e)};return{data:null,error:e,response:e instanceof aj||e instanceof ax?e.context:void 0}}})}}var ak=e.i(65635);let{PostgrestClient:a_,PostgrestQueryBuilder:aE,PostgrestFilterBuilder:aT,PostgrestTransformBuilder:aA,PostgrestBuilder:aC,PostgrestError:aO}=ak.default||ak,aN=class{static detectEnvironment(){var t;if("u">typeof WebSocket)return{type:"native",constructor:WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if(void 0!==e.g.WebSocket)return{type:"native",constructor:e.g.WebSocket};if("u">typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("u">typeof globalThis&&globalThis.EdgeRuntime||"u">typeof navigator&&(null==(t=navigator.userAgent)?void 0:t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(void 0!==e_.default){let e=e_.default.versions;if(e&&e.node){let t=parseInt(e.node.replace(/^v/,"").split(".")[0]);return t>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{let e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}};(n=g||(g={}))[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",(a=y||(y={})).closed="closed",a.errored="errored",a.joined="joined",a.joining="joining",a.leaving="leaving",(o=v||(v={})).close="phx_close",o.error="phx_error",o.join="phx_join",o.reply="phx_reply",o.leave="phx_leave",o.access_token="access_token",(w||(w={})).websocket="websocket",(l=b||(b={})).Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed";class aP{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):"string"==typeof e?t(JSON.parse(e)):t({})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),n=this.HEADER_LENGTH+2,a=r.decode(e.slice(n,n+i));n+=i;let o=r.decode(e.slice(n,n+s));return n+=s,{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}}class aI{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(u=x||(x={})).abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange";let aR=(e,t,r={})=>{var i;let s=null!=(i=r.skipTypes)?i:[];return t?Object.keys(t).reduce((r,i)=>(r[i]=a$(i,e,t,s),r),{}):{}},a$=(e,t,r,i)=>{let s=t.find(t=>t.name===e),n=null==s?void 0:s.type,a=r[e];return n&&!i.includes(n)?aB(n,a):aM(a)},aB=(e,t)=>{if("_"===e.charAt(0))return aU(t,e.slice(1,e.length));switch(e){case x.bool:return aD(t);case x.float4:case x.float8:case x.int2:case x.int4:case x.int8:case x.numeric:case x.oid:return aL(t);case x.json:case x.jsonb:return az(t);case x.timestamp:return aV(t);case x.abstime:case x.date:case x.daterange:case x.int4range:case x.int8range:case x.money:case x.reltime:case x.text:case x.time:case x.timestamptz:case x.timetz:case x.tsrange:case x.tstzrange:default:return aM(t)}},aM=e=>e,aD=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},aL=e=>{if("string"==typeof e){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},az=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(e){console.log(`JSON parse error: ${e}`)}return e},aU=(e,t)=>{if("string"!=typeof e)return e;let r=e.length-1,i=e[r];if("{"===e[0]&&"}"===i){let i,s=e.slice(1,r);try{i=JSON.parse("["+s+"]")}catch(e){i=s?s.split(","):[]}return i.map(e=>aB(t,e))}return e},aV=e=>"string"==typeof e?e.replace(" ","T"):e,aF=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class aW{constructor(e,t,r={},i=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null==(r=this.receivedResp)?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(c=j||(j={})).SYNC="sync",c.JOIN="join",c.LEAVE="leave";class aq{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=aq.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=aq.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],i()}),this.channel._on(r.diff,{},e=>{let{onJoin:t,onLeave:r,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=aq.syncDiff(this.state,e,t,r),i())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(s,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{let r=s[e];if(r){let i=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),n=t.filter(e=>0>s.indexOf(e.presence_ref)),l=r.filter(e=>0>i.indexOf(e.presence_ref));n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(s,{joins:a,leaves:o},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(t,i)=>{var s;let n=null!=(s=e[t])?s:[];if(e[t]=this.cloneDeep(i),n.length>0){let r=e[t].map(e=>e.presence_ref),i=n.filter(e=>0>r.indexOf(e.presence_ref));e[t].unshift(...i)}r(t,n,i)}),this.map(n,(t,r)=>{let s=e[t];if(!s)return;let n=r.map(e=>e.presence_ref);s=s.filter(e=>0>n.indexOf(e.presence_ref)),e[t]=s,i(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return Object.getOwnPropertyNames(e=this.cloneDeep(e)).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(h=S||(S={})).ALL="*",h.INSERT="INSERT",h.UPDATE="UPDATE",h.DELETE="DELETE",(d=k||(k={})).BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system",(p=_||(_={})).SUBSCRIBED="SUBSCRIBED",p.TIMED_OUT="TIMED_OUT",p.CLOSED="CLOSED",p.CHANNEL_ERROR="CHANNEL_ERROR";class aH{constructor(e,t={config:{}},r){var i,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=y.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new aW(this,v.join,this.params,this.timeout),this.rejoinTimer=new aI(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=y.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=y.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=y.errored,this.rejoinTimer.scheduleTimeout())}),this._on(v.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new aq(this),this.broadcastEndpointURL=aF(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null==(s=null==(i=this.params.config)?void 0:i.broadcast)?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==y.closed){let{config:{broadcast:n,presence:a,private:o}}=this.params,l=null!=(i=null==(r=this.bindings.postgres_changes)?void 0:r.map(e=>e.filter))?i:[],u=!!this.bindings[k.PRESENCE]&&this.bindings[k.PRESENCE].length>0||(null==(s=this.params.config.presence)?void 0:s.enabled)===!0,c={},h={broadcast:n,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(_.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(_.CLOSED)),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0===t){null==e||e(_.SUBSCRIBED);return}{let i=this.bindings.postgres_changes,s=null!=(r=null==i?void 0:i.length)?r:0,n=[];for(let r=0;r<s;r++){let s=i[r],{filter:{event:a,schema:o,table:l,filter:u}}=s,c=t&&t[r];if(c&&c.event===a&&c.schema===o&&c.table===l&&c.filter===u)n.push(Object.assign(Object.assign({},s),{id:c.id}));else{this.unsubscribe(),this.state=y.errored,null==e||e(_.CHANNEL_ERROR,Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=n,e&&e(_.SUBSCRIBED);return}}).receive("error",t=>{this.state=y.errored,null==e||e(_.CHANNEL_ERROR,Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(_.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===y.joined&&e===k.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var i;let s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");let n={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,n,null!=(i=r.timeout)?i:this.timeout);if(202===a.status)return{success:!0};let o=a.statusText;try{let e=await a.json();o=e.error||e.message||o}catch(e){}return Promise.reject(Error(o))}async send(e,t={}){var r,i;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var i,s,n;let a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null==(n=null==(s=null==(i=this.params)?void 0:i.config)?void 0:s.broadcast)?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:s,payload:n}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:n,private:this.private}]})};try{let e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!=(r=t.timeout)?r:this.timeout);return await (null==(i=e.body)?void 0:i.cancel()),e.ok?"ok":"error"}catch(e){if("AbortError"===e.name)return"timed out";return"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=y.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(v.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{(r=new aW(this,v.leave,{},e)).receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=y.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){let i=new AbortController,s=setTimeout(()=>i.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new aW(this,e,t,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:u}=v;if(r&&[a,o,l,u].indexOf(n)>=0&&r!==this._joinRef())return;let c=this._onMessage(n,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null==(i=this.bindings.postgres_changes)||i.filter(e=>{var t,r,i;return(null==(t=e.filter)?void 0:t.event)==="*"||(null==(i=null==(r=e.filter)?void 0:r.event)?void 0:i.toLocaleLowerCase())===n}).map(e=>e.callback(c,r)):null==(s=this.bindings[n])||s.filter(e=>{var r,i,s,a,o,l;if(!["broadcast","presence","postgres_changes"].includes(n))return e.type.toLocaleLowerCase()===n;if("id"in e){let n=e.id,a=null==(r=e.filter)?void 0:r.event;return n&&(null==(i=t.ids)?void 0:i.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null==(s=t.data)?void 0:s.type.toLocaleLowerCase()))}{let r=null==(o=null==(a=null==e?void 0:e.filter)?void 0:a.event)?void 0:o.toLocaleLowerCase();return"*"===r||r===(null==(l=null==t?void 0:t.event)?void 0:l.toLocaleLowerCase())}}).map(e=>{if("object"==typeof c&&"ids"in c){let e=c.data,{schema:t,table:r,commit_timestamp:i,type:s,errors:n}=e;c=Object.assign(Object.assign({},{schema:t,table:r,commit_timestamp:i,eventType:s,new:{},old:{},errors:n}),this._getPayloadRecords(e))}e.callback(c,r)})}_isClosed(){return this.state===y.closed}_isJoined(){return this.state===y.joined}_isJoining(){return this.state===y.joining}_isLeaving(){return this.state===y.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var i;return!((null==(i=e.type)?void 0:i.toLocaleLowerCase())===r&&aH.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(v.close,{},e)}_onError(e){this._on(v.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=y.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return("INSERT"===e.type||"UPDATE"===e.type)&&(t.new=aR(e.columns,e.record)),("UPDATE"===e.type||"DELETE"===e.type)&&(t.old=aR(e.columns,e.old_record)),t}}let aK=()=>{},aJ=[1e3,2e3,5e3,1e4],aG=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class aY{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.transport=null,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=aK,this.ref=0,this.reconnectTimer=null,this.logger=aK,this.conn=null,this.sendBuffer=[],this.serializer=new aP,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(62387).then(({default:e})=>e(...t)).catch(e=>{throw Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>r(...e)},!(null==(i=null==r?void 0:r.params)?void 0:i.apikey))throw Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${w.websocket}`,this.httpEndpoint=aF(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==r?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=aN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let e=t.message;if(e.includes("Node.js"))throw Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`);throw Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){let t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){let e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case g.connecting:return b.Connecting;case g.open:return b.Open;case g.closing:return b.Closing;default:return b.Closed}}isConnected(){return this.connectionState()===b.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){let r=`realtime:${e}`,i=this.getChannels().find(e=>e.topic===r);if(i)return i;{let r=new aH(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){let{topic:t,event:r,payload:i,ref:s}=e,n=()=>{this.encode(e,e=>{var t;null==(t=this.conn)||t.send(e)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,null==(e=this.conn)||e.close(1e3,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||null==(e=this.reconnectTimer)||e.scheduleTimeout()},100);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(e){this.log("error","error in heartbeat callback",e)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);let{topic:t,event:r,payload:i,ref:s}=e,n=s?`(${s})`:"",a=i.status||"";this.log("receive",`${a} ${t} ${r} ${n}`.trim(),i),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,i,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null==(t=this.reconnectTimer)||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null==(t=this.reconnectTimer)||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(v.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let e=new Blob([aG],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:"realtime-js/2.78.0"}),e.joinedOnce&&e._isJoined()&&e._push(v.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(t){this.log("error",`error in ${e} callback`,t)}})}catch(t){this.log("error",`error triggering ${e} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new aI(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},10)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,i,s,n,a,o,l,u;if(this.transport=null!=(t=null==e?void 0:e.transport)?t:null,this.timeout=null!=(r=null==e?void 0:e.timeout)?r:1e4,this.heartbeatIntervalMs=null!=(i=null==e?void 0:e.heartbeatIntervalMs)?i:25e3,this.worker=null!=(s=null==e?void 0:e.worker)&&s,this.accessToken=null!=(n=null==e?void 0:e.accessToken)?n:null,this.heartbeatCallback=null!=(a=null==e?void 0:e.heartbeatCallback)?a:aK,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!=(o=null==e?void 0:e.reconnectAfterMs)?o:e=>aJ[e-1]||1e4,this.encode=null!=(l=null==e?void 0:e.encode)?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!=(u=null==e?void 0:e.decode)?u:this.serializer.decode.bind(this.serializer),this.worker){if("u">typeof window&&!window.Worker)throw Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}var aX=e.i(12699);class aQ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function aZ(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class a0 extends aQ{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class a1 extends aQ{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}let a2=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(62387).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},a5=e=>{if(Array.isArray(e))return e.map(e=>a5(e));if("function"==typeof e||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([e,r])=>{t[e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""))]=a5(r)}),t},a3=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null==(t=e.error)?void 0:t.message)||JSON.stringify(e)};function a4(t,r,i,s,n,a){return(0,av.__awaiter)(this,void 0,void 0,function*(){return new Promise((o,l)=>{let u;t(i,(u={method:r,headers:(null==s?void 0:s.headers)||{}},"GET"===r||!a?u:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(a)?(u.headers=Object.assign({"Content-Type":"application/json"},null==s?void 0:s.headers),u.body=JSON.stringify(a)):u.body=a,(null==s?void 0:s.duplex)&&(u.duplex=s.duplex),Object.assign(Object.assign({},u),n)))).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(t=>(0,av.__awaiter)(void 0,void 0,void 0,function*(){t instanceof(yield(0,av.__awaiter)(void 0,void 0,void 0,function*(){return"u"<typeof Response?(yield e.A(62387)).Response:Response}))&&!(null==s?void 0:s.noResolveJson)?t.json().then(e=>{let r=t.status||500,i=(null==e?void 0:e.statusCode)||r+"";l(new a0(a3(e),r,i))}).catch(e=>{l(new a1(a3(e),e))}):l(new a1(a3(t),t))}))})})}function a6(e,t,r,i){return(0,av.__awaiter)(this,void 0,void 0,function*(){return a4(e,"GET",t,r,i)})}function a8(e,t,r,i,s){return(0,av.__awaiter)(this,void 0,void 0,function*(){return a4(e,"POST",t,i,s,r)})}function a7(e,t,r,i,s){return(0,av.__awaiter)(this,void 0,void 0,function*(){return a4(e,"PUT",t,i,s,r)})}function a9(e,t,r,i,s){return(0,av.__awaiter)(this,void 0,void 0,function*(){return a4(e,"DELETE",t,i,s,r)})}class oe{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}}E=Symbol.toStringTag;let ot=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[E]="BlobDownloadBuilder",this.promise=null}asStream(){return new oe(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}},or={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},oi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class os{constructor(e,t={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=a2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,i){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let s,n=Object.assign(Object.assign({},oi),i),a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)}),o=n.metadata;"u">typeof Blob&&r instanceof Blob?((s=new FormData).append("cacheControl",n.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r)):"u">typeof FormData&&r instanceof FormData?((s=r).append("cacheControl",n.cacheControl),o&&s.append("metadata",this.encodeMetadata(o))):(s=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==i?void 0:i.headers)&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(t),u=this._getFinalPath(l),c=yield("PUT"==e?a7:a8)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:c.Id,fullPath:c.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}upload(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return(0,av.__awaiter)(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),n=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e,t=Object.assign({upsert:oi.upsert},i),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"u">typeof Blob&&r instanceof Blob?((e=new FormData).append("cacheControl",t.cacheControl),e.append("",r)):"u">typeof FormData&&r instanceof FormData?(e=r).append("cacheControl",t.cacheControl):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);let o=yield a7(this.fetch,a.toString(),e,{headers:n});return{data:{path:s,fullPath:o.Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}createSignedUploadUrl(e,t){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(i["x-upsert"]="true");let s=yield a8(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),n=new URL(this.url+s.url),a=n.searchParams.get("token");if(!a)throw new aQ("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}update(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a8(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}copy(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:{path:(yield a8(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}createSignedUrl(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield a8(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers}),n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s={signedUrl:encodeURI(`${this.url}${s.signedURL}${n}`)},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}createSignedUrls(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let i=yield a8(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:i.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}download(e,t){let r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=i?`?${i}`:"",n=this._getFinalPath(e);return new ot(()=>a6(this.fetch,`${this.url}/${r}/${n}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let e=yield a6(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:a5(e),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}exists(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield function(e,t,r,i){return(0,av.__awaiter)(this,void 0,void 0,function*(){return a4(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),void 0)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e)&&e instanceof a1){let t=e.originalError;if([400,404].includes(null==t?void 0:t.status))return{data:!1,error:e}}throw e}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&i.push(s);let n=void 0!==(null==t?void 0:t.transform),a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&i.push(a);let o=i.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n?"render/image":"object"}/public/${r}${o}`)}}}remove(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a9(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}list(e,t,r){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},or),t),{prefix:e||""});return{data:yield a8(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}listV2(e,t){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let r=Object.assign({},e);return{data:yield a8(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return void 0!==aX.Buffer?aX.Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}let on="2.78.0",oa={"X-Client-Info":`storage-js/${on}`};class oo{constructor(e,t={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);(null==i?void 0:i.useNewHostname)&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oa),t),this.fetch=a2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let t=this.listBucketOptionsToQueryString(e);return{data:yield a6(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a6(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}createBucket(e){return(0,av.__awaiter)(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield a8(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}updateBucket(e,t){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a7(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}emptyBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a8(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a9(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class ol{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oa),t),this.fetch=a2(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a8(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}listBuckets(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{let t=new URLSearchParams;(null==e?void 0:e.limit)!==void 0&&t.set("limit",e.limit.toString()),(null==e?void 0:e.offset)!==void 0&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);let r=t.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield a6(this.fetch,i,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield a9(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(aZ(e))return{data:null,error:e};throw e}})}}let ou={"X-Client-Info":`storage-js/${on}`,"Content-Type":"application/json"};class oc extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function oh(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class od extends oc{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class op extends oc{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}(f=T||(T={})).InternalError="InternalError",f.S3VectorConflictException="S3VectorConflictException",f.S3VectorNotFoundException="S3VectorNotFoundException",f.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",f.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",f.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";let of=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(62387).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},om=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e);function og(e,t,r,i,s){return(0,av.__awaiter)(this,void 0,void 0,function*(){return function(e,t,r,i,s,n){return(0,av.__awaiter)(this,void 0,void 0,function*(){return new Promise((a,o)=>{let l;e(r,(l={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t||!n?l:((e=>{if("object"!=typeof e||null===e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(n)?(l.headers=Object.assign({"Content-Type":"application/json"},null==i?void 0:i.headers),l.body=JSON.stringify(n)):l.body=n,Object.assign(Object.assign({},l),s)))).then(e=>{if(!e.ok)throw e;if(null==i?void 0:i.noResolveJson)return e;let t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>a(e)).catch(e=>(0,av.__awaiter)(void 0,void 0,void 0,function*(){if(!(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status)||(null==i?void 0:i.noResolveJson))o(new op(om(e),e));else{let t=e.status||500;"function"==typeof e.json?e.json().then(e=>{let r=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||t+"";o(new od(om(e),t,r))}).catch(()=>{o(new od(e.statusText||`HTTP ${t} error`,t,t+""))}):o(new od(e.statusText||`HTTP ${t} error`,t,t+""))}}))})})}(e,"POST",t,i,s,r)})}class oy{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ou),t),this.fetch=of(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield og(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}getIndex(e,t){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield og(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}listIndexes(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield og(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}deleteIndex(e,t){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield og(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}}class ov{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ou),t),this.fetch=of(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw Error("Vector batch size must be between 1 and 500 items");return{data:(yield og(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}getVectors(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield og(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}listVectors(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield og(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}queryVectors(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield og(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}deleteVectors(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw Error("Keys batch size must be between 1 and 500 items");return{data:(yield og(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}}class ow{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ou),t),this.fetch=of(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield og(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}getBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:yield og(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}listBuckets(){return(0,av.__awaiter)(this,arguments,void 0,function*(e={}){try{return{data:yield og(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}deleteBucket(e){return(0,av.__awaiter)(this,void 0,void 0,function*(){try{return{data:(yield og(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(oh(e))return{data:null,error:e};throw e}})}}class ob extends ow{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ox(this.url,this.headers,e,this.fetch)}}class ox extends oy{constructor(e,t,r,i){super(e,t,i),this.vectorBucketName=r}createIndex(e){let t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){let e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return(0,av.__awaiter)(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){let t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){let t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new oj(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class oj extends ov{constructor(e,t,r,i,s){super(e,t,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){let t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){let t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){let e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return(0,av.__awaiter)(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){let t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){let t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return(0,av.__awaiter)(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class oS extends oo{constructor(e,t={},r,i){super(e,t,r,i)}from(e){return new os(this.url,this.headers,e,this.fetch)}get vectors(){return new ob(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new ol(this.url+"/iceberg",this.headers,this.fetch)}}let ok="";ok="u">typeof Deno?"deno":"u">typeof document?"web":"u">typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";let o_={headers:{"X-Client-Info":`supabase-js-${ok}/2.78.0`}},oE={schema:"public"},oT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oA={};var oC=e.i(90790);let oO="2.78.0",oN={"X-Client-Info":`gotrue-js/${oO}`},oP="X-Supabase-Api-Version",oI={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},oR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class o$ extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function oB(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class oM extends o${constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class oD extends o${constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class oL extends o${constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}}class oz extends oL{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class oU extends oL{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class oV extends oL{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class oF extends oL{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oW extends oL{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class oq extends oL{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function oH(e){return oB(e)&&"AuthRetryableFetchError"===e.name}class oK extends oL{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class oJ extends oL{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}let oG="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),oY=" 	\n\r=".split(""),oX=(()=>{let e=Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<oY.length;t+=1)e[oY[t].charCodeAt(0)]=-2;for(let t=0;t<oG.length;t+=1)e[oG[t].charCodeAt(0)]=t;return e})();function oQ(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;)r(oG[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6;else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;)r(oG[t.queue>>t.queuedBits-6&63]),t.queuedBits-=6}function oZ(e,t,r){let i=oX[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else if(-2===i)return;else throw Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}function o0(e){let t=[],r=e=>{t.push(String.fromCodePoint(e))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return r(e);for(let r=1;r<6;r+=1)if((e>>7-r&1)==0){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else if(4===t.utf8seq)t.codepoint=7&e;else throw Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,i,r)};for(let t=0;t<e.length;t+=1)oZ(e.charCodeAt(t),s,n);return t.join("")}function o1(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};for(let t=0;t<e.length;t+=1)oZ(e.charCodeAt(t),r,i);return new Uint8Array(t)}function o2(e){let t=[],r={queue:0,queuedBits:0},i=e=>{t.push(e)};return e.forEach(e=>oQ(e,r,i)),oQ(null,r,i),t.join("")}let o5=()=>"u">typeof window&&"u">typeof document,o3={tested:!1,writable:!1},o4=()=>{if(!o5())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(o3.tested)return o3.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),o3.tested=!0,o3.writable=!0}catch(e){o3.tested=!0,o3.writable=!1}return o3.writable},o6=t=>{let r;return r=t||("u"<typeof fetch?(...t)=>e.A(62387).then(({default:e})=>e(...t)):fetch),(...e)=>r(...e)},o8=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},o7=async(e,t)=>{let r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}},o9=async(e,t)=>{await e.removeItem(t)};class le{constructor(){this.promise=new le.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function lt(e){let t=e.split(".");if(3!==t.length)throw new oJ("Invalid JWT structure");for(let e=0;e<t.length;e++)if(!oR.test(t[e]))throw new oJ("JWT not in base64url format");return{header:JSON.parse(o0(t[0])),payload:JSON.parse(o0(t[1])),signature:o1(t[2]),raw:{header:t[0],payload:t[1]}}}async function lr(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function li(e){return("0"+e.toString(16)).substr(-2)}async function ls(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>String.fromCharCode(e)).join("")}async function ln(e){return"u">typeof crypto&&void 0!==crypto.subtle&&"u">typeof TextEncoder?btoa(await ls(e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):(console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e)}async function la(e,t,r=!1){let i=function(){let e=new Uint32Array(56);if("u"<typeof crypto){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,r="";for(let i=0;i<56;i++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,li).join("")}(),s=i;r&&(s+="/PASSWORD_RECOVERY"),await o8(e,`${t}-code-verifier`,s);let n=await ln(i),a=i===n?"plain":"s256";return[n,a]}le.promiseConstructor=Promise;let lo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i,ll=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lu(e){if(!ll.test(e))throw Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function lc(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){let e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function lh(e){return JSON.parse(JSON.stringify(e))}let ld=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),lp=[502,503,504];async function lf(e){var t;let r,i;if(!("object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json))throw new oq(ld(e),0);if(lp.includes(e.status))throw new oq(ld(e),e.status);try{r=await e.json()}catch(e){throw new oD(ld(e),e)}let s=function(e){let t=e.headers.get(oP);if(!t||!t.match(lo))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(e){return null}}(e);if(s&&s.getTime()>=oI["2024-01-01"].timestamp&&"object"==typeof r&&r&&"string"==typeof r.code?i=r.code:"object"==typeof r&&r&&"string"==typeof r.error_code&&(i=r.error_code),i){if("weak_password"===i)throw new oK(ld(r),e.status,(null==(t=r.weak_password)?void 0:t.reasons)||[]);else if("session_not_found"===i)throw new oz}else if("object"==typeof r&&r&&"object"==typeof r.weak_password&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new oK(ld(r),e.status,r.weak_password.reasons);throw new oM(ld(r),e.status||500,i)}async function lm(e,t,r,i){var s;let n=Object.assign({},null==i?void 0:i.headers);n[oP]||(n[oP]=oI["2024-01-01"].name),(null==i?void 0:i.jwt)&&(n.Authorization=`Bearer ${i.jwt}`);let a=null!=(s=null==i?void 0:i.query)?s:{};(null==i?void 0:i.redirectTo)&&(a.redirect_to=i.redirectTo);let o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await lg(e,t,r+o,{headers:n,noResolveJson:null==i?void 0:i.noResolveJson},{},null==i?void 0:i.body);return(null==i?void 0:i.xform)?null==i?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function lg(e,t,r,i,s,n){let a,o,l=(o={method:t,headers:(null==i?void 0:i.headers)||{}},"GET"===t?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==i?void 0:i.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),s)));try{a=await e(r,Object.assign({},l))}catch(e){throw console.error(e),new oq(ld(e),0)}if(a.ok||await lf(a),null==i?void 0:i.noResolveJson)return a;try{return await a.json()}catch(e){await lf(e)}}function ly(e){var t,r,i;let s=null;(i=e).access_token&&i.refresh_token&&i.expires_in&&(s=Object.assign({},e),e.expires_at||(s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)));return{data:{session:s,user:null!=(t=e.user)?t:e},error:null}}function lv(e){let t=ly(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function lw(e){var t;return{data:{user:null!=(t=e.user)?t:e},error:null}}function lb(e){return{data:e,error:null}}function lx(e){let{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n}=e;return{data:{properties:{action_link:t,email_otp:r,hashed_token:i,redirect_to:s,verification_type:n},user:Object.assign({},(0,av.__rest)(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]))},error:null}}function lj(e){return e}let lS=["global","local","others"];class lk{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=o6(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=lS[0]){if(0>lS.indexOf(t))throw Error(`@supabase/auth-js: Parameter scope must be one of ${lS.join(", ")}`);try{return await lm(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(oB(e))return{data:null,error:e};throw e}}async inviteUserByEmail(e,t={}){try{return await lm(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:lw})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async generateLink(e){try{let{options:t}=e,r=(0,av.__rest)(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=null==r?void 0:r.newEmail,delete i.newEmail),await lm(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lx,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(oB(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(e){try{return await lm(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:lw})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async listUsers(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await lm(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:lj});if(u.error)throw u.error;let c=await u.json(),h=null!=(n=u.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(oB(e))return{data:{users:[]},error:e};throw e}}async getUserById(e){lu(e);try{return await lm(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:lw})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async updateUserById(e,t){lu(e);try{return await lm(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:lw})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async deleteUser(e,t=!1){lu(e);try{return await lm(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:lw})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async _listFactors(e){lu(e.userId);try{let{data:t,error:r}=await lm(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _deleteFactor(e){lu(e.userId),lu(e.id);try{return{data:await lm(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _listOAuthClients(e){var t,r,i,s,n,a,o;try{let l={nextPage:null,lastPage:0,total:0},u=await lm(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!=(r=null==(t=null==e?void 0:e.page)?void 0:t.toString())?r:"",per_page:null!=(s=null==(i=null==e?void 0:e.perPage)?void 0:i.toString())?s:""},xform:lj});if(u.error)throw u.error;let c=await u.json(),h=null!=(n=u.headers.get("x-total-count"))?n:0,d=null!=(o=null==(a=u.headers.get("link"))?void 0:a.split(","))?o:[];return d.length>0&&(d.forEach(e=>{let t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},c),l),error:null}}catch(e){if(oB(e))return{data:{clients:[]},error:e};throw e}}async _createOAuthClient(e){try{return await lm(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _getOAuthClient(e){try{return await lm(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _updateOAuthClient(e,t){try{return await lm(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _deleteOAuthClient(e){try{return await lm(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _regenerateOAuthClientSecret(e){try{return await lm(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}}function l_(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}let lE={debug:!!(globalThis&&o4()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};class lT extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class lA extends lT{}async function lC(e,t,r){lE.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),lE.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async i=>{if(i){lE.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{lE.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}if(0===t)throw lE.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new lA(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(lE.debug)try{let e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(e){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",e)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}))}function lO(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}class lN extends Error{constructor({message:e,code:t,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!=(s=null!=i?i:r instanceof Error?r.name:void 0)?s:"Unknown Error",this.code=t}}class lP extends lN{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}let lI=new class{createNewAbortSignal(){if(this.controller){let e=Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){let e=Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function lR(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function l$(){var e,t;return!!(o5()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null==(e=null==navigator?void 0:navigator.credentials)?void 0:e.create)&&"function"==typeof(null==(t=null==navigator?void 0:navigator.credentials)?void 0:t.get))}async function lB(e){try{let t=await navigator.credentials.create(e);if(!t)return{data:null,error:new lP("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new lP("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){var r,i,s;let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new lN({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if((null==(r=n.authenticatorSelection)?void 0:r.requireResidentKey)===!0)return new lN({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});else if("conditional"===t.mediation&&(null==(i=n.authenticatorSelection)?void 0:i.userVerification)==="required")return new lN({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});else if((null==(s=n.authenticatorSelection)?void 0:s.userVerification)==="required")return new lN({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else if("InvalidStateError"===e.name)return new lN({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});else if("NotAllowedError"===e.name)return new lN({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("NotSupportedError"===e.name)return new lN(0===n.pubKeyCredParams.filter(e=>"public-key"===e.type).length?{message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}:{message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!lR(t))return new lN({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(n.rp.id!==t)return new lN({message:`The RP ID "${n.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(n.user.id.byteLength<1||n.user.id.byteLength>64)return new lN({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new lN({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new lN({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}async function lM(e){try{let t=await navigator.credentials.get(e);if(!t)return{data:null,error:new lP("Empty credential response",t)};if(!(t instanceof PublicKeyCredential))return{data:null,error:new lP("Browser returned unexpected credential type",t)};return{data:t,error:null}}catch(t){return{data:null,error:function({error:e,options:t}){let{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new lN({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("NotAllowedError"===e.name)return new lN({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});else if("SecurityError"===e.name){let t=window.location.hostname;if(!lR(t))return new lN({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new lN({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new lN({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e});return new lN({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}({error:t,options:e})}}}let lD={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},lL={userVerification:"preferred",hints:["security-key"]};function lz(...e){let t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),i={};for(let s of e)if(s)for(let e in s){let n=s[e];if(void 0!==n)if(Array.isArray(n))i[e]=n;else if(r(n))i[e]=n;else if(t(n)){let r=i[e];t(r)?i[e]=lz(r,n):i[e]=lz(n)}else i[e]=n}return i}class lU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:i},s){try{var n,a,o,l;let{data:u,error:c}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!u)return{data:null,error:c};let h=null!=i?i:lI.createNewAbortSignal();if("create"===u.webauthn.type){let{user:e}=u.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(u.webauthn.type){case"create":{let t=(n=u.webauthn.credential_options.publicKey,a=null==s?void 0:s.create,lz(lD,n,a||{})),{data:r,error:i}=await lB({publicKey:t,signal:h});if(r)return{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}case"request":{let t=(o=u.webauthn.credential_options.publicKey,l=null==s?void 0:s.request,lz(lL,o,l||{})),{data:r,error:i}=await lM(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:t,signal:h}));if(r)return{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:r}},error:null};return{data:null,error:i}}}}catch(e){if(oB(e))return{data:null,error:e};return{data:null,error:new oD("Unexpected error in challenge",e)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t="u">typeof window?window.location.hostname:void 0,rpOrigins:r="u">typeof window?[window.location.origin]:void 0,signal:i}},s){if(!t)return{data:null,error:new o$("rpId is required for WebAuthn authentication")};try{if(!l$())return{data:null,error:new oD("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:i},{request:s});if(!n)return{data:null,error:a};let{webauthn:o}=n;return this._verify({factorId:e,challengeId:n.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(e){if(oB(e))return{data:null,error:e};return{data:null,error:new oD("Unexpected error in authenticate",e)}}}async _register({friendlyName:e,rpId:t="u">typeof window?window.location.hostname:void 0,rpOrigins:r="u">typeof window?[window.location.origin]:void 0,signal:i},s){if(!t)return{data:null,error:new o$("rpId is required for WebAuthn registration")};try{if(!l$())return{data:null,error:new oD("Browser does not support WebAuthn",null)};let{data:n,error:a}=await this._enroll({friendlyName:e});if(!n)return await this.client.mfa.listFactors().then(t=>{var r;return null==(r=t.data)?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:a};let{data:o,error:l}=await this._challenge({factorId:n.id,friendlyName:n.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:i},{create:s});if(!o)return{data:null,error:l};return this._verify({factorId:n.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}})}catch(e){if(oB(e))return{data:null,error:e};return{data:null,error:new oD("Unexpected error in register",e)}}}}if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"u">typeof self&&(self.globalThis=self)}let lV={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:oN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function lF(e,t,r){return await r()}let lW={};class lq{get jwks(){var e,t;return null!=(t=null==(e=lW[this.storageKey])?void 0:e.jwks)?t:{keys:[]}}set jwks(e){lW[this.storageKey]=Object.assign(Object.assign({},lW[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!=(t=null==(e=lW[this.storageKey])?void 0:e.cachedAt)?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lW[this.storageKey]=Object.assign(Object.assign({},lW[this.storageKey]),{cachedAt:e})}constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lq.nextInstanceID,lq.nextInstanceID+=1,this.instanceID>0&&o5()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},lV),e);if(this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new lk({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=o6(i.fetch),this.lock=i.lock||lF,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:o5()&&(null==(t=null==globalThis?void 0:globalThis.navigator)?void 0:t.locks)?this.lock=lC:this.lock=lF,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new lU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:o4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=l_(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=l_(this.memoryStorage)),o5()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(e){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",e)}null==(r=this.broadcastChannel)||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oO}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t=function(e){let t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(e){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),o5()&&this.detectSessionInUrl&&"none"!==r){let{data:i,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),oB(s)&&"AuthImplicitGrantRedirectError"===s.name){let t=null==(e=s.details)?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}let{session:n,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){if(oB(e))return{error:e};return{error:new oD("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,i;try{let{data:s,error:n}=await lm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!=(r=null==(t=null==e?void 0:e.options)?void 0:t.data)?r:{},gotrue_meta_security:{captcha_token:null==(i=null==e?void 0:e.options)?void 0:i.captchaToken}},xform:ly});if(n||!s)return{data:{user:null,session:null},error:n};let a=s.session,o=s.user;return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:o,session:a},error:null}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signUp(e){var t,r,i;try{let s;if("email"in e){let{email:r,password:i,options:n}=e,a=null,o=null;"pkce"===this.flowType&&([a,o]=await la(this.storage,this.storageKey)),s=await lm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:i,data:null!=(t=null==n?void 0:n.data)?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:ly})}else if("phone"in e){let{phone:t,password:n,options:a}=e;s=await lm(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!=(r=null==a?void 0:a.data)?r:{},channel:null!=(i=null==a?void 0:a.channel)?i:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:ly})}else throw new oV("You must provide either an email or phone number and a password");let{data:n,error:a}=s;if(a||!n)return{data:{user:null,session:null},error:a};let o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithPassword(e){try{let t;if("email"in e){let{email:r,password:i,options:s}=e;t=await lm(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:lv})}else if("phone"in e){let{phone:r,password:i,options:s}=e;t=await lm(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:lv})}else throw new oV("You must provide either an email or phone number and a password");let{data:r,error:i}=t;if(i)return{data:{user:null,session:null},error:i};if(!r||!r.session||!r.user)return{data:{user:null,session:null},error:new oU};return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(e){var t,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null==(t=e.options)?void 0:t.redirectTo,scopes:null==(r=e.options)?void 0:r.scopes,queryParams:null==(i=e.options)?void 0:i.queryParams,skipBrowserRedirect:null==(s=e.options)?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){let{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,i,s,n,a,o,l,u,c,h,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{let c,{chain:h,wallet:m,statement:g,options:y}=e;if(o5())if("object"==typeof m)c=m;else{let e=window;if("ethereum"in e&&"object"==typeof e.ethereum&&"request"in e.ethereum&&"function"==typeof e.ethereum.request)c=e.ethereum;else throw Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");c=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href),w=await c.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!w||0===w.length)throw Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let b=lO(w[0]),x=null==(r=null==y?void 0:y.signInWithEthereum)?void 0:r.chainId;x||(x=parseInt(await c.request({method:"eth_chainId"}),16)),p=function(e){var t;let{chainId:r,domain:i,expirationTime:s,issuedAt:n=new Date,nonce:a,notBefore:o,requestId:l,resources:u,scheme:c,uri:h,version:d}=e;if(!Number.isInteger(r))throw Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!h)throw Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==d)throw Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${d}`);if(null==(t=e.statement)?void 0:t.includes("\n"))throw Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);let p=lO(e.address),f=c?`${c}://${i}`:i,m=e.statement?`${e.statement}
`:"",g=`${f} wants you to sign in with your Ethereum account:
${p}

${m}`,y=`URI: ${h}
Version: ${d}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${n.toISOString()}`;if(s&&(y+=`
Expiration Time: ${s.toISOString()}`),o&&(y+=`
Not Before: ${o.toISOString()}`),l&&(y+=`
Request ID: ${l}`),u){let e="\nResources:";for(let t of u){if(!t||"string"!=typeof t)throw Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`
- ${t}`}y+=e}return`${g}
${y}`}({domain:v.host,address:b,statement:g,uri:v.href,version:"1",chainId:x,nonce:null==(i=null==y?void 0:y.signInWithEthereum)?void 0:i.nonce,issuedAt:null!=(n=null==(s=null==y?void 0:y.signInWithEthereum)?void 0:s.issuedAt)?n:new Date,expirationTime:null==(a=null==y?void 0:y.signInWithEthereum)?void 0:a.expirationTime,notBefore:null==(o=null==y?void 0:y.signInWithEthereum)?void 0:o.notBefore,requestId:null==(l=null==y?void 0:y.signInWithEthereum)?void 0:l.requestId,resources:null==(u=null==y?void 0:y.signInWithEthereum)?void 0:u.resources}),f=await c.request({method:"personal_sign",params:[(d=p,"0x"+Array.from(new TextEncoder().encode(d),e=>e.toString(16).padStart(2,"0")).join("")),b]})}try{let{data:t,error:r}=await lm(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:f},(null==(c=e.options)?void 0:c.captchaToken)?{gotrue_meta_security:{captcha_token:null==(h=e.options)?void 0:h.captchaToken}}:null),xform:ly});if(r)throw r;if(!t||!t.session||!t.user)return{data:{user:null,session:null},error:new oU};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSolana(e){var t,r,i,s,n,a,o,l,u,c,h,d;let p,f;if("message"in e)p=e.message,f=e.signature;else{let h,{chain:d,wallet:m,statement:g,options:y}=e;if(o5())if("object"==typeof m)h=m;else{let e=window;if("solana"in e&&"object"==typeof e.solana&&("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))h=e.solana;else throw Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if("object"!=typeof m||!(null==y?void 0:y.url))throw Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");h=m}let v=new URL(null!=(t=null==y?void 0:y.url)?t:window.location.href);if("signIn"in h&&h.signIn){let e,t=await h.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},null==y?void 0:y.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));if(Array.isArray(t)&&t[0]&&"object"==typeof t[0])e=t[0];else if(t&&"object"==typeof t&&"signedMessage"in t&&"signature"in t)e=t;else throw Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in e&&"signature"in e&&("string"==typeof e.signedMessage||e.signedMessage instanceof Uint8Array)&&e.signature instanceof Uint8Array)p="string"==typeof e.signedMessage?e.signedMessage:new TextDecoder().decode(e.signedMessage),f=e.signature;else throw Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in h)||"function"!=typeof h.signMessage||!("publicKey"in h)||"object"!=typeof h||!h.publicKey||!("toBase58"in h.publicKey)||"function"!=typeof h.publicKey.toBase58)throw Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,h.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!=(i=null==(r=null==y?void 0:y.signInWithSolana)?void 0:r.issuedAt)?i:new Date().toISOString()}`,...(null==(s=null==y?void 0:y.signInWithSolana)?void 0:s.notBefore)?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...(null==(n=null==y?void 0:y.signInWithSolana)?void 0:n.expirationTime)?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...(null==(a=null==y?void 0:y.signInWithSolana)?void 0:a.chainId)?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...(null==(o=null==y?void 0:y.signInWithSolana)?void 0:o.nonce)?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...(null==(l=null==y?void 0:y.signInWithSolana)?void 0:l.requestId)?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...(null==(c=null==(u=null==y?void 0:y.signInWithSolana)?void 0:u.resources)?void 0:c.length)?["Resources",...y.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");let e=await h.signMessage(new TextEncoder().encode(p),"utf8");if(!e||!(e instanceof Uint8Array))throw Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{let{data:t,error:r}=await lm(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:o2(f)},(null==(h=e.options)?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null==(d=e.options)?void 0:d.captchaToken}}:null),xform:ly});if(r)throw r;if(!t||!t.session||!t.user)return{data:{user:null,session:null},error:new oU};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async _exchangeCodeForSession(e){let t=await o7(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(null!=t?t:"").split("/");try{let{data:t,error:s}=await lm(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ly});if(await o9(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!t||!t.session||!t.user)return{data:{user:null,session:null,redirectType:null},error:new oU};return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=i?i:null}),error:s}}catch(e){if(oB(e))return{data:{user:null,session:null,redirectType:null},error:e};throw e}}async signInWithIdToken(e){try{let{options:t,provider:r,token:i,access_token:s,nonce:n}=e,{data:a,error:o}=await lm(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ly});if(o)return{data:{user:null,session:null},error:o};if(!a||!a.session||!a.user)return{data:{user:null,session:null},error:new oU};return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:o}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(e){var t,r,i,s,n;try{if("email"in e){let{email:i,options:s}=e,n=null,a=null;"pkce"===this.flowType&&([n,a]=await la(this.storage,this.storageKey));let{error:o}=await lm(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:i,data:null!=(t=null==s?void 0:s.data)?t:{},create_user:null==(r=null==s?void 0:s.shouldCreateUser)||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){let{phone:t,options:r}=e,{data:a,error:o}=await lm(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!=(i=null==r?void 0:r.data)?i:{},create_user:null==(s=null==r?void 0:r.shouldCreateUser)||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!=(n=null==r?void 0:r.channel)?n:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new oV("You must provide either an email or phone number.")}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async verifyOtp(e){var t,r;try{let i,s;"options"in e&&(i=null==(t=e.options)?void 0:t.redirectTo,s=null==(r=e.options)?void 0:r.captchaToken);let{data:n,error:a}=await lm(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ly});if(a)throw a;if(!n)throw Error("An error occurred on token verification.");let o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithSSO(e){var t,r,i;try{let s=null,n=null;return"pkce"===this.flowType&&([s,n]=await la(this.storage,this.storageKey)),await lm(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!=(r=null==(t=e.options)?void 0:t.redirectTo)?r:void 0}),(null==(i=null==e?void 0:e.options)?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:n}),headers:this.headers,xform:lb})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{let{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new oz;let{error:i}=await lm(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{let t=`${this.url}/resend`;if("email"in e){let{email:r,type:i,options:s}=e,{error:n}=await lm(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){let{phone:r,type:i,options:s}=e,{data:n,error:a}=await lm(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new oV("You must provide either an email or phone number and a type")}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(e){}})()),await e;this.pendingInLock.length;){let e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{let t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",Error().stack);try{let t=null,r=await o7(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),null!==r&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};let i=!!t.expires_at&&1e3*t.expires_at-Date.now()<9e4;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){let e=await o7(this.userStorage,this.storageKey+"-user");(null==e?void 0:e.user)?t.user=e.user:t.user=lc()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){var e;let r={value:this.suppressGetSessionWarning};t.user=(e=t.user,new Proxy(e,{get:(e,t,i)=>{if("__isInsecureUserWarningProxy"===t)return!0;if("symbol"==typeof t){let r=t.toString();if("Symbol(Symbol.toPrimitive)"===r||"Symbol(Symbol.toStringTag)"===r||"Symbol(util.inspect.custom)"===r||"Symbol(nodejs.util.inspect.custom)"===r)return Reflect.get(e,t,i)}return r.value||"string"!=typeof t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,i)}})),r.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}let{data:s,error:n}=await this._callRefreshToken(t.refresh_token);if(n)return{data:{session:null},error:n};return{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{if(e)return await lm(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:lw});return await this._useSession(async e=>{var t,r,i;let{data:s,error:n}=e;if(n)throw n;return(null==(t=s.session)?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await lm(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0,xform:lw}):{data:{user:null},error:new oz}})}catch(e){if(oB(e))return oB(e)&&"AuthSessionMissingError"===e.name&&(await this._removeSession(),await o9(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{let{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new oz;let n=i.session,a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await la(this.storage,this.storageKey));let{data:l,error:u}=await lm(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:lw});if(u)throw u;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(e){if(oB(e))return{data:{user:null},error:e};throw e}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new oz;let t=Date.now()/1e3,r=t,i=!0,s=null,{payload:n}=lt(e.access_token);if(n.exp&&(i=(r=n.exp)<=t),i){let{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{let{data:i,error:n}=await this._getUser(e.access_token);if(n)throw n;s={access_token:e.access_token,refresh_token:e.refresh_token,user:i.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(e){if(oB(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){let{data:i,error:s}=t;if(s)throw s;e=null!=(r=i.session)?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new oz;let{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(e,t){try{if(!o5())throw new oF("No browser detected.");if(e.error||e.error_description||e.error_code)throw new oF(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new oW("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new oF("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new oW("No code detected.");let{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;let i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:t.session,redirectType:null},error:null}}let{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!s||!a||!n||!l)throw new oF("No session defined in URL");let u=Math.round(Date.now()/1e3),c=parseInt(a),h=u+c;o&&(h=parseInt(o));let d=h-u;1e3*d<=3e4&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${d}s, should have been closer to ${c}s`);let p=h-c;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,h,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,h,u);let{data:f,error:m}=await this._getUser(s);if(m)throw m;let g={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:c,expires_at:h,refresh_token:n,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(e){if(oB(e))return{data:{session:null,redirectType:null},error:e};throw e}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){let t=await o7(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return{error:s};let n=null==(r=i.session)?void 0:r.access_token;if(n){let{error:t}=await this.admin.signOut(n,e);if(t&&!(oB(t)&&"AuthApiError"===t.name&&(404===t.status||401===t.status||403===t.status)))return{error:t}}return"others"!==e&&(await this._removeSession(),await o9(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){let t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,i;try{let{data:{session:i},error:s}=t;if(s)throw s;await (null==(r=this.stateChangeEmitters.get(e))?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(t){await (null==(i=this.stateChangeEmitters.get(e))?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",t),console.error(t)}})}async resetPasswordForEmail(e,t={}){let r=null,i=null;"pkce"===this.flowType&&([r,i]=await la(this.storage,this.storageKey,!0));try{return await lm(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async getUserIdentities(){var e;try{let{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!=(e=t.user.identities)?e:[]},error:null}}catch(e){if(oB(e))return{data:null,error:e};throw e}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{let{data:r,error:i}=await this._useSession(async t=>{var r,i,s,n,a;let{data:o,error:l}=t;if(l)throw l;let u=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null==(r=e.options)?void 0:r.redirectTo,scopes:null==(i=e.options)?void 0:i.scopes,queryParams:null==(s=e.options)?void 0:s.queryParams,skipBrowserRedirect:!0});return await lm(this.fetch,"GET",u,{headers:this.headers,jwt:null!=(a=null==(n=o.session)?void 0:n.access_token)?a:void 0})});if(i)throw i;return!o5()||(null==(t=e.options)?void 0:t.skipBrowserRedirect)||window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(t){if(oB(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{let{error:i,data:{session:s}}=t;if(i)throw i;let{options:n,provider:a,token:o,access_token:l,nonce:u}=e,{data:c,error:h}=await lm(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!=(r=null==s?void 0:s.access_token)?r:void 0,body:{provider:a,id_token:o,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken}},xform:ly});if(h)return{data:{user:null,session:null},error:h};if(!c||!c.session||!c.user)return{data:{user:null,session:null},error:new oU};return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("USER_UPDATED",c.session)),{data:c,error:h}}catch(e){if(oB(e))return{data:{user:null,session:null},error:e};throw e}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)throw n;return await lm(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!=(i=null==(r=s.session)?void 0:r.access_token)?i:void 0})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _refreshAccessToken(e){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{var r,i;let s=Date.now();return await (r=async r=>(r>0&&await lr(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await lm(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ly})),i=(e,t)=>{let r=200*Math.pow(2,e);return t&&oH(t)&&Date.now()+r-s<3e4},new Promise((e,t)=>{(async()=>{for(let s=0;s<1/0;s++)try{let t=await r(s);if(!i(s,null,t))return void e(t)}catch(e){if(!i(s,e))return void t(e)}})()}))}catch(e){if(this._debug(t,"error",e),oB(e))return{data:{session:null,user:null},error:e};throw e}finally{this._debug(t,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){let r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),o5()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=await o7(this.storage,this.storageKey);if(i&&this.userStorage){let t=await o7(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!t&&(t={user:i.user},await o8(this.userStorage,this.storageKey+"-user",t)),i.user=null!=(e=null==t?void 0:t.user)?e:lc()}else if(i&&!i.user&&!i.user){let e=await o7(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await o9(this.storage,this.storageKey+"-user"),await o8(this.storage,this.storageKey,i)):i.user=lc()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),null!==i&&await this._removeSession();return}let s=(null!=(t=i.expires_at)?t:1/0)*1e3-Date.now()<9e4;if(this._debug(r,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:e}=await this._callRefreshToken(i.refresh_token);e&&(console.error(e),oH(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{let{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(e){console.error("Error getting user data:",e),this._debug(r,"error getting user data, skipping SIGNED_IN notification",e)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(e){this._debug(r,"error",e),console.error(e);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new oz;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new le;let{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new oz;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);let i={data:t.session,error:null};return this.refreshingDeferred.resolve(i),i}catch(e){if(this._debug(i,"error",e),oB(e)){let r={data:null,error:e};return oH(e)||await this._removeSession(),null==(t=this.refreshingDeferred)||t.resolve(r),r}throw null==(r=this.refreshingDeferred)||r.reject(e),e}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,r=!0){let i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});let i=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(e){i.push(e)}});if(await Promise.all(s),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;let t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await o8(this.userStorage,this.storageKey+"-user",{user:t.user});let e=Object.assign({},t);delete e.user;let i=lh(e);await o8(this.storage,this.storageKey,i)}else{let e=lh(t);await o8(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await o9(this.storage,this.storageKey),await o9(this.storage,this.storageKey+"-code-verifier"),await o9(this.storage,this.storageKey+"-user"),this.userStorage&&await o9(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&o5()&&(null==window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),3e4);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"u">typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let e=Date.now();try{return await this._useSession(async t=>{let{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");let i=Math.floor((1e3*r.expires_at-e)/3e4);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),i<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof lT)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!o5()||!(null==window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null==window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"!==document.visibilityState?this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting"):await this._recoverAndRefresh()}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){let i=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){let[e,t]=await la(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});i.push(r.toString())}if(null==r?void 0:r.queryParams){let e=new URLSearchParams(r.queryParams);i.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;return s?{data:null,error:s}:await lm(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _enroll(e){try{return await this._useSession(async t=>{var r,i;let{data:s,error:n}=t;if(n)return{data:null,error:n};let a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await lm(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null==(r=null==s?void 0:s.session)?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&"totp"===o.type&&(null==(i=null==o?void 0:o.totp)?void 0:i.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r,i,s;let{data:n,error:a}=t;if(a)return{data:null,error:a};let o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?(i=e.webauthn.credential_response,"toJSON"in i&&"function"==typeof i.toJSON?i.toJSON():{id:i.id,rawId:i.id,response:{attestationObject:o2(new Uint8Array(i.response.attestationObject)),clientDataJSON:o2(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:null!=(s=i.authenticatorAttachment)?s:void 0}):function(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();let r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:o2(new Uint8Array(i.authenticatorData)),clientDataJSON:o2(new Uint8Array(i.clientDataJSON)),signature:o2(new Uint8Array(i.signature)),userHandle:i.userHandle?o2(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:null!=(t=e.authenticatorAttachment)?t:void 0}}(e.webauthn.credential_response)})}:{code:e.code}),{data:l,error:u}=await lm(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:null==(r=null==n?void 0:n.session)?void 0:r.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(e){if(oB(e))return{data:null,error:e};throw e}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;let{data:i,error:s}=t;if(s)return{data:null,error:s};let n=await lm(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null==(r=null==i?void 0:i.session)?void 0:r.access_token});if(n.error)return n;let{data:a}=n;if("webauthn"!==a.type)return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential creation options are required");if("u">typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:r,excludeCredentials:i}=e,s=(0,av.__rest)(e,["challenge","user","excludeCredentials"]),n=o1(t).buffer,a=Object.assign(Object.assign({},r),{id:o1(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:n,user:a});if(i&&i.length>0){o.excludeCredentials=Array(i.length);for(let e=0;e<i.length;e++){let t=i[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:o1(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:function(e){if(!e)throw Error("Credential request options are required");if("u">typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:r}=e,i=(0,av.__rest)(e,["challenge","allowCredentials"]),s=o1(t).buffer,n=Object.assign(Object.assign({},i),{challenge:s});if(r&&r.length>0){n.allowCredentials=Array(r.length);for(let e=0;e<r.length;e++){let t=r[e];n.allowCredentials[e]=Object.assign(Object.assign({},t),{id:o1(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return n}(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(e){if(oB(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(e){let{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;let{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};let i={all:[],phone:[],totp:[],webauthn:[]};for(let r of null!=(e=null==t?void 0:t.factors)?e:[])i.all.push(r),"verified"===r.status&&i[r.factor_type].push(r);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;let{data:{session:r},error:i}=await this.getSession();if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:s}=lt(r.access_token),n=null;s.aal&&(n=s.aal);let a=n;return(null!=(t=null==(e=r.user.factors)?void 0:e.filter(e=>"verified"===e.status))?t:[]).length>0&&(a="aal2"),{data:{currentLevel:n,nextLevel:a,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{let{data:{session:r},error:i}=t;return i?{data:null,error:i}:r?await lm(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):{data:null,error:new oz}})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new oz};let n=await lm(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&o5()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{let{data:{session:i},error:s}=r;if(s)return{data:null,error:s};if(!i)return{data:null,error:new oz};let n=await lm(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return n.data&&n.data.redirect_url&&o5()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(n.data.redirect_url),n})}catch(e){if(oB(e))return{data:null,error:e};throw e}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;let i=Date.now();if((r=this.jwks.keys.find(t=>t.kid===e))&&this.jwks_cached_at+6e5>i)return r;let{data:s,error:n}=await lm(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return s.keys&&0!==s.keys.length&&(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(t=>t.kid===e))?r:null}async getClaims(e,t={}){try{var r;let i,s=e;if(!s){let{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};s=e.session.access_token}let{header:n,payload:a,signature:o,raw:{header:l,payload:u}}=lt(s);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw Error("JWT has expired")}(a.exp);let c=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks);if(!c){let{error:e}=await this.getUser(s);if(e)throw e;return{data:{claims:a,header:n,signature:o},error:null}}let h=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw Error("Invalid alg claim")}}(n.alg),d=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,d,o,(r=`${l}.${u}`,i=[],!function(e,t){for(let r=0;r<e.length;r+=1){let i=e.charCodeAt(r);if(i>55295&&i<=56319){let t=(i-55296)*1024&65535;i=(e.charCodeAt(r+1)-56320&65535|t)+65536,r+=1}!function(e,t){if(e<=127)return t(e);if(e<=2047){t(192|e>>6),t(128|63&e);return}if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|63&e);return}if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|63&e);return}throw Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}(i,t)}}(r,e=>i.push(e)),new Uint8Array(i))))throw new oJ("Invalid JWT signature");return{data:{claims:a,header:n,signature:o},error:null}}catch(e){if(oB(e))return{data:null,error:e};throw e}}}lq.nextInstanceID=0;let lH=lq;class lK extends lH{constructor(e){super(e)}}(function(){if("u">typeof window||void 0===e_.default)return!1;let e=e_.default.version;if(null==e)return!1;let t=e.match(/^v(\d+)\./);return!!t&&18>=parseInt(t[1],10)})()&&console.warn(`  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217`);let lJ=new class e{constructor(e,t,r){var i,s,n;this.supabaseUrl=e,this.supabaseKey=t;const a=function(e){let t=null==e?void 0:e.trim();if(!t)throw Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(t.endsWith("/")?t:t+"/")}catch(e){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}(e);if(!t)throw Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const o=`sb-${a.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,i;let{db:s,auth:n,realtime:a,global:o}=e,{db:l,auth:u,realtime:c,global:h}=t,d={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),n),realtime:Object.assign(Object.assign({},c),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},null!=(r=null==h?void 0:h.headers)?r:{}),null!=(i=null==o?void 0:o.headers)?i:{})}),accessToken:async()=>""};return e.accessToken?d.accessToken=e.accessToken:delete d.accessToken,d}(null!=r?r:{},{db:oE,realtime:oA,auth:Object.assign(Object.assign({},oT),{storageKey:o}),global:o_});this.storageKey=null!=(i=l.auth.storageKey)?i:"",this.headers=null!=(s=l.global.headers)?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!=(n=l.auth)?n:{},this.headers,l.global.fetch),this.fetch=((e,t,r)=>{let i,s=(i=r||("u"<typeof fetch?oC.default:fetch),(...e)=>i(...e)),n="u"<typeof Headers?oC.Headers:Headers;return async(r,i)=>{var a;let o=null!=(a=await t())?a:e,l=new n(null==i?void 0:i.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},i),{headers:l}))}})(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new a_(new URL("rest/v1",a).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new oS(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new aS(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();let{data:r}=await this.auth.getSession();return null!=(t=null==(e=r.session)?void 0:e.access_token)?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:n,flowType:a,lock:o,debug:l},u,c){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new lK({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:o,debug:l,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new aY(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){("TOKEN_REFRESHED"===e||"SIGNED_IN"===e)&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0)}}("https://mouvsqlmgymsaxikvqsh.supabase.co","sb_publishable_c5f58knbVz8UgOh6L88MUQ_p9j8c1Q-",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});var lG=e.i(41554);function lY(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M12 5v14M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function lX(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("polyline",{points:"7 10 12 15 17 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function lQ(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("path",{d:"M3 6h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,A.jsx)("path",{d:"M8 6l1-2h6l1 2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,A.jsx)("path",{d:"M6 6l1 13a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2l1-13",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,A.jsx)("path",{d:"M10 11v6M14 11v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function lZ(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("path",{d:"M19.4 15a7.97 7.97 0 0 0 .1-2l2-1.5-2-3.5-2.3.5a8.02 8.02 0 0 0-1.7-1l-.4-2.3h-4l-.4 2.3a8.02 8.02 0 0 0-1.7 1l-2.3-.5-2 3.5 2 1.5a7.97 7.97 0 0 0 .1 2l-2 1.5 2 3.5 2.3-.5a8.02 8.02 0 0 0 1.7 1l.4 2.3h4l.4-2.3a8.02 8.02 0 0 0 1.7-1l2.3.5 2-3.5-2-1.5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function l0(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M20 17.5a4.5 4.5 0 0 0-1.5-8.77A6 6 0 1 0 6 16.5H18a3.5 3.5 0 0 0 2-6.4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function l1(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("path",{d:"M4 12a8 8 0 0 1 12.5-6.9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,A.jsx)("path",{d:"M16 5h3v3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("path",{d:"M20 12a8 8 0 0 1-12.5 6.9",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("path",{d:"M8 19H5v-3",stroke:"currentColor",strokeWidth:"2"})]})}function l2(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function l5(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M3 7h18M6 12h12M9 17h6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function l3(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("circle",{cx:"12",cy:"8",r:"4",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("path",{d:"M4 20c0-4 4-6 8-6s8 2 8 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}function l4(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("polyline",{points:"16 17 21 12 16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("line",{x1:"21",y1:"12",x2:"9",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function l6(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("polyline",{points:"10 17 15 12 10 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,A.jsx)("line",{x1:"15",y1:"12",x2:"3",y2:"12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function l8(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("path",{d:"M22 6l-10 7L2 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function l7(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("rect",{x:"3",y:"3",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("rect",{x:"14",y:"3",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("rect",{x:"14",y:"14",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,A.jsx)("rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}function l9(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M18 6L6 18M6 6l12 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function ue(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function ut(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M8 6h13M8 12h13M8 18h13M3 6h.01M3 12h.01M3 18h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function ur(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M4 8h16M4 12h16M4 16h16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function ui({filled:e,...t}){return(0,A.jsx)("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:e?"var(--accent)":"none",children:(0,A.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z",stroke:"var(--accent)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function us(e){return(0,A.jsxs)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,A.jsx)("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),(0,A.jsx)("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),(0,A.jsx)("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),(0,A.jsx)("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]})}function un({value:e,onChange:t}){let[r,i]=(0,C.useState)(!1),[s,n]=(0,C.useState)(()=>e?new Date(e):new Date);(0,C.useEffect)(()=>{let e=()=>i(!1);return r&&window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[r]);let a=s.getFullYear(),o=s.getMonth(),l=new Date(a,o+1,0).getDate(),u=new Date(a,o,1).getDay(),c=[];for(let e=0;e<u;e++)c.push(null);for(let e=1;e<=l;e++)c.push(e);return(0,A.jsxs)("div",{className:"date-picker",style:{position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"input-trigger",onClick:()=>i(!r),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",height:"40px",background:"rgba(0,0,0,0.2)",borderRadius:"8px",cursor:"pointer",border:"1px solid transparent",transition:"all 0.2s"},children:[(0,A.jsx)("span",{children:e||""}),(0,A.jsx)(us,{width:"16",height:"16",className:"muted"})]}),(0,A.jsx)(nK,{children:r&&(0,A.jsxs)(nD.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},className:"glass card",style:{position:"absolute",top:"100%",left:0,width:"100%",marginTop:8,padding:12,zIndex:10,background:"rgba(30, 41, 59, 0.95)",backdropFilter:"blur(12px)",border:"1px solid rgba(255,255,255,0.1)"},children:[(0,A.jsxs)("div",{className:"calendar-header",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,A.jsx)("button",{onClick:e=>{e.stopPropagation(),n(new Date(a,o-1,1))},className:"icon-button",style:{width:24,height:24},children:"<"}),(0,A.jsxs)("span",{style:{fontWeight:600},children:[a," ",o+1,""]}),(0,A.jsx)("button",{onClick:e=>{e.stopPropagation(),n(new Date(a,o+1,1))},className:"icon-button",style:{width:24,height:24},children:">"})]}),(0,A.jsxs)("div",{className:"calendar-grid",style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:4,textAlign:"center"},children:[["","","","","","",""].map(e=>(0,A.jsx)("div",{className:"muted",style:{fontSize:"12px",marginBottom:4},children:e},e)),c.map((r,s)=>{if(!r)return(0,A.jsx)("div",{},s);let n=`${a}-${String(o+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`,l=e===n,u=new Date;u.setHours(0,0,0,0);let c=new Date(n),h=c.getTime()===u.getTime(),d=c>u;return(0,A.jsx)("div",{onClick:e=>{let s,n;return!d&&(e.stopPropagation(),s=`${a}-${String(o+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`,void((n=new Date).setHours(0,0,0,0),!(new Date(s)>n)&&(t(s),i(!1))))},style:{height:28,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"13px",borderRadius:"6px",cursor:d?"not-allowed":"pointer",background:l?"var(--primary)":h?"rgba(255,255,255,0.1)":"transparent",color:d?"var(--muted)":l?"#000":"var(--text)",fontWeight:l||h?600:400,opacity:d?.3:1},onMouseEnter:e=>{l||d||(e.currentTarget.style.background="rgba(255,255,255,0.1)")},onMouseLeave:e=>{l||d||(e.currentTarget.style.background=h?"rgba(255,255,255,0.1)":"transparent")},children:r},s)})]})]})})]})}function ua(){let[e,t]=(0,C.useState)("alipay");return(0,A.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[(0,A.jsxs)("div",{className:"tabs glass",style:{padding:4,borderRadius:12,width:"100%",display:"flex"},children:[(0,A.jsx)("button",{onClick:()=>t("alipay"),style:{flex:1,padding:"8px 0",border:"none",background:"alipay"===e?"rgba(34, 211, 238, 0.15)":"transparent",color:"alipay"===e?"var(--primary)":"var(--muted)",borderRadius:8,cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"all 0.2s ease"},children:""}),(0,A.jsx)("button",{onClick:()=>t("wechat"),style:{flex:1,padding:"8px 0",border:"none",background:"wechat"===e?"rgba(34, 211, 238, 0.15)":"transparent",color:"wechat"===e?"var(--primary)":"var(--muted)",borderRadius:8,cursor:"pointer",fontSize:"14px",fontWeight:600,transition:"all 0.2s ease"},children:""})]}),(0,A.jsx)("div",{style:{width:200,height:200,background:"white",borderRadius:12,padding:8,display:"flex",alignItems:"center",justifyContent:"center"},children:"alipay"===e?(0,A.jsx)("img",{src:am.src,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"}}):(0,A.jsx)("img",{src:ag.src,alt:"",style:{width:"100%",height:"100%",objectFit:"contain"}})})]})}function uo(e){return(0,A.jsx)("svg",{...e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",children:(0,A.jsx)("path",{d:"M5 12h14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})}function ul({value:e,onChange:t,step:r=1,min:i=0,placeholder:s}){let n=String(r).includes(".")?String(r).split(".")[1].length:0,a=e=>Number(e).toFixed(n);return(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)("input",{type:"number",step:"any",className:"input no-zoom",value:e,onChange:e=>t(e.target.value),placeholder:s,style:{width:"100%",paddingRight:56}}),(0,A.jsxs)("div",{style:{position:"absolute",right:6,top:6,display:"flex",flexDirection:"column",gap:6},children:[(0,A.jsx)("button",{className:"icon-button",type:"button",onClick:()=>{let i=parseFloat(e);t(a((isNaN(i)?0:i)+r))},style:{width:44,height:16,padding:0},children:(0,A.jsx)(lY,{width:"14",height:"14"})}),(0,A.jsx)("button",{className:"icon-button",type:"button",onClick:()=>{let s=parseFloat(e);t(a(Math.max(i,(isNaN(s)?0:s)-r)))},style:{width:44,height:16,padding:0},children:(0,A.jsx)(uo,{width:"14",height:"14"})})]})]})}function uu({label:e,value:t,delta:r}){return(0,A.jsxs)("div",{className:"stat",style:{flexDirection:"column",gap:4,minWidth:0},children:[(0,A.jsx)("span",{className:"label",style:{fontSize:"11px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e}),(0,A.jsx)("span",{className:`value ${r>0?"up":r<0?"down":""}`,style:{fontSize:"15px",lineHeight:1.2,whiteSpace:"nowrap"},children:t})]})}function uc({onClose:e,user:t}){let[r,i]=(0,C.useState)(!1),[s,n]=(0,C.useState)(!1),[a,o]=(0,C.useState)(""),l=async e=>{e.preventDefault(),i(!0),o("");let t=new FormData(e.target);t.get("nickname")?.trim()||t.set("nickname",""),t.append("access_key","c390fbb1-77e0-4aab-a939-caa75edc7319"),t.append("subject"," - ");try{let e=await fetch("https://api.web3forms.com/submit",{method:"POST",body:t}),r=await e.json();r.success?n(!0):o(r.message||"")}catch(e){o("")}finally{i(!1)}};return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal feedback-modal",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:e,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),s?(0,A.jsxs)("div",{className:"success-message",style:{textAlign:"center",padding:"20px 0"},children:[(0,A.jsx)("div",{style:{fontSize:"48px",marginBottom:16},children:""}),(0,A.jsx)("h3",{style:{marginBottom:8},children:""}),(0,A.jsx)("p",{className:"muted",children:""}),(0,A.jsx)("button",{className:"button",onClick:e,style:{marginTop:24,width:"100%"},children:""})]}):(0,A.jsxs)("form",{onSubmit:l,className:"feedback-form",children:[(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsx)("label",{htmlFor:"nickname",className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:""}),(0,A.jsx)("input",{id:"nickname",type:"text",name:"nickname",className:"input",placeholder:"",style:{width:"100%"}})]}),(0,A.jsx)("input",{type:"hidden",name:"email",value:t?.email||""}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:20},children:[(0,A.jsx)("label",{htmlFor:"message",className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:""}),(0,A.jsx)("textarea",{id:"message",name:"message",className:"input",required:!0,placeholder:"...",style:{width:"100%",minHeight:"120px",padding:"12px",resize:"vertical"}})]}),a&&(0,A.jsx)("div",{className:"error-text",style:{marginBottom:16,textAlign:"center"},children:a}),(0,A.jsx)("button",{className:"button",type:"submit",disabled:r,style:{width:"100%"},children:r?"...":""}),(0,A.jsx)("div",{style:{marginTop:20,paddingTop:16,borderTop:"1px solid var(--border)",textAlign:"center"},children:(0,A.jsxs)("p",{className:"muted",style:{fontSize:"12px",lineHeight:"1.6"},children:[" Github ",(0,A.jsx)("a",{href:"https://github.com/hzm0321/real-time-fund/issues",target:"_blank",rel:"noopener noreferrer",className:"link-button",style:{color:"var(--primary)",textDecoration:"underline",padding:"0 4px",fontWeight:600},children:"Issues"}),""]})})]})]})})}function uh({fund:e,onClose:t,onAction:r}){return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"320px"},children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsxs)("div",{style:{marginBottom:20,textAlign:"center"},children:[(0,A.jsx)("div",{className:"fund-name",style:{fontWeight:600,fontSize:"16px",marginBottom:4},children:e?.name}),(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["#",e?.code]})]}),(0,A.jsxs)("div",{className:"grid",style:{gap:12},children:[(0,A.jsx)("button",{hidden:!0,className:"button col-6",onClick:()=>r("buy"),style:{background:"rgba(34, 211, 238, 0.1)",border:"1px solid var(--primary)",color:"var(--primary)"},children:""}),(0,A.jsx)("button",{hidden:!0,className:"button col-6",onClick:()=>r("sell"),style:{background:"rgba(248, 113, 113, 0.1)",border:"1px solid var(--danger)",color:"var(--danger)"},children:""}),(0,A.jsx)("button",{className:"button col-12",onClick:()=>r("edit"),style:{background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{className:"button col-12",onClick:()=>r("clear"),style:{marginTop:8,background:"linear-gradient(180deg, #ef4444, #f87171)",border:"none",color:"#2b0b0b",fontWeight:600},children:""})]})]})})}function ud({type:e,fund:t,onClose:r,onConfirm:i}){let s="buy"===e,[n,a]=(0,C.useState)(""),[o,l]=(0,C.useState)(""),[u,c]=(0,C.useState)("0"),[h,d]=(0,C.useState)(new Date().toISOString().slice(0,10)),[p,f]=(0,C.useState)(new Date().getHours()>=15),[m,g]=(0,C.useState)(null),y=t?.estPricedCoverage>.05?t?.estGsz:"number"==typeof t?.gsz?t?.gsz:Number(t?.dwjz);(0,C.useEffect)(()=>{if(!s)return;let e=parseFloat(o),t=parseFloat(u),r=parseFloat(y);e>0&&r>0&&!isNaN(t)?g(e/(1+t/100)/r):g(null)},[s,o,u,y]);let v=s?!!o&&!!u&&!!h&&null!==m:!!n&&!!y;return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":s?"":"",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"420px"},children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)("span",{style:{fontSize:"20px"},children:s?"":""}),(0,A.jsx)("span",{children:s?"":""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:r,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsxs)("div",{style:{marginBottom:16},children:[(0,A.jsx)("div",{className:"fund-name",style:{fontWeight:600,fontSize:"16px",marginBottom:4},children:t?.name}),(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["#",t?.code]})]}),(0,A.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),s)o&&u&&h&&null!==m&&y&&i({share:m,price:Number(y),totalCost:Number(o),date:h,isAfter3pm:p});else{if(!n||!y)return;i({share:Number(n),price:Number(y)})}},children:[s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" () ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("div",{style:{border:o?"1px solid var(--border)":"1px solid var(--danger)",borderRadius:12},children:(0,A.jsx)(ul,{value:o,onChange:l,step:100,min:0,placeholder:""})})]}),(0,A.jsxs)("div",{className:"row",style:{gap:12,marginBottom:16},children:[(0,A.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" (%) ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("div",{style:{border:u?"1px solid var(--border)":"1px solid var(--danger)",borderRadius:12},children:(0,A.jsx)(ul,{value:u,onChange:c,step:.01,min:0,placeholder:"0.12"})})]}),(0,A.jsxs)("div",{className:"form-group",style:{flex:1},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)(un,{value:h,onChange:d})]})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:12},children:[(0,A.jsx)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:""}),(0,A.jsxs)("div",{className:"row",style:{gap:8,background:"rgba(0,0,0,0.2)",borderRadius:"8px",padding:"4px"},children:[(0,A.jsx)("button",{type:"button",onClick:()=>f(!1),style:{flex:1,border:"none",background:p?"transparent":"var(--primary)",color:p?"var(--muted)":"#05263b",borderRadius:"6px",fontSize:"12px",cursor:"pointer",padding:"6px 8px"},children:"15:00"}),(0,A.jsx)("button",{type:"button",onClick:()=>f(!0),style:{flex:1,border:"none",background:p?"var(--primary)":"transparent",color:p?"#05263b":"var(--muted)",borderRadius:"6px",fontSize:"12px",cursor:"pointer",padding:"6px 8px"},children:"15:00"})]}),(0,A.jsx)("div",{className:"muted",style:{fontSize:"12px",marginTop:6},children:p?"":""})]}),y&&null!==m&&(0,A.jsxs)("div",{className:"glass",style:{padding:"12px",borderRadius:"8px",background:"rgba(34, 211, 238, 0.05)",border:"1px solid rgba(34, 211, 238, 0.2)",marginBottom:8},children:[(0,A.jsxs)("div",{className:"row",style:{justifyContent:"space-between",marginBottom:4},children:[(0,A.jsx)("span",{className:"muted",style:{fontSize:"12px"},children:""}),(0,A.jsxs)("span",{style:{fontWeight:700,color:"var(--primary)"},children:[m.toFixed(2)," "]})]}),(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["/",Number(y).toFixed(4)]})]})]}):(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("div",{style:{border:n?"1px solid var(--border)":"1px solid var(--danger)",borderRadius:12},children:(0,A.jsx)(ul,{value:n,onChange:a,step:1,min:0,placeholder:""})})]})}),(0,A.jsxs)("div",{className:"row",style:{gap:12,marginTop:12},children:[(0,A.jsx)("button",{type:"button",className:"button secondary",onClick:r,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{type:"submit",className:"button",disabled:!v,style:{flex:1,opacity:v?1:.6},children:""})]})]})]})})}function up({fund:e,holding:t,onClose:r,onSave:i}){let[s,n]=(0,C.useState)("amount"),a=e?.dwjz||e?.gsz||0,[o,l]=(0,C.useState)(""),[u,c]=(0,C.useState)(""),[h,d]=(0,C.useState)(""),[p,f]=(0,C.useState)("");(0,C.useEffect)(()=>{if(t){let e=t.share||0,r=t.cost||0;if(l(String(e)),c(String(r)),a>0){let t=e*a,i=(a-r)*e;d(t.toFixed(2)),f(i.toFixed(2))}}},[t,e]);let m=e=>{if(e!==s){if(n(e),"share"===e){if(h&&a>0){let e=parseFloat(h),t=parseFloat(p||0),r=e/a,i=r>0?(e-t)/r:0;l(r.toFixed(2)),c(i.toFixed(4))}}else if(o&&a>0){let e=parseFloat(o),t=parseFloat(u||0),r=e*a,i=(a-t)*e;d(r.toFixed(2)),f(i.toFixed(2))}}},g="share"===s?o&&u&&!isNaN(o)&&!isNaN(u):h&&!isNaN(h)&&(!p||!isNaN(p))&&a>0;return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),style:{maxWidth:"400px"},children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:r,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsxs)("div",{style:{marginBottom:16},children:[(0,A.jsx)("div",{className:"fund-name",style:{fontWeight:600,fontSize:"16px",marginBottom:4},children:e?.name}),(0,A.jsxs)("div",{className:"row",style:{justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["#",e?.code]}),(0,A.jsxs)("div",{className:"badge",style:{fontSize:"12px"},children:["",(0,A.jsx)("span",{style:{fontWeight:600,color:"var(--primary)"},children:a})]})]})]}),(0,A.jsx)("div",{className:"tabs-container",style:{marginBottom:20,background:"rgba(255,255,255,0.05)",padding:4,borderRadius:12},children:(0,A.jsxs)("div",{className:"row",style:{gap:0},children:[(0,A.jsx)("button",{type:"button",className:`tab ${"amount"===s?"active":""}`,onClick:()=>m("amount"),style:{flex:1,justifyContent:"center",height:32,borderRadius:8},children:""}),(0,A.jsx)("button",{type:"button",className:`tab ${"share"===s?"active":""}`,onClick:()=>m("share"),style:{flex:1,justifyContent:"center",height:32,borderRadius:8},children:""})]})}),(0,A.jsxs)("form",{onSubmit:e=>{e.preventDefault();let t=0,n=0;if("share"===s){if(!o||!u)return;t=Number(o),n=Number(u)}else{if(!h||!a)return;let e=Number(h),r=Number(p||0);n=(t=e/a)>0?(e-r)/t:0}i({share:t,cost:n}),r()},children:["amount"===s?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("input",{type:"number",step:"any",className:`input ${!h?"error":""}`,value:h,onChange:e=>d(e.target.value),placeholder:"",style:{width:"100%",border:h?void 0:"1px solid var(--danger)"}})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:24},children:[(0,A.jsx)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:""}),(0,A.jsx)("input",{type:"number",step:"any",className:"input",value:p,onChange:e=>f(e.target.value),placeholder:" ()",style:{width:"100%"}})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("input",{type:"number",step:"any",className:`input ${!o?"error":""}`,value:o,onChange:e=>l(e.target.value),placeholder:"",style:{width:"100%",border:o?void 0:"1px solid var(--danger)"}})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:24},children:[(0,A.jsxs)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:[" ",(0,A.jsx)("span",{style:{color:"var(--danger)"},children:"*"})]}),(0,A.jsx)("input",{type:"number",step:"any",className:`input ${!u?"error":""}`,value:u,onChange:e=>c(e.target.value),placeholder:"",style:{width:"100%",border:u?void 0:"1px solid var(--danger)"}})]})]}),(0,A.jsxs)("div",{className:"row",style:{gap:12},children:[(0,A.jsx)("button",{type:"button",className:"button secondary",onClick:r,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{type:"submit",className:"button",disabled:!g,style:{flex:1,opacity:g?1:.6},children:""})]})]})]})})}function uf({failures:e,onClose:t}){return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsx)("div",{className:"muted",style:{marginBottom:12,fontSize:"14px"},children:""}),(0,A.jsx)("div",{className:"list",children:e.map((e,t)=>(0,A.jsxs)("div",{className:"item",children:[(0,A.jsx)("span",{className:"name",children:e.name||""}),(0,A.jsx)("div",{className:"values",children:(0,A.jsxs)("span",{className:"badge",children:["#",e.code]})})]},t))}),(0,A.jsx)("div",{className:"row",style:{justifyContent:"flex-end",marginTop:16},children:(0,A.jsx)("button",{className:"button",onClick:t,children:""})})]})})}function um({message:e,onClose:t}){return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsx)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",onClick:e=>e.stopPropagation(),children:(0,A.jsxs)("div",{className:"success-message",style:{textAlign:"center",padding:"20px 0"},children:[(0,A.jsx)("div",{style:{fontSize:"48px",marginBottom:16},children:""}),(0,A.jsx)("h3",{style:{marginBottom:8},children:e}),(0,A.jsx)("p",{className:"muted",children:""}),(0,A.jsx)("button",{className:"button",onClick:t,style:{marginTop:24,width:"100%"},children:""})]})})})}function ug({onConfirm:e,onCancel:t,type:r="empty"}){let i="conflict"===r;return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":i?"":"",onClick:i?void 0:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"420px"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(l0,{width:"20",height:"20"}),(0,A.jsx)("span",{children:i?"":""})]}),!i&&(0,A.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsx)("p",{className:"muted",style:{marginBottom:20,fontSize:"14px",lineHeight:"1.6"},children:i?"":""}),(0,A.jsxs)("div",{className:"row",style:{flexDirection:"column",gap:12},children:[(0,A.jsx)("button",{className:"button",onClick:e,children:i?" ()":""}),(0,A.jsx)("button",{className:"button secondary",onClick:t,children:i?" ()":""})]})]})})}function uy({title:e,message:t,onConfirm:r,onCancel:i,confirmText:s=""}){return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:i,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{zIndex:10002},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,A.jsx)(lQ,{width:"20",height:"20",className:"danger"}),(0,A.jsx)("span",{children:e})]}),(0,A.jsx)("p",{className:"muted",style:{marginBottom:24,fontSize:"14px",lineHeight:"1.6"},children:t}),(0,A.jsxs)("div",{className:"row",style:{gap:12},children:[(0,A.jsx)("button",{className:"button secondary",onClick:i,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{className:"button danger",onClick:r,style:{flex:1},children:s})]})]})})}function uv({groups:e,onClose:t,onSave:r}){let[i,s]=(0,C.useState)(e),[n,a]=(0,C.useState)(null),o=i.every(e=>""!==e.name.trim());return(0,A.jsxs)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"500px",width:"90vw"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:t,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsxs)("div",{className:"group-manage-list-container",style:{maxHeight:"60vh",overflowY:"auto",paddingRight:"4px"},children:[0===i.length?(0,A.jsxs)("div",{className:"empty-state muted",style:{textAlign:"center",padding:"40px 0"},children:[(0,A.jsx)("div",{style:{fontSize:"32px",marginBottom:12,opacity:.5},children:""}),(0,A.jsx)("p",{children:""})]}):(0,A.jsx)(n7.Group,{axis:"y",values:i,onReorder:e=>{s(e)},className:"group-manage-list",children:(0,A.jsx)(nK,{mode:"popLayout",children:i.map(t=>(0,A.jsxs)(n7.Item,{value:t,className:"group-manage-item glass",layout:!0,initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",stiffness:500,damping:35,mass:1,layout:{duration:.2}},children:[(0,A.jsx)("div",{className:"drag-handle",style:{cursor:"grab",display:"flex",alignItems:"center",padding:"0 8px"},children:(0,A.jsx)(ur,{width:"18",height:"18",className:"muted"})}),(0,A.jsx)("input",{className:`input group-rename-input ${!t.name.trim()?"error":""}`,value:t.name,onChange:e=>{var r;let i;return r=t.id,i=(e.target.value||"").slice(0,8),void s(e=>e.map(e=>e.id===r?{...e,name:i}:e))},placeholder:"...",style:{flex:1,height:"36px",background:"rgba(0,0,0,0.2)",border:t.name.trim()?"none":"1px solid var(--danger)"}}),(0,A.jsx)("button",{className:"icon-button danger",onClick:()=>{var r,n;let o,l,u;return r=t.id,n=t.name,o=i.find(e=>e.id===r),l=!e.find(e=>e.id===r),u=o&&(!o.codes||0===o.codes.length),void(l||u?s(e=>e.filter(e=>e.id!==r)):a({id:r,name:n}))},title:"",style:{width:"36px",height:"36px",flexShrink:0},children:(0,A.jsx)(lQ,{width:"16",height:"16"})})]},t.id))})}),(0,A.jsxs)("button",{className:"add-group-row-btn",onClick:()=>{let e={id:`group_${Date.now()}`,name:"",codes:[]};s(t=>[...t,e])},style:{width:"100%",marginTop:12,padding:"10px",borderRadius:"12px",border:"1px dashed var(--border)",background:"rgba(255,255,255,0.02)",color:"var(--muted)",fontSize:"14px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",cursor:"pointer",transition:"all 0.2s ease"},children:[(0,A.jsx)(lY,{width:"16",height:"16"}),(0,A.jsx)("span",{children:""})]})]}),(0,A.jsxs)("div",{style:{marginTop:24},children:[!o&&(0,A.jsx)("div",{className:"error-text",style:{marginBottom:12,textAlign:"center"},children:""}),(0,A.jsx)("button",{className:"button",onClick:()=>{i.some(e=>!e.name.trim())||(r(i),t())},disabled:!o,style:{width:"100%",opacity:o?1:.6},children:""})]})]}),(0,A.jsx)(nK,{children:n&&(0,A.jsx)(uy,{title:"",message:` "${n.name}" `,onConfirm:()=>{n&&(s(e=>e.filter(e=>e.id!==n.id)),a(null))},onCancel:()=>a(null)})})]})}function uw({allFunds:e,currentGroupCodes:t,onClose:r,onAdd:i}){let[s,n]=(0,C.useState)(new Set),a=(e||[]).filter(e=>!(t||[]).includes(e.code));return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true",onClick:r,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"500px",width:"90vw"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lY,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:r,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsx)("div",{className:"group-manage-list-container",style:{maxHeight:"50vh",overflowY:"auto",paddingRight:"4px"},children:0===a.length?(0,A.jsx)("div",{className:"empty-state muted",style:{textAlign:"center",padding:"40px 0"},children:(0,A.jsx)("p",{children:""})}):(0,A.jsx)("div",{className:"group-manage-list",children:a.map(e=>(0,A.jsxs)("div",{className:`group-manage-item glass ${s.has(e.code)?"selected":""}`,onClick:()=>{var t;return t=e.code,void n(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r})},style:{cursor:"pointer"},children:[(0,A.jsx)("div",{className:"checkbox",style:{marginRight:12},children:s.has(e.code)&&(0,A.jsx)("div",{className:"checked-mark"})}),(0,A.jsxs)("div",{className:"fund-info",style:{flex:1},children:[(0,A.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px"},children:["#",e.code]})]})]},e.code))})}),(0,A.jsxs)("div",{className:"row",style:{marginTop:24,gap:12},children:[(0,A.jsx)("button",{className:"button secondary",onClick:r,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsxs)("button",{className:"button",onClick:()=>i(Array.from(s)),disabled:0===s.size,style:{flex:1},children:[" (",s.size,")"]})]})]})})}function ub({onClose:e,onConfirm:t}){let[r,i]=(0,C.useState)("");return(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,A.jsx)(lY,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)("button",{className:"icon-button",onClick:e,style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:20},children:[(0,A.jsx)("label",{className:"muted",style:{display:"block",marginBottom:8,fontSize:"14px"},children:" 8 "}),(0,A.jsx)("input",{className:"input",autoFocus:!0,placeholder:"...",value:r,onChange:e=>{i((e.target.value||"").slice(0,8))},onKeyDown:e=>{"Enter"===e.key&&r.trim()&&t(r.trim())}})]}),(0,A.jsxs)("div",{className:"row",style:{gap:12},children:[(0,A.jsx)("button",{className:"button secondary",onClick:e,style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{className:"button",onClick:()=>r.trim()&&t(r.trim()),disabled:!r.trim(),style:{flex:1},children:""})]})]})})}function ux({value:e,prefix:t="",suffix:r="",decimals:i=2,className:s="",style:n={}}){let[a,o]=(0,C.useState)(e),l=(0,C.useRef)(e);return(0,C.useEffect)(()=>{if(l.current===e)return;let t=l.current,r=performance.now(),i=s=>{let n=Math.min((s-r)/1e3,1);o(t+(e-t)*(1-Math.pow(1-n,4))),n<1?requestAnimationFrame(i):l.current=e};requestAnimationFrame(i)},[e]),(0,A.jsxs)("span",{className:s,style:n,children:[t,Math.abs(a).toFixed(i),r]})}function uj({funds:e,holdings:t,groupName:r,getProfit:i}){let[s,n]=(0,C.useState)(!0),a=(0,C.useRef)(null),[o,l]=(0,C.useState)(24),[u,c]=(0,C.useState)(18),[h,d]=(0,C.useState)(0);(0,C.useEffect)(()=>{{d(window.innerWidth);let e=()=>d(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]);let p=(0,C.useMemo)(()=>{let r=0,s=0,n=0,a=0,o=!1;e.forEach(e=>{let l=t[e.code],u=i(e,l);u&&(o=!0,r+=u.amount,s+=u.profitToday,null!==u.profitTotal&&(n+=u.profitTotal,l&&"number"==typeof l.cost&&"number"==typeof l.share&&(a+=l.cost*l.share)))});let l=a>0?n/a*100:0;return{totalAsset:r,totalProfitToday:s,totalHoldingReturn:n,hasHolding:o,returnRate:l}},[e,t,i]);return((0,C.useLayoutEffect)(()=>{let e=a.current;!e||e.clientHeight>80&&(l(e=>Math.max(16,e-1)),c(e=>Math.max(12,e-1)))},[h,p.totalAsset,p.totalProfitToday,p.totalHoldingReturn,p.returnRate,s,o,u]),p.hasHolding)?(0,A.jsx)("div",{className:"glass card",style:{marginBottom:16,padding:"16px 20px",background:"rgba(255, 255, 255, 0.03)"},children:(0,A.jsxs)("div",{ref:a,className:"row",style:{alignItems:"flex-end",justifyContent:"space-between"},children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"muted",style:{fontSize:"12px",marginBottom:4},children:r}),(0,A.jsxs)("div",{style:{fontSize:"24px",fontWeight:700,fontFamily:"var(--font-mono)"},children:[(0,A.jsx)("span",{style:{fontSize:"16px",marginRight:2},children:""}),(0,A.jsx)(ux,{value:p.totalAsset,style:{fontSize:o}})]})]}),(0,A.jsxs)("div",{style:{display:"flex",gap:24},children:[(0,A.jsxs)("div",{style:{textAlign:"right"},children:[(0,A.jsx)("div",{className:"muted",style:{fontSize:"12px",marginBottom:4},children:""}),(0,A.jsxs)("div",{className:p.totalProfitToday>0?"up":p.totalProfitToday<0?"down":"",style:{fontSize:"18px",fontWeight:700,fontFamily:"var(--font-mono)"},children:[(0,A.jsx)("span",{style:{marginRight:1},children:p.totalProfitToday>0?"+":p.totalProfitToday<0?"-":""}),(0,A.jsx)(ux,{value:Math.abs(p.totalProfitToday),style:{fontSize:u}})]})]}),(0,A.jsxs)("div",{style:{textAlign:"right"},children:[(0,A.jsxs)("div",{className:"muted",style:{fontSize:"12px",marginBottom:4},children:["",s?"(%)":""]}),(0,A.jsxs)("div",{className:p.totalHoldingReturn>0?"up":p.totalHoldingReturn<0?"down":"",style:{fontSize:"18px",fontWeight:700,fontFamily:"var(--font-mono)",cursor:"pointer"},onClick:()=>n(!s),title:"/",children:[(0,A.jsx)("span",{style:{marginRight:1},children:p.totalHoldingReturn>0?"+":p.totalHoldingReturn<0?"-":""}),s?(0,A.jsx)(ux,{value:Math.abs(p.returnRate),suffix:"%",style:{fontSize:u}}):(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(ux,{value:Math.abs(p.totalHoldingReturn),style:{fontSize:u}})})]})]})]})]})}):null}function uS(){let[e,t]=(0,C.useState)([]),[r,i]=(0,C.useState)(!1),[s,n]=(0,C.useState)(""),a=(0,C.useRef)(null),o=(0,C.useRef)(!1),[l,u]=(0,C.useState)(3e4),[c,h]=(0,C.useState)(!1),[d,p]=(0,C.useState)(30),[f,m]=(0,C.useState)(!1),[g,y]=(0,C.useState)(new Set),[v,w]=(0,C.useState)(new Set),[b,x]=(0,C.useState)([]),[j,S]=(0,C.useState)("all"),[k,_]=(0,C.useState)(!1),[E,T]=(0,C.useState)(!1),[O,N]=(0,C.useState)(!1),[P,I]=(0,C.useState)(null),[R,$]=(0,C.useState)("default"),[B,M]=(0,C.useState)("desc"),[D,L]=(0,C.useState)("card"),[z,U]=(0,C.useState)(null),[V,F]=(0,C.useState)(!1),[W,q]=(0,C.useState)(!1),[H,K]=(0,C.useState)(""),[J,G]=(0,C.useState)(!1),[Y,X]=(0,C.useState)(""),[Q,Z]=(0,C.useState)(""),[ee,et]=(0,C.useState)(""),er=(0,C.useMemo)(()=>z?.id?(function(e,t={}){var r,i,s,n,a,o,l,u,c,h,d;let p,f,m,g,y,v,w,b,x;o=t;let j=ai((t=JSON.parse(JSON.stringify({...aa(an),...aa(null!=(l=e.schema)?l:{}),...o}))).seed),S=e.create({prng:j,options:t}),k=j.pick(null!=(r=t.backgroundType)?r:[],"solid"),{primary:_,secondary:E}=(u=null!=(i=t.backgroundColor)?i:[],(p=j.shuffle(u)).length<=1||2==u.length&&"gradientLinear"==k?(p=u,j.next()):p=j.shuffle(u),0===p.length&&(p=["transparent"]),f=p[0],m=null!=(c=p[1])?c:p[0],{primary:ao(f),secondary:ao(m)}),T=j.integer((null==(s=t.backgroundRotation)?void 0:s.length)?Math.min(...t.backgroundRotation):0,(null==(n=t.backgroundRotation)?void 0:n.length)?Math.max(...t.backgroundRotation):0);t.size&&(S.attributes.width=t.size.toString(),S.attributes.height=t.size.toString()),void 0!==t.scale&&100!==t.scale&&(S.body=function(e,t){let{width:r,height:i,x:s,y:n}=as(e),a=t?(t-100)/100:0;return`<g transform="translate(${-((r/2+s)*a*1)} ${-((i/2+n)*a*1)}) scale(${t/100})">${e.body}</g>`}(S,t.scale)),t.flip&&(S.body=function(e){let{width:t,x:r}=as(e);return`<g transform="scale(-1 1) translate(${-1*t-2*r} 0)">${e.body}</g>`}(S)),t.rotate&&(S.body=function(e,t){let{width:r,height:i,x:s,y:n}=as(e);return`<g transform="rotate(${t}, ${r/2+s}, ${i/2+n})">${e.body}</g>`}(S,t.rotate)),(t.translateX||t.translateY)&&(h=t.translateX,d=t.translateY,y=((g=as(S)).width+2*g.x)*((null!=h?h:0)/100),v=(g.height+2*g.y)*((null!=d?d:0)/100),S.body=`<g transform="translate(${y} ${v})">${S.body}</g>`),"transparent"!==_&&"transparent"!==E&&(S.body=function(e,t,r,i,s){let{width:n,height:a,x:o,y:l}=as(e),u=`<rect fill="${t}" width="${n}" height="${a}" x="${o}" y="${l}" />`;switch(i){case"solid":return u+e.body;case"gradientLinear":return`<rect fill="url(#backgroundLinear)" width="${n}" height="${a}" x="${o}" y="${l}" /><defs><linearGradient id="backgroundLinear" gradientTransform="rotate(${s} 0.5 0.5)"><stop stop-color="${t}"/><stop offset="1" stop-color="${r}"/></linearGradient></defs>`+e.body}}(S,_,E,k,T)),(t.radius||t.clip)&&(S.body=function(e,t){let{width:r,height:i,x:s,y:n}=as(e);return`<mask id="viewboxMask"><rect width="${r}" height="${i}" rx="${t?r*t/100:0}" ry="${t?i*t/100:0}" x="${s}" y="${n}" fill="#fff" /></mask><g mask="url(#viewboxMask)">${e.body}</g>`}(S,null!=(a=t.radius)?a:0)),t.randomizeIds&&(w=ai(Math.random().toString()),b={},S.body=S.body.replace(/(id="|url\(#)([a-z0-9-_]+)([")])/gi,(e,t,r,i)=>(b[r]=b[r]||w.string(8),`${t}${b[r]}${i}`)));let A=Object.keys(x={xmlns:"http://www.w3.org/2000/svg",...S.attributes}).map(e=>`${n9(e)}="${n9(x[e])}"`).join(" "),C=ae(e),O=`<svg ${A}>${C}${S.body}</svg>`;return{toString:()=>O,toJson:()=>{var e;return{svg:O,extra:{primaryBackgroundColor:_,secondaryBackgroundColor:E,backgroundType:k,backgroundRotation:T,...null==(e=S.extra)?void 0:e.call(S)}}},toDataUri:()=>`data:image/svg+xml;utf8,${encodeURIComponent(O)}`}})(ad,{seed:z.id,size:80}).toDataUri():"",[z?.id]),[ei,es]=(0,C.useState)(!1),[en,ea]=(0,C.useState)(0),[eo,el]=(0,C.useState)(""),[eu,ec]=(0,C.useState)([]),[eh,ed]=(0,C.useState)([]),[ep,ef]=(0,C.useState)(!1),em=(0,C.useRef)(null),eg=(0,C.useRef)(null),[ey,ev]=(0,C.useState)(!1),[ew,eb]=(0,C.useState)(!1),[ex,ej]=(0,C.useState)([]),[eS,ek]=(0,C.useState)({open:!1,fund:null}),[e_,eE]=(0,C.useState)({open:!1,fund:null}),[eT,eA]=(0,C.useState)({open:!1,fund:null,type:"buy"}),[eC,eO]=(0,C.useState)(null),[eN,eP]=(0,C.useState)(!1),[eI,eR]=(0,C.useState)({}),[e$,eB]=(0,C.useState)({}),[eM,eD]=(0,C.useState)(!0),eL=(0,C.useRef)(null),[ez,eU]=(0,C.useState)(null),eV=new Date,eF=`${eV.getFullYear()}-${String(eV.getMonth()+1).padStart(2,"0")}-${String(eV.getDate()).padStart(2,"0")}`,[eW,eq]=(0,C.useState)(!1),[eH,eK]=(0,C.useState)(!1);(0,C.useEffect)(()=>{{let e=()=>eq(window.innerWidth<=640);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}},[]);let[eJ,eG]=(0,C.useState)(!1),[eY,eX]=(0,C.useState)(""),[eQ,eZ]=(0,C.useState)("");(0,C.useEffect)(()=>{let e=async()=>{try{let e=await fetch("https://api.github.com/repos/hzm0321/real-time-fund/releases/latest");if(!e.ok)return;let t=await e.json();if(t.tag_name){let e=t.tag_name.replace(/^v/,"");e!==lG.default.version&&(eG(!0),eX(e),eZ(t.body||""))}}catch(e){console.error("Check update failed:",e)}};e();let t=setInterval(e,6e5);return()=>clearInterval(t)},[]);let[e0,e1]=(0,C.useState)(null);(0,C.useEffect)(()=>{let e=e=>{!e.target.closest(".swipe-action-bg")&&e0&&e1(null)};return e0&&(document.addEventListener("click",e),document.addEventListener("touchstart",e)),()=>{document.removeEventListener("click",e),document.removeEventListener("touchstart",e)}},[e0]);let e2=()=>{let e=new Date,t=0===e.getDay()||6===e.getDay();if(t)return void eD(!1);let r=document.createElement("script");r.src=`https://qt.gtimg.cn/q=sh000001&_t=${Date.now()}`,r.onload=()=>{let t=window.v_sh000001;if(t){let r=t.split("~");r.length>30&&(r[30].slice(0,8)===eF.replace(/-/g,"")?eD(!0):60*e.getHours()+e.getMinutes()>=570?eD(!1):eD(!0))}document.body.removeChild(r)},r.onerror=()=>{document.body.removeChild(r),eD(!t)},document.body.appendChild(r)};(0,C.useEffect)(()=>{e2();let e=setInterval(e2,6e4);return()=>clearInterval(e)},[]);let e5=(e,t)=>{let r,i;if(!t||"number"!=typeof t.share)return null;let s=new Date().getHours()>=9,n=e.jzrq===eF,a="string"==typeof e.gztime&&e.gztime.startsWith(eF),o=n||a;if(eM&&s&&!n){if(!(r=e.estPricedCoverage>.05?e.estGsz:"number"==typeof e.gsz?e.gsz:Number(e.dwjz)))return null;if(o){let s=t.share*r;i=s-s/(1+(e.estPricedCoverage>.05?e.estGszzl:Number(e.gszzl)||0)/100)}else i=null}else{if(!(r=Number(e.dwjz)))return null;if(o){let s=t.share*r;i=s-s/(1+(void 0!==e.zzl?Number(e.zzl):Number(e.gszzl)||0)/100)}else i=null}return{amount:t.share*r,profitToday:i,profitTotal:"number"==typeof t.cost?(r-t.cost)*t.share:null}},e3=e.filter(e=>{if("all"===j)return!0;if("fav"===j)return v.has(e.code);let t=b.find(e=>e.id===j);return!t||t.codes.includes(e.code)}).sort((e,t)=>{if("yield"===R){let r="number"==typeof e.estGszzl?e.estGszzl:Number(e.gszzl)||0,i="number"==typeof t.estGszzl?t.estGszzl:Number(t.gszzl)||0;return"asc"===B?r-i:i-r}if("holding"===R){let r=e5(e,eI[e.code]),i=e5(t,eI[t.code]),s=r?.profitTotal??-1/0,n=i?.profitTotal??-1/0;return"asc"===B?s-n:n-s}return"name"===R?"asc"===B?e.name.localeCompare(t.name,"zh-CN"):t.name.localeCompare(e.name,"zh-CN"):0});(0,C.useEffect)(()=>{if(!eL.current)return;if("all"===j)return void eL.current.scrollTo({left:0,behavior:"smooth"});let e=eL.current.querySelector(".tab.active");e&&e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})},[j]);let[e4,e6]=(0,C.useState)(!1),[e8,e7]=(0,C.useState)(!1),[e9,te]=(0,C.useState)(!1),[tt,tr]=(0,C.useState)(!1),ti=(e,t)=>{eR(r=>{let i={...r};return null===t.share&&null===t.cost?delete i[e]:i[e]=t,localStorage.setItem("holdings",JSON.stringify(i)),i}),ek({open:!1,fund:null})},ts=()=>{e6(!1)},tn=()=>{if(!eL.current)return;let e=eL.current;e7(e.scrollWidth>e.clientWidth),te(e.scrollLeft>0),tr(e.scrollLeft<e.scrollWidth-e.clientWidth-1)};(0,C.useEffect)(()=>{tn();let e=()=>tn();return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[b,e.length,v.size]);let[ta,to]=(0,C.useState)({open:!1,message:""}),[tl,tu]=(0,C.useState)(!1),[tc,th]=(0,C.useState)({open:!1,userId:null}),td=(0,C.useRef)(null),tp=(0,C.useRef)(""),tf=(0,C.useRef)(!1),tm=(0,C.useRef)(null);(0,C.useEffect)(()=>{let e=e=>{eg.current&&!eg.current.contains(e.target)&&ev(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,C.useEffect)(()=>{tm.current=z?.id||null},[z]),(0,C.useEffect)(()=>{let e=new Set(["funds","favorites","groups","collapsedCodes","refreshMs","holdings"]),t=()=>{!tm.current||tf.current||(td.current&&clearTimeout(td.current),td.current=setTimeout(()=>{let e=t$(tB());e!==tp.current&&(tp.current=e,tL(tm.current,!1))},2e3))},r=localStorage.setItem.bind(localStorage),i=localStorage.removeItem.bind(localStorage),s=localStorage.clear.bind(localStorage);localStorage.setItem=(i,s)=>{r(i,s),e.has(i)&&(tf.current||r("localUpdatedAt",new Date().toISOString()),t())},localStorage.removeItem=s=>{i(s),e.has(s)&&(tf.current||r("localUpdatedAt",new Date().toISOString()),t())},localStorage.clear=()=>{s(),tf.current||r("localUpdatedAt",new Date().toISOString()),t()};let n=r=>{(!r.key||e.has(r.key))&&t()};return window.addEventListener("storage",n),()=>{localStorage.setItem=r,localStorage.removeItem=i,localStorage.clear=s,window.removeEventListener("storage",n),td.current&&clearTimeout(td.current)}},[]);let tg=e=>{w(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),localStorage.setItem("favorites",JSON.stringify(Array.from(r))),0===r.size&&S("all"),r})},ty=e=>{let t=b.map(t=>t.id===j?{...t,codes:t.codes.filter(t=>t!==e)}:t);x(t),localStorage.setItem("groups",JSON.stringify(t))},tv=e=>{let t=new Set;return e.filter(e=>{let r=e?.code;return!(!r||t.has(r))&&(t.add(r),!0)})};(0,C.useEffect)(()=>{try{let e=JSON.parse(localStorage.getItem("funds")||"[]");if(Array.isArray(e)&&e.length){let r=tv(e);t(r),localStorage.setItem("funds",JSON.stringify(r));let i=Array.from(new Set(r.map(e=>e.code)));i.length&&tT(i)}let r=parseInt(localStorage.getItem("refreshMs")||"30000",10);Number.isFinite(r)&&r>=5e3&&(u(r),p(Math.round(r/1e3)));let i=JSON.parse(localStorage.getItem("collapsedCodes")||"[]");Array.isArray(i)&&y(new Set(i));let s=JSON.parse(localStorage.getItem("favorites")||"[]");Array.isArray(s)&&w(new Set(s));let n=JSON.parse(localStorage.getItem("groups")||"[]");Array.isArray(n)&&x(n);let a=JSON.parse(localStorage.getItem("holdings")||"{}");a&&"object"==typeof a&&eR(a)}catch{}},[]),(0,C.useEffect)(()=>{let e=()=>{U(null),F(!1)},t=async(t,r)=>{if(!t?.user)return void e();if(t.expires_at&&1e3*t.expires_at<=Date.now()){await lJ.auth.signOut({scope:"local"}),e();return}U(t.user),("SIGNED_IN"===r||"TOKEN_REFRESHED"===r||"INITIAL_SESSION"===r)&&(q(!1),K(""),Z(""),X("")),tD(t.user.id)};lJ.auth.getSession().then(async({data:r,error:i})=>{i?e():await t(r?.session??null,"INITIAL_SESSION")});let{data:{subscription:r}}=lJ.auth.onAuthStateChange(async(e,r)=>{await t(r??null,e)});return()=>r.unsubscribe()},[]),(0,C.useEffect)(()=>{if(!z?.id)return;let e=lJ.channel(`user-configs-${z.id}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"user_configs",filter:`user_id=eq.${z.id}`},async e=>{let t=e?.new?.data;if(!t||"object"!=typeof t)return;let r=t$(t);r&&r!==tp.current&&await tM(t,e.new.updated_at)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_configs",filter:`user_id=eq.${z.id}`},async e=>{let t=e?.new?.data;if(!t||"object"!=typeof t)return;let r=t$(t);r&&r!==tp.current&&await tM(t,e.new.updated_at)}).subscribe();return()=>{lJ.removeChannel(e)}},[z?.id]);let tw=async e=>{if(e.preventDefault(),X(""),Z(""),!H.trim())return void X("");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H.trim()))return void X("");G(!0);try{let{error:e}=await lJ.auth.signInWithOtp({email:H.trim(),options:{shouldCreateUser:!0}});if(e)throw e;Z("/")}catch(e){e.message?.includes("rate limit")?X(""):e.message?.includes("network")?X(""):X(e.message||"")}finally{G(!1)}},tb=async()=>{if(X(""),!ee||ee.length<4)return void X("");try{G(!0);let{data:e,error:t}=await lJ.auth.verifyOtp({email:H.trim(),token:ee.trim(),type:"email"});if(t)throw t;e?.user&&(q(!1),K(""),et(""),Z(""),X(""),tD(e.user.id))}catch(e){X(e.message||"")}G(!1)},tx=async()=>{try{let{data:{session:e}}=await lJ.auth.getSession();if(!e){await lJ.auth.signOut({scope:"local"}),F(!1),U(null);return}let{error:t}=await lJ.auth.signOut();if(t?.code==="session_not_found")await lJ.auth.signOut({scope:"local"});else if(t)throw t;F(!1),U(null)}catch(e){console.error("",e),F(!1),U(null)}},tj=(0,C.useRef)(null);(0,C.useEffect)(()=>{let e=e=>{tj.current&&!tj.current.contains(e.target)&&F(!1)};return V&&document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[V]),(0,C.useEffect)(()=>(a.current&&clearInterval(a.current),a.current=setInterval(()=>{let t=Array.from(new Set(e.map(e=>e.code)));t.length&&tT(t)},l),()=>{a.current&&clearInterval(a.current)}),[e,l]);let tS=async e=>new Promise(async(t,r)=>{let i=`SuggestData_fallback_${Date.now()}`,s=`https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=1&key=${encodeURIComponent(e)}&callback=${i}&_=${Date.now()}`,n="";try{await new Promise((t,r)=>{window[i]=r=>{if(r&&r.Datas&&r.Datas.length>0){let t=r.Datas.find(t=>t.CODE===e);t&&(n=t.NAME||t.SHORTNAME||"")}delete window[i],t()};let a=document.createElement("script");a.src=s,a.async=!0,a.onload=()=>{document.body.contains(a)&&document.body.removeChild(a)},a.onerror=()=>{document.body.contains(a)&&document.body.removeChild(a),delete window[i],r(Error(""))},document.body.appendChild(a),setTimeout(()=>{window[i]&&(delete window[i],t())},3e3)})}catch(e){}let a=`https://qt.gtimg.cn/q=jj${e}`,o=document.createElement("script");o.src=a,o.onload=()=>{let i=window[`v_jj${e}`];if(i&&i.length>5){let s=i.split("~"),a=n||s[1]||`(${e})`,o=s[5],l=parseFloat(s[7]),u=s[8]?s[8].slice(0,10):"";o?t({code:e,name:a,dwjz:o,gsz:null,gztime:null,jzrq:u,gszzl:null,zzl:isNaN(l)?null:l,noValuation:!0,holdings:[]}):r(Error(""))}else r(Error(""));document.body.contains(o)&&document.body.removeChild(o)},o.onerror=()=>{document.body.contains(o)&&document.body.removeChild(o),r(Error(""))},document.body.appendChild(o)}),tk=async e=>new Promise(async(t,r)=>{let i=`https://fundgz.1234567.com.cn/js/${e}.js?rt=${Date.now()}`;Math.random().toString(36).slice(2,7);let s=document.createElement("script");s.src=i;let n=window.jsonpgz;window.jsonpgz=i=>{if(window.jsonpgz=n,!i||"object"!=typeof i)return void tS(e).then(t).catch(r);let s=Number(i.gszzl),a={code:i.fundcode,name:i.name,dwjz:i.dwjz,gsz:i.gsz,gztime:i.gztime,jzrq:i.jzrq,gszzl:Number.isFinite(s)?s:i.gszzl};Promise.all([new Promise(t=>{let r=`https://qt.gtimg.cn/q=jj${e}`,i=document.createElement("script");i.src=r,i.onload=()=>{let r=window[`v_jj${e}`];if(r){let e=r.split("~");t({dwjz:e[5],zzl:parseFloat(e[7]),jzrq:e[8]?e[8].slice(0,10):""})}else t(null);document.body.contains(i)&&document.body.removeChild(i)},i.onerror=()=>{document.body.contains(i)&&document.body.removeChild(i),t(null)},document.body.appendChild(i)}),new Promise(t=>{let r;(r=`https://fundf10.eastmoney.com/FundArchivesDatas.aspx?type=jjcc&code=${e}&topline=10&year=&month=&_=${Date.now()}`,new Promise((e,t)=>{let i=document.createElement("script");i.src=r,i.async=!0,i.onload=()=>{document.body.removeChild(i),e()},i.onerror=()=>{document.body.removeChild(i),t(Error(""))},document.body.appendChild(i)})).then(async()=>{let e=[],r=window.apidata?.content||"",i=(((r.match(/<thead[\s\S]*?<tr[\s\S]*?<\/tr>[\s\S]*?<\/thead>/i)||[])[0]||"").match(/<th[\s\S]*?>([\s\S]*?)<\/th>/gi)||[]).map(e=>e.replace(/<[^>]*>/g,"").trim()),s=-1,n=-1,a=-1;i.forEach((e,t)=>{let r=e.replace(/\s+/g,"");s<0&&(r.includes("")||r.includes(""))&&(s=t),n<0&&(r.includes("")||r.includes(""))&&(n=t),a<0&&(r.includes("")||r.includes(""))&&(a=t)});let o=r.match(/<tbody[\s\S]*?<\/tbody>/i)||[];for(let t of o.length?o[0].match(/<tr[\s\S]*?<\/tr>/gi)||[]:r.match(/<tr[\s\S]*?<\/tr>/gi)||[]){let r=(t.match(/<td[\s\S]*?>([\s\S]*?)<\/td>/gi)||[]).map(e=>e.replace(/<[^>]*>/g,"").trim());if(!r.length)continue;let i="",o="",l="";if(s>=0&&r[s]){let e=r[s].match(/(\d{6})/);i=e?e[1]:r[s]}else{let e=r.findIndex(e=>/^\d{6}$/.test(e));e>=0&&(i=r[e])}if(n>=0&&r[n])o=r[n];else if(i){let e=r.findIndex(e=>e&&e!==i&&!/%$/.test(e));o=e>=0?r[e]:""}if(a>=0&&r[a]){let e=r[a].match(/([\d.]+)\s*%/);l=e?`${e[1]}%`:r[a]}else{let e=r.findIndex(e=>/\d+(?:\.\d+)?\s*%/.test(e));l=e>=0?r[e].match(/([\d.]+)\s*%/)?.[1]+"%":""}(i||o||l)&&e.push({code:i,name:o,weight:l,change:null})}let l=(e=e.slice(0,10)).filter(e=>/^\d{6}$/.test(e.code)||/^\d{5}$/.test(e.code));if(l.length)try{let r=l.map(e=>{let t=String(e.code||"");if(/^\d{6}$/.test(t)){let e=t.startsWith("6")||t.startsWith("9")?"sh":t.startsWith("4")||t.startsWith("8")?"bj":"sz";return`s_${e}${t}`}return/^\d{5}$/.test(t)?`s_hk${t}`:null}).filter(Boolean).join(",");if(!r)return void t(e);let i=`https://qt.gtimg.cn/q=${r}`;await new Promise(e=>{let t=document.createElement("script");t.src=i,t.onload=()=>{l.forEach(e=>{let t=String(e.code||""),r="";if(/^\d{6}$/.test(t)){let e=t.startsWith("6")||t.startsWith("9")?"sh":t.startsWith("4")||t.startsWith("8")?"bj":"sz";r=`v_s_${e}${t}`}else{if(!/^\d{5}$/.test(t))return;r=`v_s_hk${t}`}let i=window[r];if(i){let t=i.split("~");t.length>5&&(e.change=parseFloat(t[5]))}}),document.body.contains(t)&&document.body.removeChild(t),e()},t.onerror=()=>{document.body.contains(t)&&document.body.removeChild(t),e()},document.body.appendChild(t)})}catch(e){}t(e)}).catch(()=>t([]))})]).then(([e,r])=>{e&&e.jzrq&&(!a.jzrq||e.jzrq>=a.jzrq)&&(a.dwjz=e.dwjz,a.jzrq=e.jzrq,a.zzl=e.zzl),t({...a,holdings:r})})},s.onerror=()=>{window.jsonpgz=n,document.body.contains(s)&&document.body.removeChild(s),r(Error(""))},document.body.appendChild(s),setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},5e3)}),t_=async e=>{if(!e.trim())return void ec([]);ef(!0);let t=`SuggestData_${Date.now()}`,r=`https://fundsuggest.eastmoney.com/FundSearch/api/FundSearchAPI.ashx?m=1&key=${encodeURIComponent(e)}&callback=${t}&_=${Date.now()}`;try{await new Promise((e,i)=>{window[t]=r=>{if(r&&r.Datas){let e=r.Datas.filter(e=>700===e.CATEGORY||"700"===e.CATEGORY||""===e.CATEGORYDESC);ec(e)}delete window[t],e()};let s=document.createElement("script");s.src=r,s.async=!0,s.onload=()=>{document.body.contains(s)&&document.body.removeChild(s)},s.onerror=()=>{document.body.contains(s)&&document.body.removeChild(s),delete window[t],i(Error(""))},document.body.appendChild(s)})}catch(e){console.error("",e)}finally{ef(!1)}},tE=e=>{ed(t=>t.find(t=>t.CODE===e.CODE)?t.filter(t=>t.CODE!==e.CODE):[...t,e])},tT=async e=>{if(o.current)return;o.current=!0,m(!0);let r=Array.from(new Set(e));try{let e=[];for(let i of r)try{let t=await tk(i);e.push(t)}catch(r){console.error(` ${i} `,r),t(t=>{let r=t.find(e=>e.code===i);return r&&e.push(r),t})}e.length>0&&t(t=>{let r=[...t];e.forEach(e=>{let t=r.findIndex(t=>t.code===e.code);t>-1?r[t]=e:r.push(e)});let i=tv(r);return localStorage.setItem("funds",JSON.stringify(i)),i})}catch(e){console.error(e)}finally{o.current=!1,m(!1)}},tA=e=>{let t=eI[e.code];t&&"number"==typeof t.share&&t.share>0?eU({code:e.code,name:e.name}):tO(e.code)},tC=async r=>{r?.preventDefault?.(),n("");let s=String(eo||"").split(/[^0-9A-Za-z]+/).map(e=>e.trim()).filter(e=>e.length>0),a=Array.from(new Set([...eh.map(e=>e.CODE),...s.filter(e=>/^\d{6}$/.test(e))]));if(0===a.length)return void n("");i(!0);try{let r=[],i=[],s={};for(let t of(eh.forEach(e=>{s[e.CODE]=e.NAME}),a))if(!e.some(e=>e.code===t))try{let e=await tk(t);r.push(e)}catch(e){i.push({code:t,name:s[t]})}if(0===r.length)n("");else{let i=tv([...r,...e]);t(i),localStorage.setItem("funds",JSON.stringify(i))}el(""),ed([]),ev(!1),i.length>0&&(ej(i),eb(!0))}catch(e){n(e.message||"")}finally{i(!1)}},tO=r=>{let i=e.filter(e=>e.code!==r);t(i),localStorage.setItem("funds",JSON.stringify(i));let s=b.map(e=>({...e,codes:e.codes.filter(e=>e!==r)}));x(s),localStorage.setItem("groups",JSON.stringify(s)),y(e=>{if(!e.has(r))return e;let t=new Set(e);return t.delete(r),localStorage.setItem("collapsedCodes",JSON.stringify(Array.from(t))),t}),w(e=>{if(!e.has(r))return e;let t=new Set(e);return t.delete(r),localStorage.setItem("favorites",JSON.stringify(Array.from(t))),0===t.size&&S("all"),t}),eR(e=>{if(!e[r])return e;let t={...e};return delete t[r],localStorage.setItem("holdings",JSON.stringify(t)),t})},tN=async()=>{if(o.current)return;let t=Array.from(new Set(e.map(e=>e.code)));t.length&&await tT(t)},tP=(0,C.useRef)(null),[tI,tR]=(0,C.useState)("");function t$(e){return e&&"object"==typeof e?JSON.stringify({funds:Array.isArray(e.funds)?e.funds:[],favorites:Array.isArray(e.favorites)?e.favorites:[],groups:Array.isArray(e.groups)?e.groups:[],collapsedCodes:Array.isArray(e.collapsedCodes)?e.collapsedCodes:[],refreshMs:Number.isFinite(e.refreshMs)?e.refreshMs:3e4,holdings:e.holdings&&"object"==typeof e.holdings?e.holdings:{}}):""}let tB=()=>{try{let e=JSON.parse(localStorage.getItem("funds")||"[]"),t=JSON.parse(localStorage.getItem("favorites")||"[]"),r=JSON.parse(localStorage.getItem("groups")||"[]"),i=JSON.parse(localStorage.getItem("collapsedCodes")||"[]"),s=new Set(Array.isArray(e)?e.map(e=>e?.code).filter(Boolean):[]),n=JSON.parse(localStorage.getItem("holdings")||"{}"),a=n&&"object"==typeof n&&!Array.isArray(n)?Object.entries(n).reduce((e,[t,r])=>{if(!s.has(t)||!r||"object"!=typeof r)return e;let i="number"==typeof r.share?r.share:"string"==typeof r.share?Number(r.share):NaN,n="number"==typeof r.cost?r.cost:"string"==typeof r.cost?Number(r.cost):NaN,a=Number.isFinite(i)?i:null,o=Number.isFinite(n)?n:null;return null===a&&null===o||(e[t]={...r,share:a,cost:o}),e},{}):{},o=Array.isArray(t)?t.filter(e=>s.has(e)):[],l=Array.isArray(i)?i.filter(e=>s.has(e)):[],u=Array.isArray(r)?r.map(e=>({...e,codes:Array.isArray(e?.codes)?e.codes.filter(e=>s.has(e)):[]})):[];return{funds:e,favorites:o,groups:u,collapsedCodes:l,refreshMs:parseInt(localStorage.getItem("refreshMs")||"30000",10),holdings:a,exportedAt:new Date().toISOString()}}catch{return{funds:[],favorites:[],groups:[],collapsedCodes:[],refreshMs:3e4,holdings:{},exportedAt:new Date().toISOString()}}},tM=async(e,r)=>{if(e&&"object"==typeof e){tf.current=!0;try{r&&localStorage.setItem("localUpdatedAt",new Date(r).toISOString());let i=Array.isArray(e.funds)?tv(e.funds):[];t(i),localStorage.setItem("funds",JSON.stringify(i));let s=Array.isArray(e.favorites)?e.favorites:[];w(new Set(s)),localStorage.setItem("favorites",JSON.stringify(s));let n=Array.isArray(e.groups)?e.groups:[];x(n),localStorage.setItem("groups",JSON.stringify(n));let a=Array.isArray(e.collapsedCodes)?e.collapsedCodes:[];y(new Set(a)),localStorage.setItem("collapsedCodes",JSON.stringify(a));let o=Number.isFinite(e.refreshMs)&&e.refreshMs>=5e3?e.refreshMs:3e4;u(o),p(Math.round(o/1e3)),localStorage.setItem("refreshMs",String(o)),("card"===e.viewMode||"list"===e.viewMode)&&L(e.viewMode);let l=e.holdings&&"object"==typeof e.holdings?e.holdings:{};if(eR(l),localStorage.setItem("holdings",JSON.stringify(l)),i.length){let e=Array.from(new Set(i.map(e=>e.code)));e.length&&await tT(e)}let c=tB();tp.current=t$(c)}finally{tf.current=!1}}},tD=async e=>{if(e)try{let{data:t,error:r}=await lJ.from("user_configs").select("id, data, updated_at").eq("user_id",e).maybeSingle();if(r)throw r;if(!t?.id){let{error:t}=await lJ.from("user_configs").insert({user_id:e});if(t)throw t;th({open:!0,userId:e,type:"empty"});return}if(t?.data&&"object"==typeof t.data&&Object.keys(t.data).length>0){let r=tB(),i=t$(r),s=t$(t.data);if(i!==s){let r=new Date(t.updated_at||0).getTime();if(new Date(localStorage.getItem("localUpdatedAt")||0).getTime()>r+2e3)return void th({open:!0,userId:e,type:"conflict",cloudData:t.data})}await tM(t.data,t.updated_at);return}th({open:!0,userId:e,type:"empty"})}catch(e){console.error("",e)}},tL=async(e,t=!0)=>{if(e)try{let r=tB(),i=new Date().toISOString(),{error:s}=await lJ.from("user_configs").upsert({user_id:e,data:r,updated_at:i},{onConflict:"user_id"});if(s)throw s;localStorage.setItem("localUpdatedAt",i),t&&to({open:!0,message:""})}catch(e){console.error("",e)}},tz=async()=>{let e=tc.userId;th({open:!1,userId:null}),await tL(e)},tU=async()=>{try{let e={funds:JSON.parse(localStorage.getItem("funds")||"[]"),favorites:JSON.parse(localStorage.getItem("favorites")||"[]"),groups:JSON.parse(localStorage.getItem("groups")||"[]"),collapsedCodes:JSON.parse(localStorage.getItem("collapsedCodes")||"[]"),refreshMs:parseInt(localStorage.getItem("refreshMs")||"30000",10),holdings:JSON.parse(localStorage.getItem("holdings")||"{}"),exportedAt:new Date().toISOString()},t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});if(window.showSaveFilePicker){let e=await window.showSaveFilePicker({suggestedName:`realtime-fund-config-${Date.now()}.json`,types:[{description:"JSON",accept:{"application/json":[".json"]}}]}),r=await e.createWritable();await r.write(t),await r.close(),to({open:!0,message:""}),h(!1);return}let r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=`realtime-fund-config-${Date.now()}.json`;let s=!1,n=()=>{s||(s=!0,URL.revokeObjectURL(r),to({open:!0,message:""}),h(!1))},a=()=>{"hidden"!==document.visibilityState&&(n(),document.removeEventListener("visibilitychange",a))};document.addEventListener("visibilitychange",a,{once:!0}),i.click(),setTimeout(n,3e3)}catch(e){console.error("Export error:",e)}},tV=async e=>{try{let r=e.target.files?.[0];if(!r)return;let i=await r.text(),s=JSON.parse(i);if(s&&"object"==typeof s){let e=JSON.parse(localStorage.getItem("funds")||"[]"),r=JSON.parse(localStorage.getItem("favorites")||"[]"),i=JSON.parse(localStorage.getItem("groups")||"[]"),n=JSON.parse(localStorage.getItem("collapsedCodes")||"[]"),a=e,o=[];if(Array.isArray(s.funds)){let r=tv(s.funds),i=new Set(e.map(e=>e.code)),n=r.filter(e=>e&&e.code&&!i.has(e.code));o=n.map(e=>e.code),a=[...e,...n],t(a),localStorage.setItem("funds",JSON.stringify(a))}if(Array.isArray(s.favorites)){let e=Array.from(new Set([...r,...s.favorites]));w(new Set(e)),localStorage.setItem("favorites",JSON.stringify(e))}if(Array.isArray(s.groups)){let e=[...i];s.groups.forEach(t=>{let r=e.findIndex(e=>e.id===t.id);r>-1?e[r]={...e[r],codes:Array.from(new Set([...e[r].codes,...t.codes||[]]))}:e.push(t)}),x(e),localStorage.setItem("groups",JSON.stringify(e))}if(Array.isArray(s.collapsedCodes)){let e=Array.from(new Set([...n,...s.collapsedCodes]));y(new Set(e)),localStorage.setItem("collapsedCodes",JSON.stringify(e))}if("number"==typeof s.refreshMs&&s.refreshMs>=5e3&&(u(s.refreshMs),p(Math.round(s.refreshMs/1e3)),localStorage.setItem("refreshMs",String(s.refreshMs))),("card"===s.viewMode||"list"===s.viewMode)&&L(s.viewMode),s.holdings&&"object"==typeof s.holdings){let e={...JSON.parse(localStorage.getItem("holdings")||"{}"),...s.holdings};eR(e),localStorage.setItem("holdings",JSON.stringify(e))}if(o.length){let e=a.map(e=>e.code);await tT(e)}to({open:!0,message:""}),h(!1),tP.current&&(tP.current.value="")}}catch(e){console.error("Import error:",e),tR(""),setTimeout(()=>tR(""),4e3),tP.current&&(tP.current.value="")}};return(0,C.useEffect)(()=>(c||ei||ew||O||E||k||ta.open||tc.open||eH||eS.open||e_.open||eT.open||eC||eN||ez||tl?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[c,ei,ew,O,E,k,ta.open,tc.open,eH,eS.open,e_.open,eT.open,eC,eN,tl]),(0,C.useEffect)(()=>{let e=e=>{"Escape"===e.key&&c&&h(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[c]),(0,A.jsxs)("div",{className:"container content",children:[(0,A.jsx)(af,{}),(0,A.jsxs)("div",{className:"navbar glass",children:[f&&(0,A.jsx)("div",{className:"loading-bar"}),(0,A.jsxs)("div",{className:"brand",children:[(0,A.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,A.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"var(--accent)",strokeWidth:"2"}),(0,A.jsx)("path",{d:"M5 14c2-4 7-6 14-5",stroke:"var(--primary)",strokeWidth:"2"})]}),(0,A.jsx)("span",{children:""})]}),(0,A.jsxs)("div",{className:"actions",children:[eJ&&(0,A.jsx)("div",{className:"badge",title:` ${eY}`,style:{cursor:"pointer",borderColor:"var(--success)",color:"var(--success)"},onClick:()=>tu(!0),children:(0,A.jsx)(lX,{width:"14",height:"14"})}),(0,A.jsx)("img",{alt:"Github",src:ay.src,style:{width:"30px",height:"30px",cursor:"pointer"},onClick:()=>window.open("https://github.com/hzm0321/real-time-fund")}),(0,A.jsxs)("div",{className:"badge",title:"",children:[(0,A.jsx)("span",{children:""}),(0,A.jsxs)("strong",{children:[Math.round(l/1e3),""]})]}),(0,A.jsx)("button",{className:"icon-button","aria-label":"",onClick:tN,disabled:f||0===e.length,"aria-busy":f,title:"",children:(0,A.jsx)(l1,{className:f?"spin":"",width:"18",height:"18"})}),(0,A.jsxs)("div",{className:"user-menu-container",ref:tj,children:[(0,A.jsx)("button",{className:`icon-button user-menu-trigger ${z?"logged-in":""}`,"aria-label":z?"":"",onClick:()=>F(!V),title:z?z.email||"":"",children:z?(0,A.jsx)("div",{className:"user-avatar-small",children:er?(0,A.jsx)("img",{src:er,alt:"",style:{width:"100%",height:"100%",borderRadius:"50%"}}):z.email?.charAt(0).toUpperCase()||"U"}):(0,A.jsx)(l3,{width:"18",height:"18"})}),(0,A.jsx)(nK,{children:V&&(0,A.jsx)(nD.div,{className:"user-menu-dropdown glass",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},style:{transformOrigin:"top right"},children:z?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"user-menu-header",children:[(0,A.jsx)("div",{className:"user-avatar-large",children:er?(0,A.jsx)("img",{src:er,alt:"",style:{width:"100%",height:"100%",borderRadius:"50%"}}):z.email?.charAt(0).toUpperCase()||"U"}),(0,A.jsxs)("div",{className:"user-info",children:[(0,A.jsx)("span",{className:"user-email",children:z.email}),(0,A.jsx)("span",{className:"user-status",children:""})]})]}),(0,A.jsx)("div",{className:"user-menu-divider"}),(0,A.jsxs)("button",{className:"user-menu-item",onClick:()=>{F(!1),h(!0)},children:[(0,A.jsx)(lZ,{width:"16",height:"16"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsxs)("button",{className:"user-menu-item danger",onClick:()=>{F(!1),eK(!0)},children:[(0,A.jsx)(l4,{width:"16",height:"16"}),(0,A.jsx)("span",{children:""})]})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("button",{className:"user-menu-item",onClick:()=>{F(!1),q(!0)},children:[(0,A.jsx)(l6,{width:"16",height:"16"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsxs)("button",{className:"user-menu-item",onClick:()=>{F(!1),h(!0)},children:[(0,A.jsx)(lZ,{width:"16",height:"16"}),(0,A.jsx)("span",{children:""})]})]})})})]})]})]}),(0,A.jsxs)("div",{className:"grid",children:[(0,A.jsxs)("div",{className:"col-12 glass card add-fund-section",role:"region","aria-label":"",children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,A.jsx)(lY,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""}),(0,A.jsx)("span",{className:"muted",children:""})]}),(0,A.jsxs)("div",{className:"search-container",ref:eg,children:[(0,A.jsxs)("form",{className:"form",onSubmit:tC,children:[(0,A.jsxs)("div",{className:"search-input-wrapper",style:{flex:1,gap:8,alignItems:"center",flexWrap:"wrap"},children:[eh.length>0&&(0,A.jsx)("div",{className:"selected-inline-chips",children:eh.map(e=>(0,A.jsxs)("div",{className:"fund-chip",children:[(0,A.jsx)("span",{children:e.NAME}),(0,A.jsx)("button",{onClick:()=>tE(e),className:"remove-chip",children:(0,A.jsx)(l9,{width:"14",height:"14"})})]},e.CODE))}),(0,A.jsx)("input",{className:"input",placeholder:"...",value:eo,onChange:e=>{let t=e.target.value;el(t),em.current&&clearTimeout(em.current),em.current=setTimeout(()=>t_(t),300)},onFocus:()=>ev(!0)}),ep&&(0,A.jsx)("div",{className:"search-spinner"})]}),(0,A.jsx)("button",{className:"button",type:"submit",disabled:r||f,style:{pointerEvents:f?"none":"auto",opacity:f?.6:1},children:r?"":""})]}),(0,A.jsx)(nK,{children:ey&&(eo.trim()||eu.length>0)&&(0,A.jsx)(nD.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"search-dropdown glass",children:eu.length>0?(0,A.jsx)("div",{className:"search-results",children:eu.map(t=>{let r=eh.some(e=>e.CODE===t.CODE),i=e.some(e=>e.code===t.CODE);return(0,A.jsxs)("div",{className:`search-item ${r?"selected":""} ${i?"added":""}`,onClick:()=>{i||tE(t)},children:[(0,A.jsxs)("div",{className:"fund-info",children:[(0,A.jsx)("span",{className:"fund-name",children:t.NAME}),(0,A.jsxs)("span",{className:"fund-code muted",children:["#",t.CODE," | ",t.TYPE]})]}),i?(0,A.jsx)("span",{className:"added-label",children:""}):(0,A.jsx)("div",{className:"checkbox",children:r&&(0,A.jsx)("div",{className:"checked-mark"})})]},t.CODE)})}):eo.trim()&&!ep?(0,A.jsx)("div",{className:"no-results muted",children:""}):null})})]}),s&&(0,A.jsx)("div",{className:"muted",style:{marginTop:8,color:"var(--danger)"},children:s})]}),(0,A.jsxs)("div",{className:"col-12",children:[(0,A.jsxs)("div",{className:"filter-bar",style:{marginBottom:16,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:12},children:[(0,A.jsxs)("div",{className:"tabs-container",children:[(0,A.jsx)("div",{className:"tabs-scroll-area","data-mask-left":e9,"data-mask-right":tt,children:(0,A.jsx)("div",{className:"tabs",ref:eL,onMouseDown:e=>{eL.current&&e6(!0)},onMouseLeave:ts,onMouseUp:ts,onMouseMove:e=>{e4&&eL.current&&(e.preventDefault(),eL.current.scrollLeft-=e.movementX)},onWheel:e=>{if(!eL.current)return;let t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?e.deltaX:e.deltaY;eL.current.scrollLeft+=t},onScroll:tn,children:(0,A.jsxs)(nK,{mode:"popLayout",children:[(0,A.jsxs)(nD.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`tab ${"all"===j?"active":""}`,onClick:()=>S("all"),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:[" (",e.length,")"]},"all"),(0,A.jsxs)(nD.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`tab ${"fav"===j?"active":""}`,onClick:()=>S("fav"),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:[" (",v.size,")"]},"fav"),b.map(e=>(0,A.jsxs)(nD.button,{layout:!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`tab ${j===e.id?"active":""}`,onClick:()=>S(e.id),transition:{type:"spring",stiffness:500,damping:30,mass:1},children:[e.name," (",e.codes.length,")"]},e.id))]})})}),b.length>0&&(0,A.jsx)("button",{className:"icon-button manage-groups-btn",onClick:()=>T(!0),title:"",children:(0,A.jsx)(l5,{width:"16",height:"16"})}),(0,A.jsx)("button",{className:"icon-button add-group-btn",onClick:()=>_(!0),title:"",children:(0,A.jsx)(lY,{width:"16",height:"16"})})]}),(0,A.jsxs)("div",{className:"sort-group",style:{display:"flex",alignItems:"center",gap:12},children:[(0,A.jsxs)("div",{className:"view-toggle",style:{display:"flex",background:"rgba(255,255,255,0.05)",borderRadius:"10px",padding:"2px"},children:[(0,A.jsx)("button",{className:`icon-button ${"card"===D?"active":""}`,onClick:()=>{L("card")},style:{border:"none",width:"32px",height:"32px",background:"card"===D?"var(--primary)":"transparent",color:"card"===D?"#05263b":"var(--muted)"},title:"",children:(0,A.jsx)(l7,{width:"16",height:"16"})}),(0,A.jsx)("button",{className:`icon-button ${"list"===D?"active":""}`,onClick:()=>{L("list")},style:{border:"none",width:"32px",height:"32px",background:"list"===D?"var(--primary)":"transparent",color:"list"===D?"#05263b":"var(--muted)"},title:"",children:(0,A.jsx)(ut,{width:"16",height:"16"})})]}),(0,A.jsx)("div",{className:"divider",style:{width:"1px",height:"20px",background:"var(--border)"}}),(0,A.jsxs)("div",{className:"sort-items",style:{display:"flex",alignItems:"center",gap:8},children:[(0,A.jsxs)("span",{className:"muted",style:{fontSize:"12px",display:"flex",alignItems:"center",gap:4},children:[(0,A.jsx)(l5,{width:"14",height:"14"}),""]}),(0,A.jsx)("div",{className:"chips",children:[{id:"default",label:""},{id:"yield",label:""},{id:"holding",label:""},{id:"name",label:""}].map(e=>(0,A.jsxs)("button",{className:`chip ${R===e.id?"active":""}`,onClick:()=>{R===e.id?M(e=>"asc"===e?"desc":"asc"):($(e.id),M("desc"))},style:{height:"28px",fontSize:"12px",padding:"0 10px",display:"flex",alignItems:"center",gap:4},children:[(0,A.jsx)("span",{children:e.label}),"default"!==e.id&&R===e.id&&(0,A.jsxs)("span",{style:{display:"inline-flex",flexDirection:"column",lineHeight:1,fontSize:"8px"},children:[(0,A.jsx)("span",{style:{opacity:"asc"===B?1:.3},children:""}),(0,A.jsx)("span",{style:{opacity:"desc"===B?1:.3},children:""})]})]},e.id))})]})]})]}),0===e3.length?(0,A.jsxs)("div",{className:"glass card empty",style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"60px 20px"},children:[(0,A.jsx)("div",{style:{fontSize:"48px",marginBottom:16,opacity:.5},children:""}),(0,A.jsx)("div",{className:"muted",style:{marginBottom:20},children:0===e.length?"":""}),"all"!==j&&"fav"!==j&&e.length>0&&(0,A.jsx)("button",{className:"button",onClick:()=>N(!0),children:""})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(uj,{funds:e3,holdings:eI,groupName:(()=>{if("all"===j)return"";if("fav"===j)return"";let e=b.find(e=>e.id===j);return e?`${e.name}`:""})(),getProfit:e5}),"all"!==j&&"fav"!==j&&(0,A.jsxs)(nD.button,{initial:{opacity:0},animate:{opacity:1},className:"button-dashed",onClick:()=>N(!0),style:{width:"100%",height:"48px",border:"2px dashed rgba(255,255,255,0.1)",background:"transparent",borderRadius:"12px",color:"var(--muted)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"16px",cursor:"pointer",transition:"all 0.2s ease",fontSize:"14px",fontWeight:500},onMouseEnter:e=>{e.currentTarget.style.borderColor="var(--primary)",e.currentTarget.style.color="var(--primary)",e.currentTarget.style.background="rgba(34, 211, 238, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="rgba(255,255,255,0.1)",e.currentTarget.style.color="var(--muted)",e.currentTarget.style.background="transparent"},children:[(0,A.jsx)(lY,{width:"18",height:"18"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)(nK,{mode:"wait",children:(0,A.jsx)(nD.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"card"===D?"grid":"table-container glass",children:(0,A.jsxs)("div",{className:"card"===D?"grid col-12":"",style:"card"===D?{gridColumn:"span 12",gap:16}:{},children:["list"===D&&(0,A.jsxs)("div",{className:"table-header-row",children:[(0,A.jsx)("div",{className:"table-header-cell",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:"/"}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-right",children:""}),(0,A.jsx)("div",{className:"table-header-cell text-center",children:""})]}),(0,A.jsx)(nK,{mode:"popLayout",children:e3.map(e=>{let t,r,i,s,n,a,o,l,u,c,h,d,p,m,w,b,x,S,k,_;return(0,A.jsxs)(nD.div,{layout:"position",className:"card"===D?"col-6":"table-row-wrapper",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},style:{position:"relative",overflow:"hidden"},children:["list"===D&&eW&&(0,A.jsxs)("div",{className:"swipe-action-bg",onClick:t=>{t.stopPropagation(),f||tA(e)},style:{pointerEvents:f?"none":"auto",opacity:f?.6:1},children:[(0,A.jsx)(lQ,{width:"18",height:"18"}),(0,A.jsx)("span",{children:""})]}),(0,A.jsx)(nD.div,{className:"card"===D?"glass card":"table-row",drag:"list"===D&&!!eW&&"x",dragConstraints:{left:-80,right:0},dragElastic:.1,dragDirectionLock:!0,onDragStart:(e,t)=>{},animate:"list"===D&&eW?{x:e0===e.code?-80:0}:void 0,onDragEnd:(t,{offset:r,velocity:i})=>{"list"===D&&eW&&(r.x<-40?e1(e.code):e1(null))},onClick:t=>{"list"===D&&eW&&e0===e.code&&(t.stopPropagation(),e1(null))},style:{background:"list"===D?"var(--bg)":void 0,position:"relative",zIndex:1},children:"list"===D?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"table-cell name-cell",children:["all"!==j&&"fav"!==j?(0,A.jsx)("button",{className:"icon-button fav-button",onClick:t=>{t.stopPropagation(),ty(e.code)},title:"",children:(0,A.jsx)(ue,{width:"18",height:"18",style:{transform:"rotate(180deg)"}})}):(0,A.jsx)("button",{className:`icon-button fav-button ${v.has(e.code)?"active":""}`,onClick:t=>{t.stopPropagation(),tg(e.code)},title:v.has(e.code)?"":"",children:(0,A.jsx)(ui,{width:"18",height:"18",filled:v.has(e.code)})}),(0,A.jsxs)("div",{className:"title-text",children:[(0,A.jsx)("span",{className:`name-text ${e.jzrq===eF?"updated":""}`,title:e.jzrq===eF?"":"",children:e.name}),(0,A.jsxs)("span",{className:"muted code-text",children:["#",e.code]})]})]}),(t=new Date().getHours()>=9,r=e.jzrq===eF,eM&&t&&!r?e.noValuation?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"table-cell text-right value-cell",children:(0,A.jsx)("span",{style:{fontWeight:700},children:e.dwjz??""})}),(0,A.jsx)("div",{className:"table-cell text-right change-cell",children:(0,A.jsx)("span",{className:e.zzl>0?"up":e.zzl<0?"down":"",style:{fontWeight:700},children:void 0!==e.zzl&&null!==e.zzl?`${e.zzl>0?"+":""}${Number(e.zzl).toFixed(2)}%`:""})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"table-cell text-right value-cell",children:(0,A.jsx)("span",{style:{fontWeight:700},children:e.estPricedCoverage>.05?e.estGsz.toFixed(4):e.gsz??""})}),(0,A.jsx)("div",{className:"table-cell text-right change-cell",children:(0,A.jsx)("span",{className:e.estPricedCoverage>.05?e.estGszzl>0?"up":e.estGszzl<0?"down":"":Number(e.gszzl)>0?"up":0>Number(e.gszzl)?"down":"",style:{fontWeight:700},children:e.estPricedCoverage>.05?`${e.estGszzl>0?"+":""}${e.estGszzl.toFixed(2)}%`:"number"==typeof e.gszzl?`${e.gszzl>0?"+":""}${e.gszzl.toFixed(2)}%`:e.gszzl??""})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"table-cell text-right value-cell",children:(0,A.jsx)("span",{style:{fontWeight:700},children:e.dwjz??""})}),(0,A.jsx)("div",{className:"table-cell text-right change-cell",children:(0,A.jsx)("span",{className:e.zzl>0?"up":e.zzl<0?"down":"",style:{fontWeight:700},children:void 0!==e.zzl?`${e.zzl>0?"+":""}${Number(e.zzl).toFixed(2)}%`:""})})]})),(0,A.jsx)("div",{className:"table-cell text-right time-cell",children:(0,A.jsx)("span",{className:"muted",style:{fontSize:"12px"},children:e.noValuation?e.jzrq||"-":e.gztime||e.time||"-"})}),!eW&&(i=eI[e.code],null===(n=(s=e5(e,i))?s.amount:null)?(0,A.jsx)("div",{className:"table-cell text-right holding-amount-cell",title:"",onClick:t=>{t.stopPropagation(),ek({open:!0,fund:e})},children:(0,A.jsxs)("span",{className:"muted",style:{display:"inline-flex",alignItems:"center",gap:4,fontSize:"12px",cursor:"pointer"},children:[" ",(0,A.jsx)(lZ,{width:"12",height:"12"})]})}):(0,A.jsxs)("div",{className:"table-cell text-right holding-amount-cell",title:"",onClick:t=>{t.stopPropagation(),eE({open:!0,fund:e})},children:[(0,A.jsxs)("span",{style:{fontWeight:700,marginRight:6},children:["",n.toFixed(2)]}),(0,A.jsx)("button",{className:"icon-button",onClick:t=>{t.stopPropagation(),eE({open:!0,fund:e})},title:"",style:{border:"none",width:"28px",height:"28px",marginLeft:-6},children:(0,A.jsx)(lZ,{width:"14",height:"14"})})]})),(a=eI[e.code],u=null!==(l=(o=e5(e,a))?o.profitToday:null),(0,A.jsx)("div",{className:"table-cell text-right profit-cell",children:(0,A.jsx)("span",{className:u?l>0?"up":l<0?"down":"":"muted",style:{fontWeight:700},children:u?`${l>0?"+":l<0?"-":""}\xa5${Math.abs(l).toFixed(2)}`:""})})),!eW&&(c=eI[e.code],d=(h=e5(e,c))?h.profitTotal:null,p=c&&c.cost&&c.share?c.cost*c.share:0,m=e$[e.code],b=(w=null!==d)?m&&p>0?`${d>0?"+":d<0?"-":""}${Math.abs(d/p*100).toFixed(2)}%`:`${d>0?"+":d<0?"-":""}\xa5${Math.abs(d).toFixed(2)}`:"",(0,A.jsx)("div",{className:"table-cell text-right holding-cell",title:"/",onClick:t=>{t.stopPropagation(),w&&eB(t=>({...t,[e.code]:!t[e.code]}))},style:{cursor:w?"pointer":"default"},children:(0,A.jsx)("span",{className:w?d>0?"up":d<0?"down":"":"muted",style:{fontWeight:700},children:b})})),(0,A.jsx)("div",{className:"table-cell text-center action-cell",style:{gap:4},children:(0,A.jsx)("button",{className:"icon-button danger",onClick:()=>!f&&tA(e),title:"",disabled:f,style:{width:"28px",height:"28px",opacity:f?.6:1,cursor:f?"not-allowed":"pointer"},children:(0,A.jsx)(lQ,{width:"14",height:"14"})})})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"row",style:{marginBottom:10},children:[(0,A.jsxs)("div",{className:"title",children:["all"!==j&&"fav"!==j?(0,A.jsx)("button",{className:"icon-button fav-button",onClick:t=>{t.stopPropagation(),ty(e.code)},title:"",children:(0,A.jsx)(ue,{width:"18",height:"18",style:{transform:"rotate(180deg)"}})}):(0,A.jsx)("button",{className:`icon-button fav-button ${v.has(e.code)?"active":""}`,onClick:t=>{t.stopPropagation(),tg(e.code)},title:v.has(e.code)?"":"",children:(0,A.jsx)(ui,{width:"18",height:"18",filled:v.has(e.code)})}),(0,A.jsxs)("div",{className:"title-text",children:[(0,A.jsx)("span",{className:`name-text ${e.jzrq===eF?"updated":""}`,title:e.jzrq===eF?"":"",children:e.name}),(0,A.jsxs)("span",{className:"muted",children:["#",e.code]})]})]}),(0,A.jsxs)("div",{className:"actions",children:[(0,A.jsxs)("div",{className:"badge-v",children:[(0,A.jsx)("span",{children:e.noValuation?"":""}),(0,A.jsx)("strong",{children:e.noValuation?e.jzrq||"-":e.gztime||e.time||"-"})]}),(0,A.jsx)("div",{className:"row",style:{gap:4},children:(0,A.jsx)("button",{className:"icon-button danger",onClick:()=>!f&&tA(e),title:"",disabled:f,style:{width:"28px",height:"28px",opacity:f?.6:1,cursor:f?"not-allowed":"pointer"},children:(0,A.jsx)(lQ,{width:"14",height:"14"})})})]})]}),(0,A.jsxs)("div",{className:"row",style:{marginBottom:12},children:[(0,A.jsx)(uu,{label:"",value:e.dwjz??""}),e.noValuation?(0,A.jsx)(uu,{label:"",value:void 0!==e.zzl&&null!==e.zzl?`${e.zzl>0?"+":""}${Number(e.zzl).toFixed(2)}%`:"",delta:e.zzl}):(0,A.jsxs)(A.Fragment,{children:[(x=new Date().getHours()>=9,S=e.jzrq===eF,eM&&x&&!S?null:(0,A.jsx)(uu,{label:"",value:void 0!==e.zzl?`${e.zzl>0?"+":""}${Number(e.zzl).toFixed(2)}%`:"",delta:e.zzl})),(0,A.jsx)(uu,{label:"",value:e.estPricedCoverage>.05?e.estGsz.toFixed(4):e.gsz??""}),(0,A.jsx)(uu,{label:"",value:e.estPricedCoverage>.05?`${e.estGszzl>0?"+":""}${e.estGszzl.toFixed(2)}%`:"number"==typeof e.gszzl?`${e.gszzl>0?"+":""}${e.gszzl.toFixed(2)}%`:e.gszzl??"",delta:e.estPricedCoverage>.05?e.estGszzl:Number(e.gszzl)||0})]})]}),(0,A.jsx)("div",{className:"row",style:{marginBottom:12},children:(k=eI[e.code],(_=e5(e,k))?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"stat",style:{cursor:"pointer",flexDirection:"column",gap:4},onClick:()=>eE({open:!0,fund:e}),children:[(0,A.jsxs)("span",{className:"label",style:{display:"flex",alignItems:"center",gap:4},children:[" ",(0,A.jsx)(lZ,{width:"12",height:"12",style:{opacity:.7}})]}),(0,A.jsxs)("span",{className:"value",children:["",_.amount.toFixed(2)]})]}),(0,A.jsxs)("div",{className:"stat",style:{flexDirection:"column",gap:4},children:[(0,A.jsx)("span",{className:"label",children:""}),(0,A.jsxs)("span",{className:`value ${_.profitToday>0?"up":_.profitToday<0?"down":""}`,children:[_.profitToday>0?"+":_.profitToday<0?"-":"","",Math.abs(_.profitToday).toFixed(2)]})]}),null!==_.profitTotal&&(0,A.jsxs)("div",{className:"stat",onClick:t=>{t.stopPropagation(),eB(t=>({...t,[e.code]:!t[e.code]}))},style:{cursor:"pointer",flexDirection:"column",gap:4},title:"/",children:[(0,A.jsxs)("span",{className:"label",children:["",e$[e.code]?"(%)":""]}),(0,A.jsxs)("span",{className:`value ${_.profitTotal>0?"up":_.profitTotal<0?"down":""}`,children:[_.profitTotal>0?"+":_.profitTotal<0?"-":"",e$[e.code]?`${Math.abs(k.cost*k.share?_.profitTotal/(k.cost*k.share)*100:0).toFixed(2)}%`:`\xa5${Math.abs(_.profitTotal).toFixed(2)}`]})]})]}):(0,A.jsxs)("div",{className:"stat",style:{flexDirection:"column",gap:4},children:[(0,A.jsx)("span",{className:"label",children:""}),(0,A.jsxs)("div",{className:"value muted",style:{fontSize:"14px",display:"flex",alignItems:"center",gap:4,cursor:"pointer"},onClick:()=>ek({open:!0,fund:e}),children:[" ",(0,A.jsx)(lZ,{width:"12",height:"12"})]})]}))}),e.estPricedCoverage>.05&&(0,A.jsxs)("div",{style:{fontSize:"10px",color:"var(--muted)",marginTop:-8,marginBottom:10,textAlign:"right"},children:[" ",Math.round(100*e.estPricedCoverage),"% "]}),(0,A.jsx)("div",{style:{marginBottom:8,cursor:"pointer",userSelect:"none"},className:"title",onClick:()=>{var t;return t=e.code,void y(e=>{let r=new Set(e);return r.has(t)?r.delete(t):r.add(t),localStorage.setItem("collapsedCodes",JSON.stringify(Array.from(r))),r})},children:(0,A.jsxs)("div",{className:"row",style:{width:"100%",flex:1},children:[(0,A.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:6},children:[(0,A.jsx)("span",{children:"10"}),(0,A.jsx)(l2,{width:"16",height:"16",className:"muted",style:{transform:g.has(e.code)?"rotate(-90deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),(0,A.jsx)("span",{className:"muted",children:" / "})]})}),(0,A.jsx)(nK,{children:!g.has(e.code)&&(0,A.jsx)(nD.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3,ease:"easeInOut"},style:{overflow:"hidden"},children:Array.isArray(e.holdings)&&e.holdings.length?(0,A.jsx)("div",{className:"list",children:e.holdings.map((e,t)=>(0,A.jsxs)("div",{className:"item",children:[(0,A.jsx)("span",{className:"name",children:e.name}),(0,A.jsxs)("div",{className:"values",children:["number"==typeof e.change&&(0,A.jsxs)("span",{className:`badge ${e.change>0?"up":e.change<0?"down":""}`,style:{marginRight:8},children:[e.change>0?"+":"",e.change.toFixed(2),"%"]}),(0,A.jsx)("span",{className:"weight",children:e.weight})]})]},t))}):(0,A.jsx)("div",{className:"muted",style:{padding:"8px 0"},children:""})})})]})})]},e.code)})})]})},D)})]})]})]}),(0,A.jsx)(nK,{children:ez&&(0,A.jsx)(uy,{title:"",message:` "${ez.name}" `,confirmText:"",onConfirm:()=>{tO(ez.code),eU(null)},onCancel:()=>eU(null)})}),(0,A.jsx)(nK,{children:eH&&(0,A.jsx)(uy,{title:"",message:"",confirmText:"",onConfirm:()=>{eK(!1),tx()},onCancel:()=>eK(!1)})}),(0,A.jsxs)("div",{className:"footer",children:[(0,A.jsx)("p",{style:{marginBottom:8},children:""}),(0,A.jsx)("p",{style:{marginBottom:12},children:"1%"}),(0,A.jsxs)("div",{style:{marginTop:12,opacity:.8,display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[(0,A.jsxs)("p",{style:{margin:0},children:["",(0,A.jsx)("button",{className:"link-button",onClick:()=>{ea(e=>e+1),es(!0)},style:{background:"none",border:"none",color:"var(--primary)",cursor:"pointer",padding:"0 4px",textDecoration:"underline",fontSize:"inherit",fontWeight:600},children:""})]}),(0,A.jsxs)("button",{onClick:()=>eP(!0),style:{background:"transparent",border:"none",color:"var(--muted)",fontSize:"12px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:4,padding:"4px 8px",borderRadius:"6px",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.color="var(--primary)",e.currentTarget.style.background="rgba(255, 255, 255, 0.05)"},onMouseLeave:e=>{e.currentTarget.style.color="var(--muted)",e.currentTarget.style.background="transparent"},children:[(0,A.jsx)("span",{children:""}),(0,A.jsx)("span",{children:""})]})]})]}),(0,A.jsx)(nK,{children:ei&&(0,A.jsx)(uc,{onClose:()=>es(!1),user:z},en)}),(0,A.jsx)(nK,{children:ew&&(0,A.jsx)(uf,{failures:ex,onClose:()=>eb(!1)})}),(0,A.jsx)(nK,{children:O&&(0,A.jsx)(uw,{allFunds:e,currentGroupCodes:b.find(e=>e.id===j)?.codes||[],onClose:()=>N(!1),onAdd:e=>{if(!e||0===e.length)return;let t=b.map(t=>t.id===j?{...t,codes:Array.from(new Set([...t.codes,...e]))}:t);x(t),localStorage.setItem("groups",JSON.stringify(t)),N(!1),to({open:!0,message:` ${e.length} `})}})}),(0,A.jsx)(nK,{children:e_.open&&(0,A.jsx)(uh,{fund:e_.fund,onClose:()=>eE({open:!1,fund:null}),onAction:e=>{var t;return t=e_.fund,void(eE({open:!1,fund:null}),"edit"===e?ek({open:!0,fund:t}):"clear"===e?eO({fund:t}):("buy"===e||"sell"===e)&&eA({open:!0,fund:t,type:e}))}})}),(0,A.jsx)(nK,{children:eT.open&&(0,A.jsx)(ud,{type:eT.type,fund:eT.fund,onClose:()=>eA({open:!1,fund:null,type:"buy"}),onConfirm:e=>((e,t)=>{let r,i,s=eI[e.code]||{share:0,cost:0};if("buy"===eT.type){r=s.share+t.share;let e=void 0!==t.totalCost?t.totalCost:t.price*t.share;i=(s.cost*s.share+e)/r}else r=Math.max(0,s.share-t.share),i=s.cost,0===r&&(i=0);ti(e.code,{share:r,cost:i}),eA({open:!1,fund:null,type:"buy"})})(eT.fund,e)})}),(0,A.jsx)(nK,{children:eC&&(0,A.jsx)(uy,{title:"",message:`${eC.fund?.name}`,onConfirm:()=>{eC?.fund&&ti(eC.fund.code,{share:null,cost:null}),eO(null)},onCancel:()=>eO(null),confirmText:""})}),(0,A.jsx)(nK,{children:eS.open&&(0,A.jsx)(up,{fund:eS.fund,holding:eI[eS.fund?.code],onClose:()=>ek({open:!1,fund:null}),onSave:e=>ti(eS.fund?.code,e)})}),(0,A.jsx)(nK,{children:eN&&(0,A.jsx)("div",{className:"modal-overlay",onClick:()=>eP(!1),children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"360px"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:20,justifyContent:"space-between"},children:[(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",gap:10},children:(0,A.jsx)("span",{children:" "})}),(0,A.jsx)("button",{className:"icon-button",onClick:()=>eP(!1),style:{border:"none",background:"transparent"},children:(0,A.jsx)(l9,{width:"20",height:"20"})})]}),(0,A.jsx)("div",{style:{marginBottom:20},children:(0,A.jsx)(ua,{})}),(0,A.jsx)("div",{className:"muted",style:{fontSize:"12px",textAlign:"center",lineHeight:1.5},children:""})]})})}),(0,A.jsx)(nK,{children:E&&(0,A.jsx)(uv,{groups:b,onClose:()=>T(!1),onSave:e=>{x(e),localStorage.setItem("groups",JSON.stringify(e)),"all"===j||"fav"===j||e.find(e=>e.id===j)||S("all")}})}),(0,A.jsx)(nK,{children:k&&(0,A.jsx)(ub,{onClose:()=>_(!1),onConfirm:e=>{let t={id:`group_${Date.now()}`,name:e,codes:[]},r=[...b,t];x(r),localStorage.setItem("groups",JSON.stringify(r)),S(t.id),_(!1)}})}),(0,A.jsx)(nK,{children:ta.open&&(0,A.jsx)(um,{message:ta.message,onClose:()=>to({open:!1,message:""})})}),(0,A.jsx)(nK,{children:tc.open&&(0,A.jsx)(ug,{type:tc.type,onConfirm:tz,onCancel:()=>{"conflict"===tc.type&&tc.cloudData&&tM(tc.cloudData),th({open:!1,userId:null})}})}),c&&(0,A.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:()=>h(!1),children:(0,A.jsxs)("div",{className:"glass card modal",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,A.jsx)(lZ,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""}),(0,A.jsx)("span",{className:"muted",children:""})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:""}),(0,A.jsx)("div",{className:"chips",style:{marginBottom:12},children:[10,30,60,120,300].map(e=>(0,A.jsxs)("button",{type:"button",className:`chip ${d===e?"active":""}`,onClick:()=>p(e),"aria-pressed":d===e,children:[e," "]},e))}),(0,A.jsx)("input",{className:"input",type:"number",min:"10",step:"5",value:d,onChange:e=>p(Number(e.target.value)),placeholder:""}),d<10&&(0,A.jsx)("div",{className:"error-text",style:{marginTop:8},children:" 10 "})]}),(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:""}),(0,A.jsx)("div",{className:"row",style:{gap:8},children:(0,A.jsx)("button",{type:"button",className:"button",onClick:tU,children:""})}),(0,A.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem",marginTop:26},children:""}),(0,A.jsx)("div",{className:"row",style:{gap:8,marginTop:8},children:(0,A.jsx)("button",{type:"button",className:"button",onClick:()=>tP.current?.click?.(),children:""})}),(0,A.jsx)("input",{ref:tP,type:"file",accept:"application/json",style:{display:"none"},onChange:tV}),tI&&(0,A.jsx)("div",{className:"muted",style:{marginTop:8},children:tI})]}),(0,A.jsx)("div",{className:"row",style:{justifyContent:"flex-end",marginTop:24},children:(0,A.jsx)("button",{className:"button",onClick:e=>{e?.preventDefault?.();let t=1e3*Math.max(10,Number(d));u(t),localStorage.setItem("refreshMs",String(t)),h(!1)},disabled:d<10,children:""})})]})}),(0,A.jsx)(nK,{children:tl&&(0,A.jsx)(nD.div,{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:()=>tu(!1),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{zIndex:10002},children:(0,A.jsxs)(nD.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"glass card modal",style:{maxWidth:"400px"},onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:12},children:[(0,A.jsx)(lX,{width:"20",height:"20",style:{color:"var(--success)"}}),(0,A.jsx)("span",{children:""})]}),(0,A.jsxs)("div",{style:{marginBottom:24},children:[(0,A.jsxs)("p",{className:"muted",style:{fontSize:"14px",lineHeight:"1.6",marginBottom:12},children:["",(0,A.jsx)("br",{}),""]}),eQ&&(0,A.jsx)("div",{style:{background:"rgba(0,0,0,0.2)",padding:"12px",borderRadius:"8px",fontSize:"13px",lineHeight:"1.5",maxHeight:"200px",overflowY:"auto",whiteSpace:"pre-wrap",border:"1px solid rgba(255,255,255,0.1)"},children:eQ})]}),(0,A.jsxs)("div",{className:"row",style:{gap:12},children:[(0,A.jsx)("button",{className:"button secondary",onClick:()=>tu(!1),style:{flex:1,background:"rgba(255,255,255,0.05)",color:"var(--text)"},children:""}),(0,A.jsx)("button",{className:"button",onClick:()=>window.location.reload(),style:{flex:1,background:"var(--success)",color:"#fff",border:"none"},children:""})]})]})})}),W&&(0,A.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-label":"",onClick:()=>{q(!1),X(""),Z(""),K("")},children:(0,A.jsxs)("div",{className:"glass card modal login-modal",onClick:e=>e.stopPropagation(),children:[(0,A.jsxs)("div",{className:"title",style:{marginBottom:16},children:[(0,A.jsx)(l8,{width:"20",height:"20"}),(0,A.jsx)("span",{children:""}),(0,A.jsx)("span",{className:"muted",children:""})]}),(0,A.jsxs)("form",{onSubmit:tw,children:[(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsxs)("div",{style:{marginBottom:12,padding:"8px 12px",background:"rgba(230, 162, 60, 0.1)",border:"1px solid rgba(230, 162, 60, 0.2)",borderRadius:"4px",fontSize:"0.8rem",color:"#e6a23c",lineHeight:"1.4"},children:["  ",(0,A.jsx)("a",{href:"https://github.com/hzm0321/real-time-fund/issues",target:"_blank",style:{textDecoration:"underline",color:"inherit"},children:"Github"})," "]}),(0,A.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:""}),(0,A.jsx)("input",{style:{width:"100%"},className:"input",type:"email",placeholder:"your@email.com",value:H,onChange:e=>K(e.target.value),disabled:J||!!Q})]}),Q&&(0,A.jsx)("div",{className:"login-message success",style:{marginBottom:12},children:(0,A.jsx)("span",{children:Q})}),Q&&(0,A.jsxs)("div",{className:"form-group",style:{marginBottom:16},children:[(0,A.jsx)("div",{className:"muted",style:{marginBottom:8,fontSize:"0.8rem"},children:"/"}),(0,A.jsx)("input",{className:"input",type:"text",placeholder:"",value:ee,onChange:e=>et(e.target.value),disabled:J,maxLength:6})]}),Y&&(0,A.jsx)("div",{className:"login-message error",style:{marginBottom:12},children:(0,A.jsx)("span",{children:Y})}),(0,A.jsxs)("div",{className:"row",style:{justifyContent:"flex-end",gap:12},children:[(0,A.jsx)("button",{type:"button",className:"button secondary",onClick:()=>{q(!1),X(""),Z(""),K(""),et("")},disabled:J,children:""}),(0,A.jsx)("button",{className:"button",type:Q?"button":"submit",onClick:Q?tb:void 0,disabled:J||Q&&!ee,children:J?"...":Q?"":""})]})]})]})})]})}e.s(["default",()=>uS],60392)}]);